!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.Viewer=e(require("react"),require("react-dom")):t.Viewer=e(t.React,t.ReactDOM)}("undefined"!=typeof self?self:this,function(__WEBPACK_EXTERNAL_MODULE_0__,__WEBPACK_EXTERNAL_MODULE_318__){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=131)}([function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_0__},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){return"[object Array]"===T.call(t)}function i(t){return"[object ArrayBuffer]"===T.call(t)}function o(t){return"undefined"!=typeof FormData&&t instanceof FormData}function s(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function l(t){return void 0===t}function c(t){return null!==t&&"object"==typeof t}function h(t){return"[object Date]"===T.call(t)}function p(t){return"[object File]"===T.call(t)}function f(t){return"[object Blob]"===T.call(t)}function d(t){return"[object Function]"===T.call(t)}function g(t){return c(t)&&d(t.pipe)}function m(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function y(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function w(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||r(t)||(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function x(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=x(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)w(arguments[n],t);return e}function b(t,e,n){return w(e,function(e,r){t[r]=n&&"function"==typeof e?E(e,n):e}),t}var E=n(92),_=n(185),T=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:i,isBuffer:_,isFormData:o,isArrayBufferView:s,isString:a,isNumber:u,isObject:c,isUndefined:l,isDate:h,isFile:p,isBlob:f,isFunction:d,isStream:g,isURLSearchParams:m,isStandardBrowserEnv:y,forEach:w,merge:x,extend:b,trim:v}},function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=n(80),o=n(46);t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=o,n=s,r=!0,a=l=void 0}},l=n(0),c=r(l),h=n(318),p=r(h),f=n(8),d=r(f),g=n(319),m=r(g),v=n(320),y=r(v),w=n(321),x=r(w);e.default=function(t){var e=function(e){function n(t){i(this,n),u(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,t),this.state={isOpen:!1}}return o(n,e),a(n,[{key:"toggleMenu",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.isOpen,r=e.noStateChange,i={isOpen:void 0!==n?n:!this.state.isOpen};this.applyWrapperStyles(),this.setState(i,function(){!r&&t.props.onStateChange(i),t.timeoutId&&clearTimeout(t.timeoutId),t.timeoutId=setTimeout(function(){t.timeoutId=null,i.isOpen||t.applyWrapperStyles(!1)},500)})}},{key:"applyWrapperStyles",value:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.props.bodyClassName){document.querySelector("body").classList[e?"add":"remove"](this.props.bodyClassName)}t.pageWrap&&this.props.pageWrapId&&this.handleExternalWrapper(this.props.pageWrapId,t.pageWrap,e),t.outerContainer&&this.props.outerContainerId&&this.handleExternalWrapper(this.props.outerContainerId,t.outerContainer,e)}},{key:"handleExternalWrapper",value:function(t,e,n){var r=document.querySelector("html"),i=document.querySelector("body"),o=document.getElementById(t);if(o){var s=this.getStyle(e);for(var a in s)s.hasOwnProperty(a)&&(o.style[a]=n?s[a]:"");[r,i].forEach(function(t){t.style["overflow-x"]=n?"hidden":""})}}},{key:"getStyles",value:function(e,n,r){var i="bm"+e.replace(e.charAt(0),e.charAt(0).toUpperCase()),o=m.default[e]?this.getStyle(m.default[e]):{};return t[e]&&(o=s({},o,this.getStyle(t[e],n+1))),this.props.styles[i]&&(o=s({},o,this.props.styles[i])),r&&(o=s({},o,r)),o}},{key:"getStyle",value:function(t,e){var n=this.props.width,r="string"!=typeof n?n+"px":n;return t(this.state.isOpen,r,this.props.right,e)}},{key:"listenForClose",value:function(t){t=t||window.event,!this.state.isOpen||"Escape"!==t.key&&27!==t.keyCode||this.toggleMenu()}},{key:"shouldDisableOverlayClick",value:function(){return"function"==typeof this.props.disableOverlayClick?this.props.disableOverlayClick():this.props.disableOverlayClick}},{key:"componentWillMount",value:function(){if(!t)throw new Error("No styles supplied")}},{key:"componentDidMount",value:function(){this.props.customOnKeyDown?window.onkeydown=this.props.customOnKeyDown:this.props.disableCloseOnEsc||(window.onkeydown=this.listenForClose.bind(this)),this.props.isOpen&&this.toggleMenu({isOpen:!0,noStateChange:!0})}},{key:"componentWillUnmount",value:function(){window.onkeydown=null,this.applyWrapperStyles(!1)}},{key:"componentDidUpdate",value:function(){var e=this;t.svg&&function(){var n=p.default.findDOMNode(e,"bm-morph-shape"),r=t.svg.lib(n).select("path");e.state.isOpen?t.svg.animate(r):setTimeout(function(){r.attr("d",t.svg.pathInitial)},300)}()}},{key:"componentWillReceiveProps",value:function(t){void 0!==t.isOpen&&t.isOpen!==this.state.isOpen&&this.toggleMenu()}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,!this.props.noOverlay&&c.default.createElement("div",{className:("bm-overlay "+this.props.overlayClassName).trim(),onClick:function(){return!e.shouldDisableOverlayClick()&&e.toggleMenu()},style:this.getStyles("overlay")}),c.default.createElement("div",{id:this.props.id,className:("bm-menu-wrap "+this.props.className).trim(),style:this.getStyles("menuWrap")},t.svg&&c.default.createElement("div",{className:("bm-morph-shape "+this.props.morphShapeClassName).trim(),style:this.getStyles("morphShape")},c.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 100 800",preserveAspectRatio:"none"},c.default.createElement("path",{d:t.svg.pathInitial}))),c.default.createElement("div",{className:("bm-menu "+this.props.menuClassName).trim(),style:this.getStyles("menu")},c.default.createElement("nav",{className:("bm-item-list "+this.props.itemListClassName).trim(),style:this.getStyles("itemList")},c.default.Children.map(this.props.children,function(t,n){if(t){var r=["bm-item",e.props.itemClassName,t.props.className].filter(function(t){return!!t}).join(" "),i={key:n,className:r,style:e.getStyles("item",n,t.props.style)};return c.default.cloneElement(t,i)}}))),!1!==this.props.customCrossIcon&&c.default.createElement("div",{style:this.getStyles("closeButton")},c.default.createElement(x.default,{onClick:function(){return e.toggleMenu()},styles:this.props.styles,customIcon:this.props.customCrossIcon,className:this.props.crossButtonClassName,crossClassName:this.props.crossClassName}))),!1!==this.props.customBurgerIcon&&c.default.createElement("div",{style:this.getStyles("burgerIcon")},c.default.createElement(y.default,{onClick:function(){return e.toggleMenu()},styles:this.props.styles,customIcon:this.props.customBurgerIcon,className:this.props.burgerButtonClassName,barClassName:this.props.burgerBarClassName})))}}]),n}(l.Component);return e.propTypes={bodyClassName:d.default.string,burgerBarClassName:d.default.string,burgerButtonClassName:d.default.string,crossButtonClassName:d.default.string,crossClassName:d.default.string,customBurgerIcon:d.default.oneOfType([d.default.element,d.default.oneOf([!1])]),customCrossIcon:d.default.oneOfType([d.default.element,d.default.oneOf([!1])]),customOnKeyDown:d.default.func,disableCloseOnEsc:d.default.bool,disableOverlayClick:d.default.oneOfType([d.default.bool,d.default.func]),id:d.default.string,isOpen:d.default.bool,itemClassName:d.default.string,itemListClassName:d.default.string,menuClassName:d.default.string,morphShapeClassName:d.default.string,noOverlay:d.default.bool,onStateChange:d.default.func,outerContainerId:t&&t.outerContainer?d.default.string.isRequired:d.default.string,overlayClassName:d.default.string,pageWrapId:t&&t.pageWrap?d.default.string.isRequired:d.default.string,right:d.default.bool,styles:d.default.object,width:d.default.oneOfType([d.default.number,d.default.string])},e.defaultProps={bodyClassName:"",burgerBarClassName:"",burgerButtonClassName:"",className:"",crossButtonClassName:"",crossClassName:"",disableCloseOnEsc:!1,id:"",itemClassName:"",itemListClassName:"",menuClassName:"",morphShapeClassName:"",noOverlay:!1,onStateChange:function(){},outerContainerId:"",overlayClassName:"",pageWrapId:"",styles:{},width:300},e},t.exports=e.default},function(t,e,n){var r=n(81),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){function r(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?a(t)?o(t[0],t[1]):i(t):u(t)}var i=n(229),o=n(252),s=n(28),a=n(1),u=n(256);t.exports=r},function(t,e,n){t.exports=n(180)()},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){g&&f&&(g=!1,f.length?d=f.concat(d):m=-1,d.length&&a())}function a(){if(!g){var t=i(s);g=!0;for(var e=d.length;e;){for(f=d,d=[];++m<e;)f&&f[m].run();m=-1,e=d.length}f=null,g=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,h,p=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var f,d=[],g=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||g||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=n(157),o=n(162);t.exports=r},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);l.call(this,t),c.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s.nextTick(o,this)}function o(t){t.end()}var s=n(25),a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=r;var u=n(18);u.inherits=n(10);var l=n(70),c=n(74);u.inherits(r,l);for(var h=a(c.prototype),p=0;p<h.length;p++){var f=h[p];r.prototype[f]||(r.prototype[f]=c.prototype[f])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),s.nextTick(e,t)}},function(t,e,n){function r(t){return null==t?void 0===t?u:a:l&&l in Object(t)?o(t):s(t)}var i=n(27),o=n(158),s=n(159),a="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=r},function(t,e,n){function r(t){return s(t)?i(t):o(t)}var i=n(85),o=n(59),s=n(4);t.exports=r},function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return s(this,t,e,n)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?c(t,e,n):f(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return a(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function l(t,e){if(a(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(e,n);t=i(t,r);var s=t.write(e,n);return s!==r&&(t=t.slice(0,s)),t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=h(t,e),t}function f(t,e){if(o.isBuffer(e)){var n=0|d(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(t,0):h(t,e);if("Buffer"===e.type&&Q(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),o.alloc(+t)}function m(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(t).length;default:if(r)return G(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:x(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):x(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}var l;if(i){var c=-1;for(l=n;l<a;l++)if(o(t,l)===o(e,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*s}else-1!==c&&(l-=l-c),c=-1}else for(n+u>a&&(n=a-u),l=n;l>=0;l--){for(var h=!0,p=0;p<u;p++)if(o(t,l+p)!==o(e,p)){h=!1;break}if(h)return l}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function E(t,e,n,r){return Y(G(e,t.length-n),t,n,r)}function _(t,e,n,r){return Y(W(e),t,n,r)}function T(t,e,n,r){return _(t,e,n,r)}function S(t,e,n,r){return Y($(e),t,n,r)}function C(t,e,n,r){return Y(q(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,l,c,h;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128==(192&u)&&(h=(31&o)<<6|63&u)>127&&(s=h);break;case 3:u=t[i+1],l=t[i+2],128==(192&u)&&128==(192&l)&&(h=(15&o)<<12|(63&u)<<6|63&l)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:u=t[i+1],l=t[i+2],c=t[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(h=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return I(r)}function I(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function F(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function B(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,i){return i||B(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function H(t,e,n,r,i){return i||B(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function z(t){if(t=U(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function U(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function G(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function q(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function $(t){return Z.toByteArray(z(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function X(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Z=n(137),K=n(138),Q=n(66);e.Buffer=o,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return s(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return u(null,t,e,n)},o.allocUnsafe=function(t){return l(null,t)},o.allocUnsafeSlow=function(t){return l(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):v.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var s=i-r,a=n-e,u=Math.min(s,a),l=this.slice(r,i),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){s=l[h],a=c[h];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){L(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){L(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=o.isBuffer(t)?t:G(new o(t,r).toString()),u=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(2))},function(t,e,n){(function(t){function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function l(t){return void 0===t}function c(t){return"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function p(t){return"[object Date]"===m(t)}function f(t){return"[object Error]"===m(t)||t instanceof Error}function d(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function m(t){return Object.prototype.toString.call(t)}e.isArray=n,e.isBoolean=r,e.isNull=i,e.isNullOrUndefined=o,e.isNumber=s,e.isString=a,e.isSymbol=u,e.isUndefined=l,e.isRegExp=c,e.isObject=h,e.isDate=p,e.isError=f,e.isFunction=d,e.isPrimitive=g,e.isBuffer=t.isBuffer}).call(e,n(17).Buffer)},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(178)),r(n(115)),r(n(62)),r(n(51)),r(n(90)),r(n(89)),r(n(97))},function(t,e,n){var r=n(45),i=n(19),o=n(84),s=n(47),a=Object.prototype,u=a.hasOwnProperty,l=r(function(t,e){t=Object(t);var n=-1,r=e.length,l=r>2?e[2]:void 0;for(l&&o(e[0],e[1],l)&&(r=1);++n<r;)for(var c=e[n],h=s(c),p=-1,f=h.length;++p<f;){var d=h[p],g=t[d];(void 0===g||i(g,a[d])&&!u.call(t,d))&&(t[d]=c[d])}return t});t.exports=l},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}t.exports=n},function(t,e,n){function r(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var i=n(33),o=1/0;t.exports=r},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){void 0===t&&(t=null),this.value=t}return t.prototype.create=function(t){return new this.constructor(t)},t.prototype.setValue=function(t){return this.create(t)},t.prototype.clear=function(){return this.create(null)},t.prototype.getValue=function(){return this.value},t.prototype.hasValue=function(){return!!this.value},t}();e.State=n},function(t,e,n){"use strict";(function(e){function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:n}:t.exports=e}).call(e,n(9))},function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return s(t,e,n)}var o=n(17),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(r(o,e),e.Buffer=i),r(s,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t,e,n){var r=n(6),i=r.Symbol;t.exports=i},function(t,e){function n(t){return t}t.exports=n},function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=(n(98),n(64),function(){function t(){this.active=!0,this.translations={},this.refCount=0}return t.prototype.incrementRef=function(){this.refCount++},t.prototype.decrementRef=function(){this.refCount--},t.prototype.setActive=function(t){return this.active=t,this},t.prototype.setViewerManager=function(t){this.viewer=t,this.uuid=t.guid(),this.document=this.viewer.document},t.prototype.getDocument=function(){return this.document},t.prototype.setDocument=function(t){this.document=t},t}());e.Accessor=r},function(t,e,n){function r(t,e){return i(t)?t:o(t,e)?[t]:s(a(t))}var i=n(1),o=n(55),s=n(204),a=n(224);t.exports=r},function(t,e,n){function r(t){return"symbol"==typeof t||o(t)&&i(t)==s}var i=n(15),o=n(13),s="[object Symbol]";t.exports=r},function(t,e,n){var r=n(11),i=r(Object,"create");t.exports=i},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(214),o=n(215),s=n(216),a=n(217),u=n(218);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=n(19);t.exports=r},function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=n(220);t.exports=r},function(t,e,n){var r=n(264),i=n(45),o=n(267),s=i(function(t,e){return o(t)?r(t,e):[]});t.exports=s},function(t,e,n){var r=n(119),i=n(289),o=i(r);t.exports=o},function(t,e,n){(function(e){var require,require,r,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t.version="0.5.0"}(r||(r={}));var r;!function(t){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})}(r||(r={}));var r;!function(t){var e=function(){function t(){}return t.prototype.getEnumerator=function(){return{moveNext:function(){return!1},current:void 0}},t.prototype.aggregate=function(t,e){for(var n=t,r=this.getEnumerator();r.moveNext();)n=e(n,r.current);return n},t.prototype.all=function(t){if(t)for(var e=this.getEnumerator(),n=0;e.moveNext();){if(!t(e.current,n))return!1;n++}return!0},t.prototype.any=function(t){for(var e=this.getEnumerator(),n=0;e.moveNext();){if(!t)return!0;if(t(e.current,n))return!0;n++}return!1},t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},t.prototype.apply=function(t){throw new Error("Not implemented")},t.prototype.at=function(t){for(var e=this.getEnumerator(),n=0;e.moveNext();){if(n===t)return e.current;n++}},t.prototype.average=function(t){var e=0,n=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var r=this.getEnumerator();r.moveNext();)n+=t(r.current),e++;return 0===e?0:n/e},t.prototype.concat=function(t){throw new Error("Not implemented")},t.prototype.count=function(t){for(var e=0,n=this.getEnumerator();n.moveNext();)t&&!t(n.current)||e++;return e},t.prototype.difference=function(t,e){return e=e||function(t,e){return t===e},t instanceof Array&&(t=t.en()),{intersection:this.intersect(t,e).toArray().en(),aNotB:this.except(t,e).toArray().en(),bNotA:t.except(this,e).toArray().en()}},t.prototype.distinct=function(t){throw new Error("Not implemented")},t.prototype.except=function(t,e){throw new Error("Not implemented")},t.prototype.first=function(t){for(var e=this.getEnumerator();e.moveNext();)if(!t||t(e.current))return e.current},t.prototype.firstIndex=function(t){for(var e=this.getEnumerator(),n=0;e.moveNext();n++)if(!t||t(e.current))return n;return-1},t.prototype.forEach=function(t){for(var e=this.getEnumerator();e.moveNext();)t(e.current)},t.prototype.groupBy=function(t,e){throw new Error("Not implemented")},t.prototype.intersect=function(t,e){throw new Error("Not implemented")},t.prototype.join=function(t,e,n,r,i){throw new Error("Not implemented")},t.prototype.last=function(t){for(var e,n=this.getEnumerator();n.moveNext();)t&&!t(n.current)||(e=n.current);return e},t.prototype.lastIndex=function(t){for(var e=-1,n=this.getEnumerator(),r=0;n.moveNext();r++)t&&!t(n.current)||(e=r);return e},t.prototype.max=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var n=t(e.current);e.moveNext();)n=Math.max(n,t(e.current));return n},t.prototype.min=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var n=t(e.current);e.moveNext();)n=Math.min(n,t(e.current));return n},t.prototype.orderBy=function(t,e){throw new Error("Not implemented")},t.prototype.orderByDescending=function(t,e){throw new Error("Not implemented")},t.prototype.prepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},t.prototype.reverse=function(){throw new Error("Not implemented")},t.prototype.select=function(t){throw new Error("Not implemented")},t.prototype.selectMany=function(t){throw new Error("Not implemented")},t.prototype.skip=function(t){throw new Error("Not implemented")},t.prototype.skipWhile=function(t){throw new Error("Not implemented")},t.prototype.standardDeviation=function(t){var e=this.average(t),n=0,r=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var i=this.getEnumerator();i.moveNext();){var o=t(i.current)-e;n+=o*o,r++}return Math.sqrt(n/r)},t.prototype.sum=function(t){var e=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var n=this.getEnumerator();n.moveNext();)e+=t(n.current);return e},t.prototype.take=function(t){throw new Error("Not implemented")},t.prototype.takeWhile=function(t){throw new Error("Not implemented")},t.prototype.traverse=function(t){throw new Error("Not implemented")},t.prototype.traverseUnique=function(t,e){throw new Error("Not implemented")},t.prototype.toArray=function(){for(var t=[],e=this.getEnumerator();e.moveNext();)t.push(e.current);return t},t.prototype.toMap=function(t,e){throw new Error("Not implemented")},t.prototype.toList=function(){throw new Error("Not implemented")},t.prototype.union=function(t,e){throw new Error("Not implemented")},t.prototype.where=function(t){throw new Error("Not implemented")},t.prototype.zip=function(t,e){throw new Error("Not implemented")},t}();t.Enumerable=e}(r||(r={}));var r;!function(t){var e=function(){function e(t){this.size=0,this._keys=[],this._values=[];var e;if(t instanceof Array?e=t.en():t&&t.getEnumerator instanceof Function&&(e=t),e)for(var n=e.getEnumerator();n&&n.moveNext();)this.set(n.current[0],n.current[1])}return e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.delete=function(t){var e=this._keys.indexOf(t);return e>-1&&(this._keys.splice(e,1),this._values.splice(e,1),this.size--,!0)},e.prototype.entries=function(){var e=this;return t.range(0,this.size).select(function(t){return[e._keys[t],e._values[t]]})},e.prototype.forEach=function(t,e){null==e&&(e=this);for(var n=0,r=this._keys,i=this._values,o=r.length;n<o;n++)t.call(e,i[n],r[n],this)},e.prototype.get=function(t){var e=this._keys.indexOf(t);return this._values[e]},e.prototype.has=function(t){return this._keys.indexOf(t)>-1},e.prototype.keys=function(){return this._keys.en()},e.prototype.set=function(t,e){var n=this._keys.indexOf(t);n>-1?this._values[n]=e:(this._keys.push(t),this._values.push(e),this.size++)},e.prototype.values=function(){return this._values.en()},e}();t.Map3=e,t.Enumerable.prototype.toMap=function(t,n){for(var r=new e,i=this.getEnumerator();i.moveNext();)r.set(t(i.current),n(i.current));return r},t.List&&(t.List.prototype.toMap=t.Enumerable.prototype.toMap)}(r||(r={})),function(t){t.Map||(t.Map=r.Map3)}("undefined"==typeof window?e:window);var r;!function(t){function e(e){var n=new t.Enumerable;return n.getEnumerator=function(){var t={current:void 0,moveNext:function(){return e(t)}};return t},n}t.anonymous=e}(r||(r={}));var r;!function(t){function e(t,e){var n,r,i=1,o={current:void 0,moveNext:function(){if(i<2){if(n=n||t.getEnumerator(),n.moveNext())return o.current=n.current,!0;i++}return r=r||e.en().getEnumerator(),r.moveNext()?(o.current=r.current,!0):(o.current=void 0,!1)}};return o}t.Enumerable.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.append=t.Enumerable.prototype.append)}(r||(r={}));var r;!function(t){function e(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),!!n.moveNext()&&(e(i.current=n.current,r),r++,!0)}};return i}t.Enumerable.prototype.apply=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.List&&(t.List.prototype.apply=t.Enumerable.prototype.apply)}(r||(r={}));var r;!function(t){function e(t){var e=t.length,n={moveNext:void 0,current:void 0},r=-1;return n.moveNext=function(){return r++,r>=e?(n.current=void 0,!1):(n.current=t[r],!0)},n}function n(){return this&&Array.isArray(this)?new r(this):new t.Enumerable}var r=function(t){function n(n){var r=t.call(this)||this;return r.getEnumerator=function(){return e(n)},r.toArray=function(){return n.slice(0)},r}return i(n,t),n}(t.Enumerable);try{Object.defineProperty(Array.prototype,"en",{value:n,enumerable:!1,writable:!1,configurable:!1})}catch(t){Array.prototype.en=n}}(r||(r={}));var r;!function(t){function e(t,e){var n,r=!1,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),i.current=void 0,n.moveNext()?(i.current=n.current,!0):!r&&(r=!0,n=e.getEnumerator(),!!n.moveNext()&&(i.current=n.current,!0))}};return i}t.Enumerable.prototype.concat=function(n){var r=this,i=n instanceof Array?n.en():n,o=new t.Enumerable;return o.getEnumerator=function(){return e(r,i)},o},t.List&&(t.List.prototype.concat=t.Enumerable.prototype.concat)}(r||(r={}));var r;!function(t){function e(t,e){var n,r=[],i={current:void 0,moveNext:function(){if(n||(n=t.getEnumerator()),i.current=void 0,!e){for(;n.moveNext();)if(r.indexOf(n.current)<0)return r.push(i.current=n.current),!0;return!1}for(;n.moveNext();){for(var o=0,s=r.length,a=!1;o<s&&!a;o++)a=!!e(r[o],n.current);if(!a)return r.push(i.current=n.current),!0}return!1}};return i}t.Enumerable.prototype.distinct=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.List&&(t.List.prototype.distinct=t.Enumerable.prototype.distinct)}(r||(r={}));var r;!function(t){function e(t,e,n){n=n||function(t,e){return t===e};var r,i={current:void 0,moveNext:function(){for(r||(r=t.getEnumerator()),i.current=void 0;r.moveNext();){for(var o=!1,s=e.getEnumerator();s.moveNext()&&!o;)o=n(r.current,s.current);if(!o)return i.current=r.current,!0}return!1}};return i}t.Enumerable.prototype.except=function(n,r){var i=this,o=n instanceof Array?n.en():n,s=new t.Enumerable;return s.getEnumerator=function(){return e(i,o,r)},s},t.List&&(t.List.prototype.except=t.Enumerable.prototype.except)}(r||(r={})),Function.prototype.fromJson=function(t,e){function n(t,e){if(null==t)return t;if(e instanceof Function)return e(t);if(e instanceof Array){if(!((e=e[0])instanceof Function&&t instanceof Array))return;for(var n=[],r=0;r<t.length;r++)n.push(e(t[r]));return n}}var r=new this;if(null==t)return r;var i=[];for(var o in e){var s=n(t[o],e[o]);void 0!==s&&(r[o]=s,i.push(o))}for(var o in this.$jsonMappings)if(!(i.indexOf(o)>-1)){var s=n(t[o],this.$jsonMappings[o]);void 0!==s&&(r[o]=s,i.push(o))}for(var o in t)i.indexOf(o)>-1||(r[o]=t[o]);return r};var r;!function(t){function e(t,e,r){var i,o=0,s={current:void 0,moveNext:function(){return i||(i=n(t,e,r)),s.current=void 0,!(o>=i.length||(s.current=i[o],o++,0))}};return s}function n(t,e,n){n=n||function(t,e){return t===e};for(var i,o=[],s=[],a=t.getEnumerator();a.moveNext();){i=e(a.current);for(var u=-1,l=0,c=s.length;l<c;l++)if(n(i,s[l])){u=l;break}var h;u<0?(s.push(i),o.push(h=new r(i))):h=o[u],h._add(a.current)}return o}var r=function(t){function e(e){var n=t.call(this)||this;return n.key=e,n._arr=[],n.getEnumerator=function(){return n._arr.en().getEnumerator()},n}return i(e,t),e.prototype._add=function(t){this._arr.push(t)},e}(t.Enumerable);t.Enumerable.prototype.groupBy=function(n,r){var i=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(i,n,r)},o},t.List&&(t.List.prototype.groupBy=t.Enumerable.prototype.groupBy)}(r||(r={}));var r;!function(t){function e(e,n,r){r=r||function(t,e){return t===e};var i,o={current:void 0,moveNext:function(){for(i||(i=t.en(e).distinct().getEnumerator()),o.current=void 0;i.moveNext();){for(var s=!1,a=n.getEnumerator();a.moveNext()&&!s;)s=r(i.current,a.current);if(s)return o.current=i.current,!0}return!1}};return o}t.Enumerable.prototype.intersect=function(n,r){var i=this,o=n instanceof Array?n.en():n,s=new t.Enumerable;return s.getEnumerator=function(){return e(i,o,r)},s},t.List&&(t.List.prototype.intersect=t.Enumerable.prototype.intersect)}(r||(r={}));var r;!function(t){function e(e,n,r,i,o,s){s=s||function(t,e){return t===e};var a,u,l=0,c={current:void 0,moveNext:function(){if(c.current=void 0,!a){if(a=e.getEnumerator(),!a.moveNext())return!1;u=t.en(n).toArray()}var h;do{for(;l<u.length;l++)if(h=u[l],s(r(a.current),i(h)))return l++,c.current=o(a.current,h),!0;l=0}while(a.moveNext());return!1}};return c}t.Enumerable.prototype.join=function(n,r,i,o,s){var a=this,u=n instanceof Array?n.en():n,l=new t.Enumerable;return l.getEnumerator=function(){return e(a,u,r,i,o,s)},l},t.List&&(t.List.prototype.join=t.Enumerable.prototype.join)}(r||(r={}));var r;!function(t){function e(){this.constructor=n}t.Enumerable.prototype.toList=function(){for(var t=new n,e=this.getEnumerator();e.moveNext();)t.push(e.current);return t};var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toString=function(){throw new Error("Not implemented")},e.prototype.toLocaleString=function(){throw new Error("Not implemented")},e.prototype.pop=function(){throw new Error("Not implemented")},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},e.prototype.shift=function(){throw new Error("Not implemented")},e.prototype.slice=function(t,e){throw new Error("Not implemented")},e.prototype.sort=function(t){throw new Error("Not implemented")},e.prototype.splice=function(){throw new Error("Not implemented")},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw new Error("Not implemented")},e.prototype.indexOf=function(t,e){throw new Error("Not implemented")},e.prototype.lastIndexOf=function(t,e){throw new Error("Not implemented")},e.prototype.every=function(t,e){throw new Error("Not implemented")},e.prototype.some=function(t,e){throw new Error("Not implemented")},e.prototype.forEach=function(t,e){throw new Error("Not implemented")},e.prototype.map=function(t,e){throw new Error("Not implemented")},e.prototype.filter=function(t,e){throw new Error("Not implemented")},e.prototype.reduce=function(t,e){throw new Error("Not implemented")},e.prototype.reduceRight=function(t,e){throw new Error("Not implemented")},e.prototype.remove=function(t){throw new Error("Not implemented")},e.prototype.removeWhere=function(t){throw new Error("Not implemented")},e}(t.Enumerable);t.List=n;for(var r in Array)Array.hasOwnProperty(r)&&(n[r]=Array[r]);e.prototype=Array.prototype,n.prototype=new e;for(var o in t.Enumerable.prototype)"getEnumerator"!==o&&(n.prototype[o]=t.Enumerable.prototype[o]);n.prototype.getEnumerator=function(){var t=this,e=t.length,n={moveNext:void 0,current:void 0},r=-1;return n.moveNext=function(){return r++,r>=e?(n.current=void 0,!1):(n.current=t[r],!0)},n},n.prototype.remove=function(t){return this.removeWhere(function(e){return e===t}).any()},n.prototype.removeWhere=function(t){for(var e,n=[],r=this.length-1;r>=0;r--)e=this[r],!0===t(e,r)&&(this.splice(r,1),n.push(e));return n.en().reverse()}}(r||(r={}));var r;!function(t){function e(t,e,r,i){return new n(t,e,r,i)}var n=function(e){function n(t,n,r,i){var o=e.call(this)||this;o.Source=t,i=i||function(t,e){return t>e?1:t<e?-1:0};var s=!0===r?-1:1;return o.Sorter=function(t,e){return s*i(n(t),n(e))},o}return i(n,e),n.prototype.getEnumerator=function(){var e,n=this.Source,r=this.Sorter,i=0,o={current:void 0,moveNext:function(){return e||(e=t.en(n).toArray(),e.sort(r)),o.current=void 0,!(i>=e.length||(o.current=e[i],i++,0))}};return o},n.prototype.thenBy=function(t,e){return new r(this,t,!1,e)},n.prototype.thenByDescending=function(t,e){return new r(this,t,!0,e)},n}(t.Enumerable),r=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this,s=e.Sorter,a=o.Sorter;return o.Sorter=function(t,e){return s(t,e)||a(t,e)},o}return i(e,t),e}(n),o=t.Enumerable.prototype;o.orderBy=function(t,n){return e(this,t,!1,n)},o.orderByDescending=function(t,n){return e(this,t,!0,n)},t.List&&(t.List.prototype.orderBy=t.Enumerable.prototype.orderBy,t.List.prototype.orderByDescending=t.Enumerable.prototype.orderByDescending)}(r||(r={}));var r;!function(t){function e(t,e){var n,r,i=1,o={current:void 0,moveNext:function(){if(i<2){if(n=n||e.en().getEnumerator(),n.moveNext())return o.current=n.current,!0;i++}return r=r||t.getEnumerator(),r.moveNext()?(o.current=r.current,!0):(o.current=void 0,!1)}};return o}t.Enumerable.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.prepend=t.Enumerable.prototype.prepend)}(r||(r={}));var r;!function(t){function e(t,e,n){var r=t-n,i={current:void 0,moveNext:function(){return!((r+=n)>=e||(i.current=r,0))}};return i}function n(n,r,i){if(n=n||0,r=r||0,n>r)throw new Error("Start cannot be greater than end.");null==i&&(i=1);var o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r,i)},o}t.range=n}(r||(r={}));var r;!function(t){function e(e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.en(e).toArray(),r=n.length),r--,i.current=n[r],r>=0}};return i}t.Enumerable.prototype.reverse=function(){var n=this,r=new t.Enumerable;return r.getEnumerator=function(){return e(n)},r},t.List&&(t.List.prototype.reverse=t.Enumerable.prototype.reverse)}(r||(r={}));var r;!function(t){function e(t,e){if(0===(e=e||0))return Math.round(t);var n=Math.pow(10,e);return Math.round(t*n)/n}t.round=e}(r||(r={}));var r;!function(t){function e(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),!!n.moveNext()&&(i.current=e(n.current,r),r++,!0)}};return i}function n(e,n){var r,i,o={current:void 0,moveNext:function(){for(o.current=void 0,r||(r=e.getEnumerator());!i||!i.moveNext();){if(!r.moveNext())return!1;i=t.selectorEnumerator(n(r.current))}return o.current=i.current,!0}};return o}t.Enumerable.prototype.select=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.Enumerable.prototype.selectMany=function(e){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return n(r,e)},i},t.List&&(t.List.prototype.select=t.Enumerable.prototype.select,t.List.prototype.selectMany=t.Enumerable.prototype.selectMany)}(r||(r={}));var r;!function(t){function e(t){return Array.isArray(t)?t.en().getEnumerator():null!=t&&"function"==typeof t.getEnumerator?t.getEnumerator():null}t.selectorEnumerator=e}(r||(r={}));var r;!function(t){function e(t,e){var n,r={current:void 0,moveNext:function(){if(!n){n=t.getEnumerator();for(var i=0;i<e;i++)if(!n.moveNext())return!1}return n.moveNext()?(r.current=n.current,!0):(r.current=void 0,!1)}};return r}function n(t,e){var n,r={current:void 0,moveNext:function(){if(!n){n=t.getEnumerator();for(var i=0;n.moveNext();i++)if(!e(r.current=n.current,i))return!0;return r.current=void 0,!1}return n.moveNext()?(r.current=n.current,!0):(r.current=void 0,!1)}};return r}t.Enumerable.prototype.skip=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.Enumerable.prototype.skipWhile=function(e){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return n(r,e)},i},t.List&&(t.List.prototype.skip=t.Enumerable.prototype.skip,t.List.prototype.skipWhile=t.Enumerable.prototype.skipWhile)}(r||(r={}));var r;!function(t){function e(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),!(++r>e||(i.current=void 0,!n.moveNext()||(i.current=n.current,0)))}};return i}function n(t,e){var n,r=0,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),n.moveNext()&&e(n.current,r)?(r++,i.current=n.current,!0):(i.current=void 0,!1)}};return i}t.Enumerable.prototype.take=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.Enumerable.prototype.takeWhile=function(e){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return n(r,e)},i},t.List&&(t.List.prototype.take=t.Enumerable.prototype.take,t.List.prototype.takeWhile=t.Enumerable.prototype.takeWhile)}(r||(r={}));var r;!function(t){function e(e,n){var r,i=!1,o=[],s={current:void 0,moveNext:function(){if(i){if(null==r)return!1;o.push(r),r=t.selectorEnumerator(n(s.current))}else r=e.getEnumerator(),i=!0;for(;!(r&&r.moveNext()||o.length<1);)r=o.pop();return s.current=null==r?void 0:r.current,void 0!==s.current}};return s}function n(e,n,r){var i,o=!1,s=[],a={current:void 0,moveNext:function(){if(o){if(null==i)return!1;s.push(i),i=t.selectorEnumerator(n(a.current))}else i=e.getEnumerator(),o=!0;do{for(;!(i&&i.moveNext()||s.length<1);)i=s.pop();a.current=null==i?void 0:i.current}while(r(a.current));return void 0!==a.current}};return a}t.Enumerable.prototype.traverse=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.Enumerable.prototype.traverseUnique=function(e,r){var i=this,o=[],s=new t.Enumerable;return s.getEnumerator=r?function(){return n(i,e,function(t){return!!o.some(function(e){return r(t,e)})||(o.push(t),!1)})}:function(){return n(i,e,function(t){return o.indexOf(t)>-1||(o.push(t),!1)})},s},t.List&&(t.List.prototype.traverse=t.Enumerable.prototype.traverse,t.List.prototype.traverseUnique=t.Enumerable.prototype.traverseUnique)}(r||(r={}));var r;!function(t){function e(e,n,r){r=r||function(t,e){return t===e};var i,o,s=[],a={current:void 0,moveNext:function(){if(i||(i=t.en(e).distinct().getEnumerator()),a.current=void 0,!o&&i.moveNext())return s.push(a.current=i.current),!0;for(o=o||t.en(n).distinct().getEnumerator();o.moveNext();){for(var u=0,l=!1,c=s.length;u<c&&!l;u++)l=r(s[u],o.current);if(!l)return a.current=o.current,!0}return!1}};return a}t.Enumerable.prototype.union=function(n,r){var i=this,o=n instanceof Array?n.en():n,s=new t.Enumerable;return s.getEnumerator=function(){return e(i,o,r)},s},t.List&&(t.List.prototype.union=t.Enumerable.prototype.union)}(r||(r={}));var r;!function(t){function e(t,e){var n,r={current:void 0,moveNext:function(){n||(n=t.getEnumerator());for(var i;n.moveNext();)if(e(i=n.current))return r.current=i,!0;return!1}};return r}t.Enumerable.prototype.where=function(n){var r=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n)},i},t.List&&(t.List.prototype.where=t.Enumerable.prototype.where)}(r||(r={}));var r;!function(t){function e(e){var r=new t.Enumerable;return r.getEnumerator=function(){return n(e)},r}function n(t){var e=t.getEnumerator(),n={current:void 0,moveNext:void 0};return n.moveNext=function(){return e.moveNext()?(n.current=e.current,!0):(n.current=void 0,!1)},n}t.en=e}(r||(r={}));var r;r.en;!function(t){function e(t,e,n){var r,i,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),i||(i=e.getEnumerator()),o.current=void 0,!(!r.moveNext()||!i.moveNext()||(o.current=n(r.current,i.current),0))}};return o}t.Enumerable.prototype.zip=function(n,r){var i=this,o=n instanceof Array?n.en():n,s=new t.Enumerable;return s.getEnumerator=function(){return e(i,o,r)},s},t.List&&(t.List.prototype.zip=t.Enumerable.prototype.zip)}(r||(r={})),function(e){t.exports=e()}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return require(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(require,t,n){(function(t){var e;!function(t){t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}(e||(e={})),function(t){t.HTTPStatusCode||(t.HTTPStatusCode=e)}(t)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});var o;!function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(o||(o={}));var o;!function(t){var e=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.getLength=function(){return this.end-this.start},t}();t.Duration=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.bookmarking=function(){return new e(e.BOOKMARKING.toString())},e.prototype.classifying=function(){return new e(e.CLASSIFYING.toString())},e.prototype.commenting=function(){return new e(e.COMMENTING.toString())},e.prototype.describing=function(){return new e(e.DESCRIBING.toString())},e.prototype.editing=function(){return new e(e.EDITING.toString())},e.prototype.highlighting=function(){return new e(e.HIGHLIGHTING.toString())},e.prototype.identifying=function(){return new e(e.IDENTIFYING.toString())},e.prototype.linking=function(){return new e(e.LINKING.toString())},e.prototype.moderating=function(){return new e(e.MODERATING.toString())},e.prototype.painting=function(){return new e(e.PAINTING.toString())},e.prototype.questioning=function(){return new e(e.QUESTIONING.toString())},e.prototype.replying=function(){return new e(e.REPLYING.toString())},e.prototype.tagging=function(){return new e(e.TAGGING.toString())},e.prototype.transcribing=function(){return new e(e.TRANSCRIBING.toString())},e.BOOKMARKING=new e("oa:bookmarking"),e.CLASSIFYING=new e("oa:classifying"),e.COMMENTING=new e("oa:commenting"),e.DESCRIBING=new e("oa:describing"),e.EDITING=new e("oa:editing"),e.HIGHLIGHTING=new e("oa:highlighting"),e.IDENTIFYING=new e("oa:identifying"),e.LINKING=new e("oa:linking"),e.MODERATING=new e("oa:moderating"),e.PAINTING=new e("sc:painting"),e.QUESTIONING=new e("oa:questioning"),e.REPLYING=new e("oa:replying"),e.TAGGING=new e("oa:tagging"),e.TRANSCRIBING=new e("oad:transcribing"),e}(t.StringValue);t.AnnotationMotivation=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.autoadvance=function(){return new e(e.AUTOADVANCE.toString())},e.prototype.nonav=function(){return new e(e.NONAV.toString())},e.AUTOADVANCE=new e("auto-advance"),e.NONAV=new e("no-nav"),e}(t.StringValue);t.Behavior=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.annotation=function(){return new e(e.ANNOTATION.toString())},e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.prototype.sequence=function(){return new e(e.SEQUENCE.toString())},e.ANNOTATION=new e("annotation"),e.CANVAS=new e("canvas"),e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e.SEQUENCE=new e("sequence"),e}(t.StringValue);t.IIIFResourceType=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.manuscript=function(){return new e(e.MANUSCRIPT.toString())},e.prototype.monograph=function(){return new e(e.MONOGRAPH.toString())},e.EMPTY=new e(""),e.MANUSCRIPT=new e("manuscript"),e.MONOGRAPH=new e("monograph"),e}(t.StringValue);t.ManifestType=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.doc=function(){return new e(e.DOC.toString())},e.prototype.docx=function(){return new e(e.DOCX.toString())},e.PDF=new e("application/pdf"),e.DOC=new e("application/msword"),e.DOCX=new e("application/vnd.openxmlformats-officedocument.wordprocessingml.document"),e}(t.StringValue);t.RenderingFormat=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.jpg=function(){return new e(e.JPG.toString())},e.prototype.mp4=function(){return new e(e.MP4.toString())},e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.threejs=function(){return new e(e.THREEJS.toString())},e.prototype.webm=function(){return new e(e.WEBM.toString())},e.JPG=new e("image/jpeg"),e.MP4=new e("video/mp4"),e.PDF=new e("application/pdf"),e.THREEJS=new e("application/vnd.threejs+json"),e.WEBM=new e("video/webm"),e}(t.StringValue);t.MediaType=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.choice=function(){return new e(e.CHOICE.toString())},e.prototype.document=function(){return new e(e.DOCUMENT.toString())},e.prototype.image=function(){return new e(e.IMAGE.toString())},e.prototype.movingimage=function(){return new e(e.MOVINGIMAGE.toString())},e.prototype.physicalobject=function(){return new e(e.PHYSICALOBJECT.toString())},e.prototype.sound=function(){return new e(e.SOUND.toString())},e.prototype.text=function(){return new e(e.TEXT.toString())},e.CANVAS=new e("canvas"),e.CHOICE=new e("choice"),e.DOCUMENT=new e("document"),e.IMAGE=new e("image"),e.MOVINGIMAGE=new e("movingimage"),e.PHYSICALOBJECT=new e("physicalobject"),e.SOUND=new e("sound"),e.TEXT=new e("textualbody"),e}(t.StringValue);t.ResourceType=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.auth1Clickthrough=function(){return new e(e.AUTH1CLICKTHROUGH.toString())},e.prototype.auth1External=function(){return new e(e.AUTH1EXTERNAL.toString())},e.prototype.auth1Kiosk=function(){return new e(e.AUTH1KIOSK.toString())},e.prototype.auth1Login=function(){return new e(e.AUTH1LOGIN.toString())},e.prototype.auth1Logout=function(){return new e(e.AUTH1LOGOUT.toString())},e.prototype.auth1Token=function(){return new e(e.AUTH1TOKEN.toString())},e.prototype.autoComplete=function(){return new e(e.AUTOCOMPLETE.toString())},e.prototype.iiif1ImageLevel1=function(){return new e(e.IIIF1IMAGELEVEL1.toString())},e.prototype.iiif1ImageLevel2=function(){return new e(e.IIIF1IMAGELEVEL2.toString())},e.prototype.iiif2ImageLevel1=function(){return new e(e.IIIF2IMAGELEVEL1.toString())},e.prototype.iiif2ImageLevel2=function(){return new e(e.IIIF2IMAGELEVEL2.toString())},e.prototype.ixif=function(){return new e(e.IXIF.toString())},e.prototype.login=function(){return new e(e.AUTHLOGIN.toString())},e.prototype.clickThrough=function(){return new e(e.AUTHCLICKTHROUGH.toString())},e.prototype.restricted=function(){return new e(e.AUTHRESTRICTED.toString())},e.prototype.logout=function(){return new e(e.AUTHLOGOUT.toString())},e.prototype.otherManifestations=function(){return new e(e.OTHERMANIFESTATIONS.toString())},e.prototype.search=function(){return new e(e.SEARCH.toString())},e.prototype.stanfordIIIFImageCompliance1=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIFImageCompliance2=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIFImageConformance1=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIFImageConformance2=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE2.toString())},e.prototype.stanfordIIIF1ImageCompliance1=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIF1ImageCompliance2=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIF1ImageConformance1=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIF1ImageConformance2=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE2.toString())},e.prototype.token=function(){return new e(e.AUTHTOKEN.toString())},e.prototype.trackingExtensions=function(){return new e(e.TRACKINGEXTENSIONS.toString())},e.prototype.uiExtensions=function(){return new e(e.UIEXTENSIONS.toString())},e.prototype.printExtensions=function(){return new e(e.PRINTEXTENSIONS.toString())},e.prototype.shareExtensions=function(){return new e(e.SHAREEXTENSIONS.toString())},e.STANFORDIIIFIMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level0"),e.STANFORDIIIFIMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level1"),e.STANFORDIIIFIMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level2"),e.STANFORDIIIFIMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level0"),e.STANFORDIIIFIMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level1"),e.STANFORDIIIFIMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level2"),e.STANFORDIIIF1IMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0"),e.STANFORDIIIF1IMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1"),e.STANFORDIIIF1IMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2"),e.STANFORDIIIF1IMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0"),e.STANFORDIIIF1IMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1"),e.STANFORDIIIF1IMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2"),e.IIIF1IMAGELEVEL0=new e("http://iiif.io/api/image/1/level0.json"),e.IIIF1IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/1/profiles/level0.json"),e.IIIF1IMAGELEVEL1=new e("http://iiif.io/api/image/1/level1.json"),e.IIIF1IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/1/profiles/level1.json"),e.IIIF1IMAGELEVEL2=new e("http://iiif.io/api/image/1/level2.json"),e.IIIF1IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/1/profiles/level2.json"),e.IIIF2IMAGELEVEL0=new e("http://iiif.io/api/image/2/level0.json"),e.IIIF2IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/2/profiles/level0.json"),e.IIIF2IMAGELEVEL1=new e("http://iiif.io/api/image/2/level1.json"),e.IIIF2IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/2/profiles/level1.json"),e.IIIF2IMAGELEVEL2=new e("http://iiif.io/api/image/2/level2.json"),e.IIIF2IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/2/profiles/level2.json"),e.AUTHCLICKTHROUGH=new e("http://iiif.io/api/auth/0/login/clickthrough"),e.AUTHLOGIN=new e("http://iiif.io/api/auth/0/login"),e.AUTHLOGOUT=new e("http://iiif.io/api/auth/0/logout"),e.AUTHRESTRICTED=new e("http://iiif.io/api/auth/0/login/restricted"),e.AUTHTOKEN=new e("http://iiif.io/api/auth/0/token"),e.AUTH1CLICKTHROUGH=new e("http://iiif.io/api/auth/1/clickthrough"),e.AUTH1EXTERNAL=new e("http://iiif.io/api/auth/1/external"),e.AUTH1KIOSK=new e("http://iiif.io/api/auth/1/kiosk"),e.AUTH1LOGIN=new e("http://iiif.io/api/auth/1/login"),e.AUTH1LOGOUT=new e("http://iiif.io/api/auth/1/logout"),e.AUTH1TOKEN=new e("http://iiif.io/api/auth/1/token"),e.AUTOCOMPLETE=new e("http://iiif.io/api/search/0/autocomplete"),e.SEARCH=new e("http://iiif.io/api/search/0/search"),e.TRACKINGEXTENSIONS=new e("http://universalviewer.io/tracking-extensions-profile"),e.UIEXTENSIONS=new e("http://universalviewer.io/ui-extensions-profile"),e.PRINTEXTENSIONS=new e("http://universalviewer.io/print-extensions-profile"),e.SHAREEXTENSIONS=new e("http://universalviewer.io/share-extensions-profile"),e.OTHERMANIFESTATIONS=new e("http://iiif.io/api/otherManifestations.json"),e.IXIF=new e("http://wellcomelibrary.org/ld/ixif/0/alpha.json"),e}(t.StringValue);t.ServiceProfile=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.leftToRight=function(){return new e(e.LEFTTORIGHT.toString())},e.prototype.rightToLeft=function(){return new e(e.RIGHTTOLEFT.toString())},e.prototype.topToBottom=function(){return new e(e.TOPTOBOTTOM.toString())},e.prototype.bottomToTop=function(){return new e(e.BOTTOMTOTOP.toString())},e.LEFTTORIGHT=new e("left-to-right"),e.RIGHTTOLEFT=new e("right-to-left"),e.TOPTOBOTTOM=new e("top-to-bottom"),e.BOTTOMTOTOP=new e("bottom-to-top"),e}(t.StringValue);t.ViewingDirection=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.continuous=function(){return new e(e.CONTINUOUS.toString())},e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.individuals=function(){return new e(e.INDIVIDUALS.toString())},e.prototype.nonPaged=function(){return new e(e.NONPAGED.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.prototype.top=function(){return new e(e.TOP.toString())},e.CONTINUOUS=new e("continuous"),e.EMPTY=new e(""),e.INDIVIDUALS=new e("individuals"),e.NONPAGED=new e("non-paged"),e.PAGED=new e("paged"),e.TOP=new e("top"),e}(t.StringValue);t.ViewingHint=e}(o||(o={}));var o;!function(t){var e=function(){function t(t){this.__jsonld=t,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return t.prototype.getProperty=function(t){var e=null;return this.__jsonld&&((e=this.__jsonld[t])||(e=this.__jsonld["@"+t])),e},t}();t.JSONLDResource=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t)||this;return r.options=n,r}return i(n,e),n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLabel=function(){return t.TranslationCollection.parse(this.getProperty("label"),this.options.locale)},n.prototype.getMetadata=function(){var e=this.getProperty("metadata"),n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=e[r],o=new t.MetadataItem(this.options.locale);o.parse(i),n.push(o)}return n},n.prototype.getRendering=function(t){var e=this.getRenderings();"string"!=typeof t&&(t=t.toString());for(var n=0;n<e.length;n++){var r=e[n];if(r.getFormat().toString()===t)return r}return null},n.prototype.getRenderings=function(){var e;e=this.__jsonld?this.__jsonld.rendering:this.rendering;var n=[];if(!e)return n;Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var i=e[r];n.push(new t.Rendering(i,this.options))}return n},n.prototype.getService=function(e){return t.Utils.getService(this,e)},n.prototype.getServices=function(){return t.Utils.getServices(this)},n.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new t.Thumbnail(e,this.options):null},n.prototype.isAnnotation=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.ANNOTATION.toString()},n.prototype.isCanvas=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.CANVAS.toString()},n.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},n.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},n.prototype.isRange=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.RANGE.toString()},n.prototype.isSequence=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.SEQUENCE.toString()},n}(t.JSONLDResource);t.ManifestResource=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(e.toLowerCase()):null},n.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var n=0;n<this.__jsonld.resources.length;n++){var r=this.__jsonld.resources[n],i=new t.Annotation(r,this.options);e.push(i)}return e},n.prototype.getType=function(){var e=this.getProperty("type");return e?new t.ResourceType(t.Utils.normaliseType(e)):null},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},n.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},n}(t.ManifestResource);t.Resource=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getCanonicalImageUri=function(e){var n,r=null,i="default",o=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])r=this.externalResource.data["@id"],o||(o=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(i="native");else{var s=this.getImages();if(s&&s.length){var a=s[0],u=a.getResource(),l=u.getServices();if(o||(o=u.getWidth()),l.length){var c=l[0];r=c.id,i=t.Utils.getImageQuality(c.getProfile())}else if(o===u.getWidth())return u.id}if(!r){var h=this.getProperty("thumbnail");if(h){if("string"==typeof h)return h;if(h["@id"])return h["@id"];if(h.length)return h[0].id}}}return n=o+",",r&&r.endsWith("/")&&(r=r.substr(0,r.length-1)),[r,"full",n,0,i+".jpg"].join("/")},n.prototype.getMaxDimensions=function(){var e,n=null;return this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.en().where(function(t){return t.maxWidth}).first())&&(n=new t.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),n},n.prototype.getContent=function(){var e=[],n=this.__jsonld.items||this.__jsonld.content;if(!n)return e;var r=null;if(n.length&&(r=new t.AnnotationPage(n[0],this.options)),!r)return e;for(var i=r.getItems(),o=0;o<i.length;o++){var s=i[o],a=new t.Annotation(s,this.options);e.push(a)}return e},n.prototype.getDuration=function(){return this.getProperty("duration")},n.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var n=0;n<this.__jsonld.images.length;n++){var r=this.__jsonld.images[n],i=new t.Annotation(r,this.options);e.push(i)}return e},n.prototype.getIndex=function(){return this.getProperty("index")},n.prototype.getOtherContent=function(){var e=this,n=Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")],r=function(t,e){return"string"==typeof t&&"string"==typeof e&&t.toLowerCase()===t.toLowerCase()},i=n.filter(function(t){return t&&r(t["@type"],"sc:AnnotationList")}).map(function(n,r){return new t.AnnotationList(n.label||"Annotation list "+r,n,e.options)}).map(function(t){return t.load()});return Promise.all(i)},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n}(t.Resource);t.Canvas=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.index=-1,r.isLoaded=!1;var i={defaultLabel:"-",locale:"en-GB",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(i,n),r}return i(n,e),n.prototype.getAttribution=function(){var e=this.getProperty("attribution");return e?t.TranslationCollection.parse(e,this.options.locale):[]},n.prototype.getDescription=function(){var e=this.getProperty("description");return e?t.TranslationCollection.parse(e,this.options.locale):[]},n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLogo=function(){var t=this.getProperty("logo");return t?"string"==typeof t?t:t["@id"]:null},n.prototype.getLicense=function(){return t.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},n.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},n.prototype.getRelated=function(){return this.getProperty("related")},n.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},n.prototype.getLabel=function(){var e=this.getProperty("label");return e?t.TranslationCollection.parse(e,this.options.locale):[]},n.prototype.getDefaultLabel=function(){return t.TranslationCollection.getValue(this.getLabel())},n.prototype.getDefaultTree=function(){return this.defaultTree=new t.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},n.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},n.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},n.prototype.load=function(){var e=this;return new Promise(function(n,r){if(e.isLoaded)n(e);else{var i=e.options;i.navDate=e.getNavDate();var o=e.__jsonld.id;o||(o=e.__jsonld["@id"]),t.Utils.loadResource(o).then(function(r){e.parentLabel=t.TranslationCollection.getValue(e.getLabel(),i.locale);var o=t.Deserialiser.parse(r,i);e=Object.assign(e,o),e.index=i.index,n(e)})}})},n}(t.ManifestResource);t.IIIFResource=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(var i=r._getTopRanges(),o=0;o<i.length;o++){var s=i[o];r._parseRanges(s,String(o))}return r}return i(n,e),n.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new t.Canvas(e,this.options)),e},n.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},n.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),!this.isLoaded)return this.defaultTree;var n=this.getTopRanges();return n.length&&n[0].getTree(this.defaultTree),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},n.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var n=0;n<this.__jsonld.structures.length;n++){var r=this.__jsonld.structures[n];r.viewingHint===t.ViewingHint.TOP.toString()&&e.push(r)}if(!e.length){var i={};i.ranges=this.__jsonld.structures,e.push(i)}}return e},n.prototype.getTopRanges=function(){return this._topRanges},n.prototype._getRangeById=function(t){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var e=0;e<this.__jsonld.structures.length;e++){var n=this.__jsonld.structures[e];if(n["@id"]===t||n.id===t)return n}return null},n.prototype._parseRanges=function(e,n,r){var i,o=null;if("string"==typeof e&&(o=e,e=this._getRangeById(o)),e){i=new t.Range(e,this.options),i.parentRange=r,i.path=n,r?r.items.push(i):this._topRanges.push(i);var s=e.items||e.members;if(s)for(var a=0;a<s.length;a++){var u=s[a];if(u["@type"]&&"sc:range"===u["@type"].toLowerCase()||u.type&&"range"===u.type.toLowerCase())this._parseRanges(u,n+"/"+a,i);else if(u["@type"]&&"sc:canvas"===u["@type"].toLowerCase()||u.type&&"canvas"===u.type.toLowerCase()){i.canvases||(i.canvases=[]);var l=u.id||u["@id"];i.canvases.push(l)}}else if(e.ranges)for(var a=0;a<e.ranges.length;a++)this._parseRanges(e.ranges[a],n+"/"+a,i)}},n.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var t=this.getTopRanges(),e=0;e<t.length;e++){var n=t[e];n.id&&this._allRanges.push(n);var r=n.getRanges();this._allRanges=this._allRanges.concat(r.en().traverseUnique(function(t){return t.getRanges()}).toArray())}return this._allRanges},n.prototype.getRangeById=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return null},n.prototype.getRangeByPath=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.path===t)return r}return null},n.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var n=0;n<e.length;n++){var r=e[n],i=new t.Sequence(r,this.options);this.items.push(i)}else if(this.__jsonld.items){var i=new t.Sequence(this.__jsonld.items,this.options);this.items.push(i)}return this.items},n.prototype.getSequenceByIndex=function(t){return this.getSequences()[t]},n.prototype.getTotalSequences=function(){return this.getSequences().length},n.prototype.getManifestType=function(){var e=this.getService(t.ServiceProfile.UIEXTENSIONS);return e?new t.ManifestType(e.getProperty("manifestType")):new t.ManifestType("")},n.prototype.getTrackingLabel=function(){var e=this.getService(t.ServiceProfile.TRACKINGEXTENSIONS);return e?e.getProperty("trackingLabel"):""},n.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},n.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e.toString()===t.ViewingHint.PAGED.toString()},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n}(t.IIIFResource);t.Manifest=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._collections=null,r._manifests=null,t.__collection=r,r}return i(n,e),n.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.en().where(function(t){return t.isCollection()}).toArray()},n.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.en().where(function(t){return t.isManifest()}).toArray()},n.prototype.getCollectionByIndex=function(t){var e=this.getCollections();if(!e[t])throw new Error("Collection index is outside range of array");var n=e[t];return n.options.index=t,n.load()},n.prototype.getManifestByIndex=function(t){var e=this.getManifests();if(!e[t])throw new Error("Manifest index is outside range of array");var n=e[t];return n.options.index=t,n.load()},n.prototype.getTotalCollections=function(){return this.getCollections().length},n.prototype.getTotalManifests=function(){return this.getManifests().length},n.prototype.getTotalItems=function(){return this.items.length},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):t.ViewingDirection.LEFTTORIGHT},n.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),this._parseManifests(this),this._parseCollections(this),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},n.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var n=0;n<e.getManifests().length;n++){var r=e.getManifests()[n],i=r.getDefaultTree();i.label=r.parentLabel||t.TranslationCollection.getValue(r.getLabel(),this.options.locale)||"manifest "+(n+1),i.navDate=r.getNavDate(),i.data.id=r.id,i.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),e.defaultTree.addNode(i)}},n.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var n=0;n<e.getCollections().length;n++){var r=e.getCollections()[n],i=r.getDefaultTree();i.label=r.parentLabel||t.TranslationCollection.getValue(r.getLabel(),this.options.locale)||"collection "+(n+1),i.navDate=r.getNavDate(),i.data.id=r.id,i.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),e.defaultTree.addNode(i),this._parseCollections(r)}},n}(t.IIIFResource);t.Collection=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return i(n,e),n.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},n.prototype.getDuration=function(){var e,n;if(this.canvases&&this.canvases.length)for(var r=0;r<this.canvases.length;r++){var i=this.canvases[r],o=t.Utils.getTemporalComponent(i);o&&o.length>1&&(0===r&&(e=Number(o[0])),r===this.canvases.length-1&&(n=Number(o[1])))}else for(var s=this.getRanges(),r=0;r<s.length;r++){var a=s[r],u=a.getDuration();u&&(0===r&&(e=u.start),r===s.length-1&&(n=u.end))}if(void 0!==e&&void 0!==n)return new t.Duration(e,n)},n.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.en().where(function(t){return t.isRange()}).toArray()},n.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n.prototype.getTree=function(e){e.data=this,this.treeNode=e;var n=this.getRanges();if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r],o=new t.TreeNode;e.addNode(o),this._parseTreeNode(o,i)}return t.Utils.generateTreeNodeIds(e),e},n.prototype.spansTime=function(t){var e=this.getDuration();return!!(e&&t>=e.start&&t<=e.end)},n.prototype._parseTreeNode=function(e,n){e.label=t.TranslationCollection.getValue(n.getLabel(),this.options.locale),e.data=n,e.data.type=t.Utils.normaliseType(t.TreeNodeType.RANGE.toString()),n.treeNode=e;var r=n.getRanges();if(r&&r.length)for(var i=0;i<r.length;i++){var o=r[i],s=o.getBehavior();if(!s||s.toString()!==t.Behavior.NONAV.toString()){var a=new t.TreeNode;e.addNode(a),this._parseTreeNode(a,o)}}},n}(t.ManifestResource);t.Range=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getFormat=function(){return new t.RenderingFormat(this.getProperty("format"))},n}(t.ManifestResource);t.Rendering=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._thumbnails=null,r}return i(n,e),n.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var n=0;n<e.length;n++){var r=e[n],i=new t.Canvas(r,this.options);i.index=n,this.items.push(i)}else if(this.__jsonld)for(var n=0;n<this.__jsonld.length;n++){var r=this.__jsonld[n],i=new t.Canvas(r,this.options);i.index=n,this.items.push(i)}return this.items},n.prototype.getCanvasById=function(e){for(var n=0;n<this.getTotalCanvases();n++){var r=this.getCanvasByIndex(n),i=t.Utils.normaliseUrl(r.id);if(t.Utils.normaliseUrl(e)===i)return r}return null},n.prototype.getCanvasByIndex=function(t){return this.getCanvases()[t]},n.prototype.getCanvasIndexById=function(t){for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return null},n.prototype.getCanvasIndexByLabel=function(e,n){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),n&&(e+="r"));for(var r,i,o,s,a,u=/(\d*)\D+(\d*)/,l=0;l<this.getTotalCanvases();l++){var c=this.getCanvasByIndex(l);if(t.TranslationCollection.getValue(c.getLabel(),this.options.locale)===e)return l;if((r=u.exec(e))&&(s=r[1],(a=r[2])&&(o="^"+s+"\\D+"+a+"$",i=new RegExp(o),i.test(c.getLabel().toString()))))return l}return-1},n.prototype.getLastCanvasLabel=function(e){for(var n=this.getTotalCanvases()-1;n>=0;n--){var r=this.getCanvasByIndex(n),i=t.TranslationCollection.getValue(r.getLabel(),this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(i))return i}else if(i)return i}return this.options.defaultLabel},n.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},n.prototype.getNextPageIndex=function(e,n){var r;if(n){var i=this.getPagedIndices(e),o=this.getViewingDirection();r=o&&o.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?i[0]+1:i[i.length-1]+1}else r=e+1;return r>this.getLastPageIndex()?-1:r},n.prototype.getPagedIndices=function(e,n){var r=[];if(n){r=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var i=this.getViewingDirection();i&&i.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()&&(r=r.reverse())}else r.push(e);return r},n.prototype.getPrevPageIndex=function(e,n){var r;if(n){var i=this.getPagedIndices(e),o=this.getViewingDirection();r=o&&o.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?i[i.length-1]-1:i[0]-1}else r=e-1;return r},n.prototype.getStartCanvasIndex=function(){var t=this.getStartCanvas();if(t)for(var e=0;e<this.getTotalCanvases();e++){var n=this.getCanvasByIndex(e);if(n.id===t)return e}return 0},n.prototype.getThumbs=function(e,n){for(var r=[],i=this.getTotalCanvases(),o=0;o<i;o++){var s=this.getCanvasByIndex(o),a=new t.Thumb(e,s);r.push(a)}return r},n.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var t=this.getCanvases(),e=0;e<t.length;e++){var n=t[e].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},n.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},n.prototype.getTotalCanvases=function(){return this.getCanvases().length},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n.prototype.isCanvasIndexOutOfRange=function(t){return t>this.getTotalCanvases()-1},n.prototype.isFirstCanvas=function(t){return 0===t},n.prototype.isLastCanvas=function(t){return t===this.getTotalCanvases()-1},n.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},n.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e.toString()===t.ViewingHint.PAGED.toString()},n.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},n}(t.ManifestResource);t.Sequence=e}(o||(o={}));var o;!function(t){var e=function(){function e(){}return e.parse=function(t,e){return"string"==typeof t&&(t=JSON.parse(t)),this.parseJson(t,e)},e.parseJson=function(t,e){var n;if(e&&e.navDate&&!isNaN(e.navDate.getTime())&&(t.navDate=e.navDate.toString()),t["@type"])switch(t["@type"]){case"sc:Collection":n=this.parseCollection(t,e);break;case"sc:Manifest":n=this.parseManifest(t,e);break;default:return null}else switch(t.type){case"Collection":n=this.parseCollection(t,e);break;case"Manifest":n=this.parseManifest(t,e);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,n){var r=new t.Collection(e,n);return r.index=n?n.index||0:0,this.parseCollections(r,n),this.parseManifests(r,n),this.parseItems(r,n),r},e.parseCollections=function(t,e){var n;if(t.__jsonld.collections?n=t.__jsonld.collections:t.__jsonld.items&&(n=t.__jsonld.items.en().where(function(t){return"collection"===t.type.toLowerCase()}).toArray()),n)for(var r=0;r<n.length;r++){e&&(e.index=r);var i=this.parseCollection(n[r],e);i.index=r,i.parentCollection=t,t.items.push(i)}},e.parseManifest=function(e,n){return new t.Manifest(e,n)},e.parseManifests=function(t,e){var n;if(t.__jsonld.manifests?n=t.__jsonld.manifests:t.__jsonld.items&&(n=t.__jsonld.items.en().where(function(t){return"manifest"===t.type.toLowerCase()}).toArray()),n)for(var r=0;r<n.length;r++){var i=this.parseManifest(n[r],e);i.index=r,i.parentCollection=t,t.items.push(i)}},e.parseItem=function(t,e){if(t["@type"]){if("sc:manifest"===t["@type"].toLowerCase())return this.parseManifest(t,e);if("sc:collection"===t["@type"].toLowerCase())return this.parseCollection(t,e)}else if(t.type){if("manifest"===t.type.toLowerCase())return this.parseManifest(t,e);if("collection"===t.type.toLowerCase())return this.parseCollection(t,e)}return null},e.parseItems=function(t,e){var n=t.__jsonld.members||t.__jsonld.items;if(n)for(var r=this,i=0;i<n.length;i++){var o=function(i){e&&(e.index=i);var o=r.parseItem(n[i],e);return o?t.items.en().where(function(t){return t.id===o.id}).first()?"continue":(o.index=i,o.parentCollection=t,void t.items.push(o)):{value:void 0}}(i);if("object"==typeof o)return o.value}},e}();t.Deserialiser=e;var n=function(){function t(){}return t.serialise=function(t){return""},t}();t.Serialiser=n}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?new t.ServiceProfile(e[0]):new t.ServiceProfile(e)},n.prototype.getConfirmLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},n.prototype.getDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},n.prototype.getFailureDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},n.prototype.getFailureHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},n.prototype.getHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},n.prototype.getServiceLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},n.prototype.getInfoUri=function(){var t=this.id;return t.endsWith("/")||(t+="/"),t+="info.json"},n}(t.ManifestResource);t.Service=e}(o||(o={}));var o;!function(t){var e=function(){function e(e,n){this.data=n,this.index=n.index,this.width=e;var r=n.getHeight()/n.getWidth();this.height=r?Math.floor(this.width*r):e,this.uri=n.getCanonicalImageUri(e),this.label=t.TranslationCollection.getValue(n.getLabel())}return e}();t.Thumb=e}(o||(o={}));var o;!function(t){var e=function(){function e(t,e){this.label=t,this.data=e||{},this.nodes=[]}return e.prototype.addNode=function(t){this.nodes.push(t),t.parentNode=this},e.prototype.isCollection=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString())},e.prototype.isManifest=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString())},e.prototype.isRange=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.RANGE.toString())},e}();t.TreeNode=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e}(t.StringValue);t.TreeNodeType=e}(o||(o={}));var o,s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},u=n(65),l=n(154),c=n(41);!function(t){var e=function(){function e(){}return e.getMediaType=function(t){return t=t.toLowerCase(),t=t.split(";")[0],t.trim()},e.getImageQuality=function(e){var n=e.toString();return n===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL1.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL2.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()?"native":"default"},e.getInexactLocale=function(t){return-1!==t.indexOf("-")?t.substr(0,t.indexOf("-")):t},e.getLocalisedValue=function(t,e){if(!Array.isArray(t))return t;for(var n=0;n<t.length;n++){var r=t[n];if(e===r["@language"])return r["@value"]}for(var i=e.substr(0,e.indexOf("-")),n=0;n<t.length;n++){var o=t[n];if(o["@language"]===i)return o["@value"]}return null},e.generateTreeNodeIds=function(t,n){void 0===n&&(n=0);var r;r=t.parentNode?t.parentNode.id+"-"+n:"0",t.id=r;for(var i=0;i<t.nodes.length;i++){var o=t.nodes[i];e.generateTreeNodeIds(o,i)}},e.normaliseType=function(t){if(t=t.toLowerCase(),-1!==t.indexOf(":")){return t.split(":")[1]}return t},e.normaliseUrl=function(t){return t=t.substr(t.indexOf("://")),-1!==t.indexOf("#")&&(t=t.split("#")[0]),t},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(n){return!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.isLevel0ImageProfile=function(n){return!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString()))},e.isLevel1ImageProfile=function(n){return!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString()))},e.isLevel2ImageProfile=function(n){return!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.loadResource=function(t){return new Promise(function(e,n){var r,i=c.parse(t),o={host:i.hostname,port:i.port,path:i.path,method:"GET",withCredentials:!1};switch(i.protocol){case"https:":r=l.request(o,function(t){var n="";t.on("data",function(t){n+=t}),t.on("end",function(){e(n)})}),r.on("error",function(t){n(t)}),r.end();break;case"dat:":var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&e(s.response)},s.open("GET",t,!0),s.send();break;default:r=u.request(o,function(t){var n="";t.on("data",function(t){n+=t}),t.on("end",function(){e(n)})}),r.on("error",function(t){n(t)}),r.end()}})},e.loadExternalResourcesAuth1=function(t,n,r,i,o,s,a,u){return new Promise(function(l,c){var h=t.map(function(t){return e.loadExternalResourceAuth1(t,n,r,i,o,s,a,u)});Promise.all(h).then(function(){l(t)}).catch(function(t){c(t)})})},e.loadExternalResourceAuth1=function(t,n,r,i,o,u,l,c){return s(this,void 0,void 0,function(){var s;return a(this,function(a){switch(a.label){case 0:return[4,i(t)];case 1:return s=a.sent(),s?[4,t.getData(s)]:[3,6];case 2:return a.sent(),t.status!==HTTPStatusCode.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,r,o,u,l,c)];case 4:a.sent(),a.label=5;case 5:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return a.sent(),t.status!==HTTPStatusCode.MOVED_TEMPORARILY&&t.status!==HTTPStatusCode.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,r,o,u,l,c)];case 8:a.sent(),a.label=9;case 9:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}})})},e.doAuthChain=function(t,n,r,i,o,u,l){return s(this,void 0,void 0,function(){var s,c,h,p,f,d,g,m,m;return a(this,function(a){switch(a.label){case 0:return t.isAccessControlled()?(s=t.externalService,s&&(s.options=t.options),c=t.kioskService,c&&(c.options=t.options),h=t.clickThroughService,h&&(h.options=t.options),p=t.loginService,p&&(p.options=t.options),t.isResponseHandled||t.status!==HTTPStatusCode.MOVED_TEMPORARILY?[3,2]:[4,u(t)]):[2,t];case 1:return a.sent(),[2,t];case 2:return f=null,(d=null,f=s)?(d=f,[4,e.attemptResourceWithToken(t,r,f)]):[3,4];case 3:return a.sent(),[2,t];case 4:return(f=c)?(d=f,g=n(f),g?[4,i(g)]:[3,7]):[3,7];case 5:return a.sent(),[4,e.attemptResourceWithToken(t,r,f)];case 6:return a.sent(),[2,t];case 7:return(f=h)?(d=f,[4,o(t,f)]):[3,11];case 8:return m=a.sent(),m?[4,i(m)]:[3,11];case 9:return a.sent(),[4,e.attemptResourceWithToken(t,r,f)];case 10:return a.sent(),[2,t];case 11:return(f=p)?(d=f,[4,o(t,f)]):[3,15];case 12:return m=a.sent(),m?[4,i(m)]:[3,15];case 13:return a.sent(),[4,e.attemptResourceWithToken(t,r,f)];case 14:return a.sent(),[2,t];case 15:return d&&l(t,d),[2]}})})},e.attemptResourceWithToken=function(e,n,r){return s(this,void 0,void 0,function(){var i,o;return a(this,function(s){switch(s.label){case 0:return i=r.getService(t.ServiceProfile.AUTH1TOKEN.toString()),i?[4,n(e,i)]:[3,3];case 1:return o=s.sent(),o&&o.accessToken?[4,e.getData(o)]:[3,3];case 2:return s.sent(),[2,e];case 3:return[2]}})})},e.loadExternalResourcesAuth09=function(t,n,r,i,o,s,a,u,l,c){return new Promise(function(h,p){var f=t.map(function(t){return e.loadExternalResourceAuth09(t,n,r,i,o,s,a,u,l,c)});Promise.all(f).then(function(){h(t)}).catch(function(t){p(t)})})},e.loadExternalResourceAuth09=function(t,n,r,i,o,s,a,u,l,c){return new Promise(function(h,p){c&&c.pessimisticAccessControl?t.getData().then(function(){t.isAccessControlled()?t.clickThroughService?(h(r(t)),h(i(t))):o(t).then(function(){s(t,!0).then(function(n){t.getData(n).then(function(){h(l(t))}).catch(function(t){p(e.createInternalServerError(t))})}).catch(function(t){p(e.createInternalServerError(t))})}).catch(function(t){p(e.createInternalServerError(t))}):h(t)}).catch(function(t){p(e.createInternalServerError(t))}):u(t,n).then(function(c){c?t.getData(c).then(function(){t.status===HTTPStatusCode.OK?h(l(t)):e.authorize(t,n,r,i,o,s,a,u).then(function(){h(l(t))}).catch(function(t){p(e.createAuthorizationFailedError())})}).catch(function(t){p(e.createAuthorizationFailedError())}):e.authorize(t,n,r,i,o,s,a,u).then(function(){h(l(t))}).catch(function(t){p(e.createAuthorizationFailedError())})}).catch(function(t){p(e.createAuthorizationFailedError())})})},e.createError=function(t,e){var n=new Error;return n.message=e,n.name=t,n},e.createAuthorizationFailedError=function(){return e.createError(manifesto.StatusCodes.AUTHORIZATION_FAILED.toString(),"Authorization failed")},e.createRestrictedError=function(){return e.createError(manifesto.StatusCodes.RESTRICTED.toString(),"Restricted")},e.createInternalServerError=function(t){return e.createError(manifesto.StatusCodes.INTERNAL_SERVER_ERROR.toString(),t)},e.authorize=function(t,n,r,i,o,s,a,u){return new Promise(function(l,c){t.getData().then(function(){t.isAccessControlled()?u(t,n).then(function(u){u?t.getData(u).then(function(){t.status===HTTPStatusCode.OK?l(t):e.showAuthInteraction(t,n,r,i,o,s,a,l,c)}).catch(function(t){c(e.createInternalServerError(t))}):s(t,!1).then(function(u){u?a(t,u,n).then(function(){t.getData(u).then(function(){t.status===HTTPStatusCode.OK?l(t):e.showAuthInteraction(t,n,r,i,o,s,a,l,c)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))}):e.showAuthInteraction(t,n,r,i,o,s,a,l,c)})}).catch(function(t){c(e.createInternalServerError(t))}):l(t)})})},e.showAuthInteraction=function(t,n,r,i,o,s,a,u,l){t.status!==HTTPStatusCode.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?r(t).then(function(){s(t,!0).then(function(r){a(t,r,n).then(function(){t.getData(r).then(function(){u(t)}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))})}):o(t).then(function(){s(t,!0).then(function(r){a(t,r,n).then(function(){t.getData(r).then(function(){u(t)}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))})}):u(t)},e.getService=function(t,e){var n=this.getServices(t);"string"!=typeof e&&(e=e.toString());for(var r=0;r<n.length;r++){var i=n[r];if(i.getProfile().toString()===e)return i}return null},e.getResourceById=function(t,n){return[t.__jsonld].en().traverseUnique(function(t){return e.getAllArrays(t)}).first(function(t){return t["@id"]===n})},e.getAllArrays=function(t){var e=[].en();if(!t)return e;for(var n in t){var r=t[n];Array.isArray(r)&&(e=e.concat(r))}return e},e.getServices=function(e){var n;n=e.__jsonld?e.__jsonld.service:e.service;var r=[];if(!n)return r;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];if("string"==typeof o){var s=this.getResourceById(e.options.resource,o);s&&r.push(new t.Service(s.__jsonld||s,e.options))}else r.push(new t.Service(o,e.options))}return r},e.getTemporalComponent=function(t){var e=/t=([^&]+)/g.exec(t),n=null;return e&&e[1]&&(n=e[1].split(",")),n},e}();t.Utils=e}(o||(o={}));var o;!function(t){var e=function(){function e(t){this.defaultLocale=t}return e.prototype.parse=function(e){this.resource=e,this.label=t.TranslationCollection.parse(this.resource.label,this.defaultLocale),this.value=t.TranslationCollection.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(){return this.label?t.TranslationCollection.getValue(this.label,this.defaultLocale):null},e.prototype.setLabel=function(e){var n=this;if(this.label&&this.label.length){var r=this.label.en().where(function(e){return e.locale===n.defaultLocale||e.locale===t.Utils.getInexactLocale(n.defaultLocale)}).first();r&&(r.value=e)}},e.prototype.getValue=function(){if(this.value){var e=this.defaultLocale;return this.label.length&&this.label[0].locale&&(e=this.label[0].locale),t.TranslationCollection.getValue(this.value,e)}return null},e.prototype.setValue=function(e){var n=this;if(this.value&&this.value.length){var r=this.value.en().where(function(e){return e.locale===n.defaultLocale||e.locale===t.Utils.getInexactLocale(n.defaultLocale)}).first();r&&(r.value=e)}},e}();t.MetadataItem=e}(o||(o={}));var o;!function(t){var e=function(){function t(t,e){Array.isArray(t)?1===t.length?this.value=t[0]:this.value=t.join("<br/>"):this.value=t,this.locale=e}return t}();t.Translation=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.parse=function(e,n){var r,i=[];if(!e)return i;if(Array.isArray(e))for(var o=0;o<e.length;o++){var s=e[o];r="string"==typeof s?new t.Translation(s,n):new t.Translation(s["@value"],s["@language"]||n),i.push(r)}else{if("string"==typeof e)return r=new t.Translation(e,n),i.push(r),i;e["@value"]?(r=new t.Translation(e["@value"],e["@language"]||n),i.push(r)):Object.keys(e).forEach(function(n){if(!e[n].length)throw new Error("Translation must have a value");r=new t.Translation(e[n],n),i.push(r)})}return i},n.getValue=function(e,n){if(e.length){if(n){var r=e.en().where(function(e){return e.locale===n||t.Utils.getInexactLocale(e.locale)===t.Utils.getInexactLocale(n)}).first();if(r)return r.value}return e[0].value}return null},n}(Array);t.TranslationCollection=e}(o||(o={}));var o;!function(t){var e=function(){function t(t,e){this.width=t,this.height=e}return t}();t.Size=e}(o||(o={})),e.manifesto=e.Manifesto=t.exports={AnnotationMotivation:new o.AnnotationMotivation,Behavior:new o.Behavior,IIIFResourceType:new o.IIIFResourceType,ManifestType:new o.ManifestType,MediaType:new o.MediaType,MetadataItem:o.MetadataItem,RenderingFormat:new o.RenderingFormat,ResourceType:new o.ResourceType,ServiceProfile:new o.ServiceProfile,Size:o.Size,Translation:o.Translation,TranslationCollection:o.TranslationCollection,TreeNode:o.TreeNode,TreeNodeType:new o.TreeNodeType,Utils:o.Utils,ViewingDirection:new o.ViewingDirection,ViewingHint:new o.ViewingHint,StatusCodes:{AUTHORIZATION_FAILED:1,FORBIDDEN:2,INTERNAL_SERVER_ERROR:3,RESTRICTED:4},create:function(t,e){return o.Deserialiser.parse(t,e)},loadManifest:function(t){return o.Utils.loadResource(t)}};var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getBody=function(){var e=[],n=this.getProperty("body");if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];if(i.items)for(var o=0;o<i.items.length;o++){var s=i.items[o];e.push(new t.AnnotationBody(s,this.options))}else e.push(new t.AnnotationBody(i,this.options))}else if(n.items)for(var r=0;r<n.items.length;r++){var i=n.items[r];e.push(new t.AnnotationBody(i,this.options))}else e.push(new t.AnnotationBody(n,this.options));return e},n.prototype.getMotivation=function(){var e=this.getProperty("motivation");return e?new t.AnnotationMotivation(e.toLowerCase()):null},n.prototype.getOn=function(){return this.getProperty("on")},n.prototype.getTarget=function(){return this.getProperty("target")},n.prototype.getResource=function(){return new t.Resource(this.getProperty("resource"),this.options)},n}(t.ManifestResource);t.Annotation=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(t.Utils.getMediaType(e)):null},n.prototype.getType=function(){return this.getProperty("type")?new t.ResourceType(t.Utils.normaliseType(this.getProperty("type"))):null},n}(t.ManifestResource);t.AnnotationBody=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n,r){var i=e.call(this,n)||this;return i.label=t,i.options=r,i}return i(n,e),n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLabel=function(){return this.label},n.prototype.getResources=function(){var e=this;return this.getProperty("resources").map(function(n){return new t.Annotation(n,e.options)})},n.prototype.load=function(){var e=this;return new Promise(function(n,r){if(e.isLoaded)n(e);else{var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),t.Utils.loadResource(i).then(function(t){e.__jsonld=JSON.parse(t),e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,n(e)}).catch(r)}})},n}(t.JSONLDResource);t.AnnotationList=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.getItems=function(){return this.getProperty("items")},e}(t.ManifestResource);t.AnnotationPage=e}(o||(o={}));var o,i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(t.Resource);t.Thumbnail=e}(o||(o={}))}).call(e,n(2))},function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&l.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return l.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=n(149),l=n(150);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=r;var c=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(f),g=["'"].concat(d),m=["%","/","?",";","#"].concat(g),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n(151);r.prototype.parse=function(t,e,n){if(!l.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var h=p.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=c.exec(a);if(f){f=f[0];var d=f.toLowerCase();this.protocol=d,a=a.substr(f.length)}if(n||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===a.substr(0,2);!T||f&&b[f]||(a=a.substr(2),this.slashes=!0)}if(!b[f]&&(T||f&&!E[f])){for(var S=-1,C=0;C<v.length;C++){var O=a.indexOf(v[C]);-1!==O&&(-1===S||O<S)&&(S=O)}var P,I;I=-1===S?a.lastIndexOf("@"):a.lastIndexOf("@",S),-1!==I&&(P=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(P)),S=-1;for(var C=0;C<m.length;C++){var O=a.indexOf(m[C]);-1!==O&&(-1===S||O<S)&&(S=O)}-1===S&&(S=a.length),this.host=a.slice(0,S),a=a.slice(S),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var A=this.hostname.split(/\./),C=0,M=A.length;C<M;C++){var N=A[C];if(N&&!N.match(y)){for(var F="",L=0,k=N.length;L<k;L++)N.charCodeAt(L)>127?F+="x":F+=N[L];if(!F.match(y)){var D=A.slice(0,C),B=A.slice(C+1),j=N.match(w);j&&(D.push(j[1]),B.unshift(j[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=u.toASCII(this.hostname));var H=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+H,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[d])for(var C=0,M=g.length;C<M;C++){var U=g[C];if(-1!==a.indexOf(U)){var V=encodeURIComponent(U);V===U&&(V=escape(U)),a=a.split(U).join(V)}}var G=a.indexOf("#");-1!==G&&(this.hash=a.substr(G),a=a.slice(0,G));var W=a.indexOf("?");if(-1!==W?(this.search=a.substr(W),this.query=a.substr(W+1),e&&(this.query=_.parse(this.query)),a=a.slice(0,W)):e&&(this.search="",this.query={}),a&&(this.pathname=a),E[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",q=this.search||"";this.path=H+q}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(l.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(n[c]=t[c])}return E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!E[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||b[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=y||v||n.host&&t.pathname,x=w,_=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],T=n.protocol&&!E[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===_[0])),y)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),n.search=t.search,n.query=t.query;else if(!l.isNullOrUndefined(t.search)){if(T){n.hostname=n.host=_.shift();var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return n.search=t.search,n.query=t.query,l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=_.slice(-1)[0],O=(n.host||t.host||_.length>1)&&("."===C||".."===C)||""===C,P=0,I=_.length;I>=0;I--)C=_[I],"."===C?_.splice(I,1):".."===C?(_.splice(I,1),P++):P&&(_.splice(I,1),P--);if(!w&&!x)for(;P--;P)_.unshift("..");!w||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),O&&"/"!==_.join("/").substr(-1)&&_.push("");var R=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(T){n.hostname=n.host=R?"":_.length?_.shift():"";var S=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return w=w||n.host&&_.length,w&&!R&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),l.isNull(n.pathname)&&l.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){function r(t,e,n){var r=t[e];a.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}var i=n(44),o=n(19),s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var i=n(79);t.exports=r},function(t,e,n){function r(t,e){return s(o(t,e,i),t+"")}var i=n(28),o=n(163),s=n(165);t.exports=r},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e,n){function r(t){return s(t)?i(t,!0):o(t)}var i=n(85),o=n(174),s=n(4);t.exports=r},function(t,e,n){var r=n(170),i=n(13),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(6),i=n(171),o="object"==typeof e&&e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o,u=a?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||i;t.exports=c}).call(e,n(42)(t))},function(t,e,n){var r=n(172),i=n(86),o=n(173),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(89),i=n(182),o=n(90),s=n(203),a=n(62),u=n(21),l=function(){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var i=this;this.VERSION=r.VERSION,this.options=u(e,{httpHeaders:{},defaultSize:20,getLocation:function(){return"undefined"!=typeof window&&window.location}}),this.documentUri=t,this.document=n.document,this.emitter=new a.EventEmitter,this.documentEmitter=new a.EventEmitter,this.guidGenerator=new a.GuidGenerator,this.state=n.state||{},this.transport=new o.AxiosManifestTransport(t,{headers:this.options.httpHeaders,basicAuth:this.options.basicAuth,searchUrlPath:this.options.searchUrlPath,timeout:this.options.timeout,withCredentials:this.options.withCredentials}),this.registrationCompleted=new Promise(function(t){i.completeRegistration=t}),this.accessors=new s.AccessorManager}return t.prototype.guid=function(t){return this.guidGenerator.guid(t)},t.prototype.setupListeners=function(){this.getRemoteManifest()},t.prototype.addAccessor=function(t){return t.setViewerManager(this),this.accessors.add(t)},t.prototype.removeAccessor=function(t){this.accessors.remove(t)},t.prototype.getRemoteManifest=function(){var t=this;this.registrationCompleted.then(function(){t._get()}).catch(function(t){})},t.prototype.getDocumentAndState=function(){return{document:this.document,state:this.state}},t.prototype._get=function(){var t=this;return this.state=this.accessors.getState(),this.document?Promise.resolve(this.getDocumentAndState()):(this.loading=!0,this.emitter.trigger(),this.currentDocumentRequest=new i.DocumentRequest(this.transport,this.documentUri,this),this.currentDocumentRequest.run().then(function(){return t.getDocumentAndState()}))},t.prototype.setDocument=function(t){this.document=t,this.accessors.setResults(t),this.onResponseChange(),this.documentEmitter.trigger(this.document)},t.prototype.setError=function(t){this.error=t,this.document=null},t.prototype.onResponseChange=function(){this.loading=!1,this.initialLoading=!1,this.emitter.trigger()},t.VERSION=r.VERSION,t}();e.ViewerManager=l},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t}();e.ManifestTransport=n},function(t,e,n){"use strict";(function(e){function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i=n(3),o=n(187),s={"Content-Type":"application/x-www-form-urlencoded"},a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(93):void 0!==e&&(t=n(93)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){a.headers[t]={}}),i.forEach(["post","put","patch"],function(t){a.headers[t]=i.merge(s)}),t.exports=a}).call(e,n(9))},function(t,e,n){function r(t,e){e=i(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[o(e[n++])];return n&&n==r?t:void 0}var i=n(32),o=n(23);t.exports=r},function(t,e,n){function r(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(a.test(t)||!s.test(t)||null!=e&&t in Object(e))}var i=n(1),o=n(33),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(207),o=n(219),s=n(221),a=n(222),u=n(223);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(11),i=n(6),o=r(i,"Map");t.exports=o},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}t.exports=n},function(t,e,n){function r(t){if(!i(t))return o(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}var i=n(30),o=n(246),s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){var r=n(247),i=n(57),o=n(248),s=n(249),a=n(250),u=n(15),l=n(82),c=l(r),h=l(i),p=l(o),f=l(s),d=l(a),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||s&&"[object Set]"!=g(new s)||a&&"[object WeakMap]"!=g(new a))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case p:return"[object Promise]";case f:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){function r(t){var e=i(t),n=e%1;return e===e?n?e-n:e:0}var i=n(259);t.exports=r},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(284)),r(n(291)),r(n(297))},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(134)),r(n(135)),r(n(155)),r(n(176)),r(n(87))},function(t,e){function n(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}t.exports=n},function(t,e,n){(function(t){var r=n(136),i=n(68),o=n(147),s=n(148),a=n(41),u=e;u.request=function(e,n){e="string"==typeof e?a.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,u=e.hostname||e.host,l=e.port,c=e.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),e.url=(u?s+"//"+u:"")+(l?":"+l:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new r(e);return n&&h.on("response",n),h},u.get=function(t,e){var n=u.request(t,e);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(e,n(2))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function n(){if(void 0!==o)return o;if(t.XMLHttpRequest){o=new t.XMLHttpRequest;try{o.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){o=null}}else o=null;return o}function r(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}function i(t){return"function"==typeof t}e.fetch=i(t.fetch)&&i(t.ReadableStream),e.writableStream=i(t.WritableStream),e.abortController=i(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var o,s=void 0!==t.ArrayBuffer,a=s&&i(t.ArrayBuffer.prototype.slice);e.arraybuffer=e.fetch||s&&r("arraybuffer"),e.msstream=!e.fetch&&a&&r("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&s&&r("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!n()&&i(n().overrideMimeType),e.vbArray=i(t.VBArray),o=null}).call(e,n(2))},function(t,e,n){(function(t,r,i){var o=n(67),s=n(10),a=n(69),u=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=e.IncomingMessage=function(e,n,s,u){function l(){p.read().then(function(t){if(!c._destroyed){if(t.done)return i.clearTimeout(u),void c.push(null);c.push(new r(t.value)),l()}}).catch(function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)})}var c=this;if(a.Readable.call(c),c._mode=s,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===s){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)}),o.writableStream){var h=new WritableStream({write:function(t){return new Promise(function(e,n){c._destroyed?n():c.push(new r(t))?e():c._resumeFetch=e})},close:function(){i.clearTimeout(u),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void n.body.pipeTo(h).catch(function(t){i.clearTimeout(u),c._destroyed||c.emit("error",t)})}catch(t){}}var p=n.body.getReader();l()}else{c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText;if(e.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(e[2])):void 0!==c.headers[n]?c.headers[n]+=", "+e[2]:c.headers[n]=e[2],c.rawHeaders.push(e[1],e[2])}}),c._charset="x-user-defined",!o.overrideMimeType){var f=c.rawHeaders["mime-type"];if(f){var d=f.match(/;\s*charset=([^;])(;|$)/);d&&(c._charset=d[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};s(l,a.Readable),l.prototype._read=function(){var t=this,e=t._resumeFetch;e&&(t._resumeFetch=null,e())},l.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==u.DONE)break;try{n=new i.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new r(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var o=n.substr(t._pos);if("x-user-defined"===t._charset){for(var s=new r(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);t.push(s)}else t.push(o,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==u.DONE||!e.response)break;n=e.response,t.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==u.LOADING||!n)break;t.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==u.LOADING)break;var l=new i.MSStreamReader;l.onprogress=function(){l.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(l.result.slice(t._pos)))),t._pos=l.result.byteLength)},l.onload=function(){t.push(null)},l.readAsArrayBuffer(n)}t._xhr.readyState===u.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(e,n(9),n(17).Buffer,n(2))},function(t,e,n){e=t.exports=n(70),e.Stream=e,e.Readable=e,e.Writable=n(74),e.Duplex=n(14),e.Transform=n(76),e.PassThrough=n(145)},function(t,e,n){"use strict";(function(e,r){function i(t){return D.from(t)}function o(t){return D.isBuffer(t)||t instanceof B}function s(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?F(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function a(t,e){N=N||n(14),t=t||{};var r=e instanceof N;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new V,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(U||(U=n(75).StringDecoder),this.decoder=new U(t.encoding),this.encoding=t.encoding)}function u(t){if(N=N||n(14),!(this instanceof u))return new u(t);this._readableState=new a(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),k.call(this)}function l(t,e,n,r,o){var s=t._readableState;if(null===e)s.reading=!1,g(t,s);else{var a;o||(a=h(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===D.prototype||(e=i(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):c(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?c(t,s,e,!1):y(t,s)):c(t,s,e,!1))):r||(s.reading=!1)}return p(s)}function c(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&m(t)),y(t,e)}function h(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function p(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function f(t){return t>=q?t=q:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function d(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=f(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function g(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,m(t)}}function m(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(z("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?M.nextTick(v,t):v(t))}function v(t){z("emit readable"),t.emit("readable"),T(t)}function y(t,e){e.readingMore||(e.readingMore=!0,M.nextTick(w,t,e))}function w(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(z("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function x(t){return function(){var e=t._readableState;z("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&L(t,"data")&&(e.flowing=!0,T(t))}}function b(t){z("readable nexttick read 0"),t.read(0)}function E(t,e){e.resumeScheduled||(e.resumeScheduled=!0,M.nextTick(_,t,e))}function _(t,e){e.reading||(z("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(z("flow",e.flowing);e.flowing&&null!==t.read(););}function S(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=C(t,e.buffer,e.decoder),n}function C(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?O(t,e):P(t,e),r}function O(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}function P(t,e){var n=D.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}function I(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,M.nextTick(R,e,t))}function R(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var M=n(25);t.exports=u;var N,F=n(66);u.ReadableState=a;var L=(n(71).EventEmitter,function(t,e){return t.listeners(e).length}),k=n(72),D=n(26).Buffer,B=e.Uint8Array||function(){},j=n(18);j.inherits=n(10);var H=n(139),z=void 0;z=H&&H.debuglog?H.debuglog("stream"):function(){};var U,V=n(140),G=n(73);j.inherits(u,k);var W=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),u.prototype.destroy=G.destroy,u.prototype._undestroy=G.undestroy,u.prototype._destroy=function(t,e){this.push(null),e(t)},u.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=D.from(t,e),e=""),n=!0),l(this,t,e,!1,n)},u.prototype.unshift=function(t){return l(this,t,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(t){return U||(U=n(75).StringDecoder),this._readableState.decoder=new U(t),this._readableState.encoding=t,this};var q=8388608;u.prototype.read=function(t){z("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return z("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?I(this):m(this),null;if(0===(t=d(t,e))&&e.ended)return 0===e.length&&I(this),null;var r=e.needReadable;z("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,z("length less than watermark",r)),e.ended||e.reading?(r=!1,z("reading or ended",r)):r&&(z("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=d(n,e)));var i;return i=t>0?S(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&I(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(t,e){function n(t,e){z("onunpipe"),t===p&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){z("onend"),t.end()}function o(){z("cleanup"),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("drain",m),t.removeListener("error",u),t.removeListener("unpipe",n),p.removeListener("end",i),p.removeListener("end",h),p.removeListener("data",a),v=!0,!f.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function a(e){z("ondata"),y=!1,!1!==t.write(e)||y||((1===f.pipesCount&&f.pipes===t||f.pipesCount>1&&-1!==A(f.pipes,t))&&!v&&(z("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,y=!0),p.pause())}function u(e){z("onerror",e),h(),t.removeListener("error",u),0===L(t,"error")&&t.emit("error",e)}function l(){t.removeListener("finish",c),h()}function c(){z("onfinish"),t.removeListener("close",l),h()}function h(){z("unpipe"),p.unpipe(t)}var p=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,z("pipe count=%d opts=%j",f.pipesCount,e);var d=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr,g=d?i:h;f.endEmitted?M.nextTick(g):p.once("end",g),t.on("unpipe",n);var m=x(p);t.on("drain",m);var v=!1,y=!1;return p.on("data",a),s(t,"error",u),t.once("close",l),t.once("finish",c),t.emit("pipe",p),f.flowing||(z("pipe resume"),p.resume()),t},u.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=A(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},u.prototype.on=function(t,e){var n=k.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):M.nextTick(b,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var t=this._readableState;return t.flowing||(z("resume"),t.flowing=!0,E(this,t)),this},u.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(z("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){if(z("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){e.push(i)||(r=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<W.length;o++)t.on(W[o],this.emit.bind(this,W[o]));return this._read=function(e){z("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=S}).call(e,n(2),n(9))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,a,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(n=this._events[t],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){t.exports=n(71).EventEmitter},function(t,e,n){"use strict";function r(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(s.nextTick(o,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}var s=n(25);t.exports={destroy:r,undestroy:i}},function(t,e,n){"use strict";(function(e,r,i){function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){O(e,t)}}function s(t){return F.from(t)}function a(t){return F.isBuffer(t)||t instanceof L}function u(){}function l(t,e){I=I||n(14),t=t||{};var r=e instanceof I;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,s=t.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){y(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function c(t){if(I=I||n(14),!(D.call(c,this)||this instanceof I))return new c(t);this._writableState=new l(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),N.call(this)}function h(t,e){var n=new Error("write after end");t.emit("error",n),P.nextTick(e,n)}function p(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),P.nextTick(r,o),i=!1),i}function f(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=F.from(e,n)),e}function d(t,e,n,r,i,o){if(!n){var s=f(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else g(t,e,!1,a,r,i,o);return u}function g(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function m(t,e,n,r,i){--e.pendingcb,n?(P.nextTick(i,r),P.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),S(t,e))}function v(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function y(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(v(n),e)m(t,n,r,e,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||b(t,n),r?R(w,t,n,o,i):w(t,n,o,i)}}function w(t,e,n,r){n||x(t,e),e.pendingcb--,r(),S(t,e)}function x(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function b(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,g(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(g(t,e,!1,e.objectMode?1:l.length,l,c,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function T(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,P.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function S(t,e){var n=E(e);return n&&(T(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function C(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?P.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function O(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var P=n(25);t.exports=c;var I,R=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:P.nextTick;c.WritableState=l;var A=n(18);A.inherits=n(10);var M={deprecate:n(144)},N=n(72),F=n(26).Buffer,L=i.Uint8Array||function(){},k=n(73);A.inherits(c,N),l.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(l.prototype,"buffer",{get:M.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var D;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!D.call(this,t)||this===c&&(t&&t._writableState instanceof l)}})):D=function(t){return t instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=!r.objectMode&&a(t);return o&&!F.isBuffer(t)&&(t=s(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?h(this,n):(o||p(this,r,t,n))&&(r.pendingcb++,i=d(this,r,o,t,e,n)),i},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||C(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=k.destroy,c.prototype._undestroy=k.undestroy,c.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(9),n(142).setImmediate,n(2))},function(t,e,n){"use strict";function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=r(t);if("string"!=typeof e&&(y.isEncoding===w||!w(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){this.encoding=i(t);var e;switch(this.encoding){case"utf16le":this.text=p,this.end=f,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=d,this.end=g,e=3;break;default:return this.write=m,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0)}function u(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}function l(t){var e=this.lastTotal-this.lastNeed,n=u(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){var n=a(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function p(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function d(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function m(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}var y=n(26).Buffer,w=y.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=h,o.prototype.text=c,o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";function r(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);a.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=i;var a=n(14),u=n(18);u.inherits=n(10),u.inherits(i,a),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var n=this;a.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){t.exports=n(156)},function(t,e,n){function r(t,e,n,r){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var l=e[a],c=r?r(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),s?o(n,l,c):i(n,l,c)}return n}var i=n(43),o=n(44);t.exports=r},function(t,e,n){var r=n(11),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==a||e==u||e==s||e==l}var i=n(15),o=n(12),s="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(2))},function(t,e){function n(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,i=r.toString;t.exports=n},function(t,e,n){function r(t){return i(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,s)}return e})}var i=n(45),o=n(84);t.exports=r},function(t,e,n){function r(t,e,n){if(!a(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&s(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=n(19),o=n(4),s=n(29),a=n(12);t.exports=r},function(t,e,n){function r(t,e){var n=s(t),r=!n&&o(t),c=!n&&!r&&a(t),p=!n&&!r&&!c&&l(t),f=n||r||c||p,d=f?i(t.length,String):[],g=d.length;for(var m in t)!e&&!h.call(t,m)||f&&("length"==m||c&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,g))||d.push(m);return d}var i=n(169),o=n(48),s=n(1),a=n(49),u=n(29),l=n(50),c=Object.prototype,h=c.hasOwnProperty;t.exports=r},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(177)),r(n(88)),r(n(312))},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(20),s=n(91),a=n(311),u=(n(21),function(t){function e(e){var n=t.call(this,e)||this;return n.getCoordinates=function(t){return s.default.get(t).then(function(t){t.data.width,t.data.height}).catch(function(t){})},n.setAbstractRegion=function(t,e){},n.setRegion=function(t,e){},n}return r(e,t),e.prototype.render=function(){return i.createElement("div",{className:"openseadragon",id:"osd-viewer"})},e.prototype.initSeaDragon=function(){var t=this,e=this,n=this.props.images[0];this.getCoordinates(n).then(function(){e.viewer=a({sequenceMode:!0,showReferenceStrip:!0,referenceStripScroll:"horizontal",showNavigator:!0,id:"osd-viewer",visibilityRatio:.5,constrainDuringPan:!1,defaultZoomLevel:0,minZoomLevel:0,maxZoomLevel:10,zoomInButton:"zoom-in",zoomOutButton:"zoom-out",homeButton:"reset",fullPageButton:"full-page",previousButton:"sidebar-previous",nextButton:"sidebar-next",tileSources:[t.props.images]})})},e.prototype.componentDidMount=function(){},e.prototype.shouldComponentUpdate=function(){return!1},e.prototype.componentWillMount=function(){t.prototype.componentWillMount.call(this),this.props.images&&this.initSeaDragon()},e}(o.ViewerComponent));e.OsdComponent=u,e.default=u},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION="0.1.0"},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(52)),r(n(183)),r(n(202))},function(t,e,n){t.exports=n(184)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(3),i=n(188),o=n(190),s=n(191),a=n(192),u=n(94),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(193);t.exports=function(t){return new Promise(function(e,c){var h=t.data,p=t.headers;r.isFormData(h)&&delete p["Content-Type"];var f=new XMLHttpRequest,d="onreadystatechange",g=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||a(t.url)||(f=new window.XDomainRequest,d="onload",g=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";p.Authorization="Basic "+l(m+":"+v)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[d]=function(){if(f&&(4===f.readyState||g)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?f.response:f.responseText,o={data:r,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};i(e,c,o),f=null}},f.onerror=function(){c(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=n(194),w=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;w&&(p[t.xsrfHeaderName]=w)}if("setRequestHeader"in f&&r.forEach(p,function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete p[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),c(t),f=null)}),void 0===h&&(h=null),f.send(h)})}},function(t,e,n){"use strict";var r=n(189);t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(31)),r(n(99)),r(n(226)),r(n(282)),r(n(283))},function(t,e,n){function r(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}var i=n(54);t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),o=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.urlKey=n||e&&e.replace(/\./g,"_"),r}return r(e,t),e.prototype.onStateChange=function(t){},e.prototype.fromQueryObject=function(t){var e=t[this.urlKey];this.state=this.state.setValue(e)},e.prototype.getQueryObject=function(){var t,e=this.state.getValue();return e?(t={},t[this.urlKey]=e,t):{}},e.prototype.setViewerManager=function(e){t.prototype.setViewerManager.call(this,e),this.uuid=this.key+this.uuid,this.fromQueryObject(e.state),this.setResultsState()},e.prototype.setResults=function(e){t.prototype.setDocument.call(this,e),this.setResultsState()},e.prototype.setResultsState=function(){this.resultsState=this.state},e.prototype.resetState=function(){this.state=this.state.clear()},e}(i.Accessor);e.StatefulAccessor=o},function(t,e,n){var r=n(228),i=n(258),o=r(i);t.exports=o},function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=n(35),o=n(231),s=n(232),a=n(233),u=n(234),l=n(235);r.prototype.clear=o,r.prototype.delete=s,r.prototype.get=a,r.prototype.has=u,r.prototype.set=l,t.exports=r},function(t,e,n){function r(t,e,n,s,a){return t===e||(null==t||null==e||!o(t)&&!o(e)?t!==t&&e!==e:i(t,e,n,s,r,a))}var i=n(236),o=n(13);t.exports=r},function(t,e,n){function r(t,e,n,r,l,c){var h=n&a,p=t.length,f=e.length;if(p!=f&&!(h&&f>p))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var g=-1,m=!0,v=n&u?new i:void 0;for(c.set(t,e),c.set(e,t);++g<p;){var y=t[g],w=e[g];if(r)var x=h?r(w,y,g,e,t,c):r(y,w,g,t,e,c);if(void 0!==x){if(x)continue;m=!1;break}if(v){if(!o(e,function(t,e){if(!s(v,e)&&(y===t||l(y,t,n,r,c)))return v.push(e)})){m=!1;break}}else if(y!==w&&!l(y,w,n,r,c)){m=!1;break}}return c.delete(t),c.delete(e),m}var i=n(104),o=n(239),s=n(105),a=1,u=2;t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=n(56),o=n(237),s=n(238);r.prototype.add=r.prototype.push=o,r.prototype.has=s,t.exports=r},function(t,e){function n(t,e){return t.has(e)}t.exports=n},function(t,e,n){function r(t,e,n){var r=e(t);return o(t)?r:i(r,n(t))}var i=n(107),o=n(1);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}t.exports=n},function(t,e,n){var r=n(58),i=n(109),o=Object.prototype,s=o.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return s.call(t,e)}))}:i;t.exports=u},function(t,e){function n(){return[]}t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){function r(t){return t===t&&!i(t)}var i=n(12);t.exports=r},function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e){function n(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}t.exports=n},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(24)),r(n(261)),r(n(268)),r(n(270)),r(n(271))},function(t,e,n){function r(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=null==n?0:o(n);return a<0&&(a=s(r+a,0)),i(t,e,a)}var i=n(117),o=n(61),s=Math.max;t.exports=r},function(t,e,n){function r(t,e,n){return e===e?s(t,e,n):i(t,o,n)}var i=n(114),o=n(262),s=n(263);t.exports=r},function(t,e,n){t.exports=n(285)},function(t,e,n){function r(t,e){return t&&i(t,e,o)}var i=n(287),o=n(16);t.exports=r},function(t,e,n){function r(t,e,n){var r=u(t)?i:a,l=arguments.length<3;return r(t,s(e,4),n,l,o)}var i=n(292),o=n(39),s=n(7),a=n(293),u=n(1);t.exports=r},function(t,e,n){function r(t,e){var n=[];return i(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}var i=n(39);t.exports=r},function(t,e){function n(t){if("function"!=typeof t)throw new TypeError(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var r="Expected a function";t.exports=n},function(t,e){function n(t){return void 0===t}t.exports=n},function(t,e,n){var r=n(43),i=n(78),o=n(83),s=n(4),a=n(30),u=n(16),l=Object.prototype,c=l.hasOwnProperty,h=o(function(t,e){if(a(e)||s(e))return void i(e,u(e),t);for(var n in e)c.call(e,n)&&r(t,n,e[n])});t.exports=h},function(t,e,n){function r(t,e){return Object.keys(e).reduce(function(t,n){var r=e[n];return Array.isArray(r)&&(r=r.slice()),t[n]=r,t},t)}function i(t){return r({},t)}function o(t,e){void 0===e&&(e=v.mod);var n=v.modValue;return Object.keys(t).reduce(function(r,i){var o=t[i];return o?(!0===o?r.push(e+i):r.push(e+i+n+o),r):r},[])}function s(t){return v.classMap[t]||t}function a(){var t=Array.prototype.slice.call(arguments),e=i(this);return e=t.reduce(function(t,e){return e&&"string"==typeof e&&(t.name=t.name+v.el+e),e&&"object"==typeof e&&t.mods.push(e),t},e),p(e)}function u(){var t=v.ns+this.name,e=s(t);e=this.mods.reduce(function(e,n){var r=o(n);return r.length&&(r=r.map(function(e){return s(t+e)}),r.unshift(""),e+=r.join(m)),e},e),this.mixes.length&&(e+=m+this.mixes.join(m));var n=this.states;return e=Object.keys(n).reduce(function(t,e){return t+=n[e]?m+g+e:""},e)}function l(){var t=u.bind(this)();return String.prototype.split.apply(t,arguments)}function c(t){var e,n=i(this);return t&&(e="function"==typeof t?[t.toString()]:Array.isArray(t)?t:"object"==typeof t?[t.toString()]:"string"==typeof t?[t]:o(t,""),n.mixes=n.mixes.concat(e)),p(n)}function h(t){var e=i(this),n=i(e.states);return r(n,t||{}),e.states=n,p(e)}function p(t){t=r({name:"",mods:[],mixes:[],states:{}},t||{});var e={};return e.el=a.bind(t),e.mod=a.bind(t),e.toString=u.bind(t),e.split=l.bind(t),e.mix=c.bind(t),e.state=h.bind(t),e}function f(t){return p({name:t})}Object.defineProperty(e,"__esModule",{value:!0});var d=n(124),g="is-",m=" ",v={ns:"",el:"__",mod:"_",modValue:"_",classMap:{}};e.block=f,d(f,{setup:function(t){return r(v,t||{}),f}})},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(8),s=n(20),a=n(21),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){return i.createElement("div",{"data-qa":"hit",className:this.props.bemBlocks.item().mix(this.props.bemBlocks.container("item"))},this.props.document)},e}(i.PureComponent);e.AnnotationItem=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this.props,e=t.document,n=t.mod,r=t.className,o=t.itemComponent,a={container:s.block(n).el,item:s.block(n+"-hit").el};return i.createElement("div",{"data-qa":"document",className:a.container().mix(r)},s.renderComponent(o,{document:e,bemBlocks:a}))},e.defaultProps={mod:"sk-hits",itemComponent:u},e.propTypes={mod:o.string,className:o.string,itemComponent:s.RenderComponentPropType,document:o.any},e}(i.PureComponent);e.AnnotationList=l;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentWillMount=function(){t.prototype.componentWillMount.call(this),this.annotationsAccessor=new s.AnnotationsAccessor,this.viewer.addAccessor(this.annotationsAccessor)},e.prototype.render=function(){var t=this.getDocument();if(!this.isInitialLoading()){var e=this.props,n=e.listComponent,r=e.mod,i=e.className,o=e.itemComponent;return s.renderComponent(n,{document:t,mod:r,className:i,itemComponent:o})}return null},e.propTypes=a({itemComponent:s.RenderComponentPropType,listComponent:s.RenderComponentPropType},s.ViewerComponent.propTypes),e.defaultProps={listComponent:l,scrollTo:"body"},e}(s.ViewerComponent);e.Annotations=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=void 0;try{t=n(324)}finally{return t}},t.exports=e.default},,,,function(t,e,n){t.exports=n(132)},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(133)),r(n(20))},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(63)),r(n(313))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(64),o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t).join(" ")};e.LayoutBuilder=function(t){return function(e){return r.createElement("div",{className:o(t,e.className)},e.children)}},e.LayoutBody=e.LayoutBuilder("viewer-layout__body"),e.LayoutResults=e.LayoutBuilder("viewer-layout__results viewer-results-list"),e.ActionBar=e.LayoutBuilder("viewer-results-list__action-bar viewer-action-bar"),e.ActionBarRow=e.LayoutBuilder("viewer-action-bar-row"),e.SideBar=e.LayoutBuilder("viewer-layout__filters"),e.TopBar=function(t){return r.createElement("div",{className:o("viewer-layout__top-bar viewer-top-bar",t.className)},r.createElement("div",{className:"viewer-top-bar__content"},t.children))},e.Layout=function(t){var e=t.size?"viewer-layout__size-"+t.size:null;return r.createElement("div",{className:o("viewer-layout",t.className,e)},t.children)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(40);e.Controls=function(){return r.createElement("div",null,r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{id:"zoom-in"},r.createElement("i",{className:"glyphicon glyphicon-zoom-in"}))),r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{id:"zoom-out"},r.createElement("i",{className:"glyphicon glyphicon-zoom-out"}))),r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{id:"reset"},r.createElement("i",{className:"glyphicon glyphicon-home"}))),r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{id:"full-page"},r.createElement("i",{className:"glyphicon glyphicon-resize-full"}))),r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{href:"/atomic"},r.createElement("i",{className:"glyphicon glyphicon-search"}))),r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{id:"sidebar-previous"},r.createElement("i",{className:"glyphicon glyphicon-chevron-left"}))),r.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs"},r.createElement("a",{id:"sidebar-next"},r.createElement("i",{className:"glyphicon glyphicon-chevron-right"}))))}},function(t,e,n){(function(e,r,i){function o(t,e){return a.fetch&&e?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&t?"arraybuffer":a.vbArray&&t?"text:vbarray":"text"}function s(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}var a=n(67),u=n(10),l=n(68),c=n(69),h=n(146),p=l.IncomingMessage,f=l.readyStates,d=t.exports=function(t){var n=this;c.Writable.call(n),n._opts=t,n._body=[],n._headers={},t.auth&&n.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){n.setHeader(e,t.headers[e])});var r,i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!a.abortController)i=!1,r=!0;else if("prefer-streaming"===t.mode)r=!1;else if("allow-wrong-content-type"===t.mode)r=!a.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=o(r,i),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};u(d,c.Writable),d.prototype.setHeader=function(t,e){var n=this,r=t.toLowerCase();-1===g.indexOf(r)&&(n._headers[r]={name:t,value:e})},d.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},d.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},d.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,o=t._headers,s=null;"GET"!==n.method&&"HEAD"!==n.method&&(s=a.arraybuffer?h(e.concat(t._body)):a.blobConstructor?new r.Blob(t._body.map(function(t){return h(t)}),{type:(o["content-type"]||{}).value||""}):e.concat(t._body).toString());var u=[];if(Object.keys(o).forEach(function(t){var e=o[t].name,n=o[t].value;Array.isArray(n)?n.forEach(function(t){u.push([e,t])}):u.push([e,n])}),"fetch"===t._mode){var l=null;if(a.abortController){var c=new AbortController;l=c.signal,t._fetchAbortController=c,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=r.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},n.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:l}).then(function(e){t._fetchResponse=e,t._connect()},function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var p=t._xhr=new r.XMLHttpRequest;try{p.open(t._opts.method,t._opts.url,!0)}catch(e){return void i.nextTick(function(){t.emit("error",e)})}"responseType"in p&&(p.responseType=t._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(p.timeout=n.requestTimeout,p.ontimeout=function(){t.emit("requestTimeout")}),u.forEach(function(t){p.setRequestHeader(t[0],t[1])}),t._response=null,p.onreadystatechange=function(){switch(p.readyState){case f.LOADING:case f.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(p.onprogress=function(){t._onXHRProgress()}),p.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{p.send(s)}catch(e){return void i.nextTick(function(){t.emit("error",e)})}}}},d.prototype._onXHRProgress=function(){var t=this;s(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},d.prototype._connect=function(){var t=this;t._destroyed||(t._response=new p(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},d.prototype._write=function(t,e,n){this._body.push(t),n()},d.prototype.abort=d.prototype.destroy=function(){var t=this;t._destroyed=!0,r.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort()},d.prototype.end=function(t,e,n){var r=this;"function"==typeof t&&(n=t,t=void 0),c.Writable.prototype.end.call(r,t,e,n)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(e,n(17).Buffer,n(2),n(9))},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function i(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i}function o(t,e,n){return 3*(e+n)/4-n}function s(t){for(var e,n=r(t),i=n[0],s=n[1],a=new p(o(t,i,s)),u=0,l=s>0?i-4:i,c=0;c<l;c+=4)e=h[t.charCodeAt(c)]<<18|h[t.charCodeAt(c+1)]<<12|h[t.charCodeAt(c+2)]<<6|h[t.charCodeAt(c+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=h[t.charCodeAt(c)]<<2|h[t.charCodeAt(c+1)]>>4,a[u++]=255&e),1===s&&(e=h[t.charCodeAt(c)]<<10|h[t.charCodeAt(c+1)]<<4|h[t.charCodeAt(c+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a}function a(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function u(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a(r));return i.join("")}function l(t){for(var e,n=t.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(u(t,o,o+16383>s?s:o+16383));return 1===r?(e=t[n-1],i.push(c[e>>2]+c[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(c[e>>10]+c[e>>4&63]+c[e<<2&63]+"=")),i.join("")}e.byteLength=i,e.toByteArray=s,e.fromByteArray=l;for(var c=[],h=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,g=f.length;d<g;++d)c[d]=f[d],h[f.charCodeAt(d)]=d;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?p/u:p*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=255&s,f+=d,s/=256,l-=8);t[n+f-d]|=128*g}},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){t.copy(e,n)}var o=n(26).Buffer,s=n(141);t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),n=this.head,r=0;n;)i(n.data,e,r),r+=n.data.length,n=n.next;return e},t}(),s&&s.inspect&&s.inspect.custom&&(t.exports.prototype[s.inspect.custom]=function(){var t=s.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(143),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(2))},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return l[u]=r,a(u),u++}function i(t){delete l[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function s(t){if(c)setTimeout(s,0,t);else{var e=l[t];if(e){c=!0;try{o(e)}finally{i(t),c=!1}}}}if(!t.setImmediate){var a,u=1,l={},c=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;a=function(e){var n=h.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){a=function(t){setTimeout(s,0,t)}}(),p.setImmediate=r,p.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(2),n(9))},function(t,e,n){(function(e){function n(t,e){function n(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation"),i=!0}return t.apply(this,arguments)}if(r("noDeprecation"))return t;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=n}).call(e,n(2))},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}t.exports=r;var i=n(76),o=n(18);o.inherits=n(10),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(17).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){function n(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t}t.exports=n;var r=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){(function(t,r){var i;!function(o){function s(t){throw new RangeError(M[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(A,"."),r+a(t.split("."),e).join(".")}function l(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=L(t>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function p(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?F(t/S):t>>1,t+=F(t/e);t>N*_>>1;r+=b)t=F(t/N);return F(r+(N+1)*t/(t+T))}function d(t){var e,n,r,i,o,a,u,l,p,d,g=[],m=t.length,v=0,y=O,w=C;for(n=t.lastIndexOf(P),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&s("not-basic"),g.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,a=1,u=b;i>=m&&s("invalid-input"),l=h(t.charCodeAt(i++)),(l>=b||l>F((x-v)/a))&&s("overflow"),v+=l*a,p=u<=w?E:u>=w+_?_:u-w,!(l<p);u+=b)d=b-p,a>F(x/d)&&s("overflow"),a*=d;e=g.length+1,w=f(v-o,e,0==o),F(v/e)>x-y&&s("overflow"),y+=F(v/e),v%=e,g.splice(v++,0,y)}return c(g)}function g(t){var e,n,r,i,o,a,u,c,h,d,g,m,v,y,w,T=[];for(t=l(t),m=t.length,e=O,n=0,o=C,a=0;a<m;++a)(g=t[a])<128&&T.push(L(g));for(r=i=T.length,i&&T.push(P);r<m;){for(u=x,a=0;a<m;++a)(g=t[a])>=e&&g<u&&(u=g);for(v=r+1,u-e>F((x-n)/v)&&s("overflow"),n+=(u-e)*v,e=u,a=0;a<m;++a)if(g=t[a],g<e&&++n>x&&s("overflow"),g==e){for(c=n,h=b;d=h<=o?E:h>=o+_?_:h-o,!(c<d);h+=b)w=c-d,y=b-d,T.push(L(p(d+w%y,0))),c=F(w/y);T.push(L(p(c,0))),o=f(n,v,r==i),n=0,++r}++n,++e}return T.join("")}function m(t){return u(t,function(t){return I.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return u(t,function(t){return R.test(t)?"xn--"+g(t):t})}var y=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof r&&r);var w,x=2147483647,b=36,E=1,_=26,T=38,S=700,C=72,O=128,P="-",I=/^xn--/,R=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=b-E,F=Math.floor,L=String.fromCharCode;w={version:"1.4.1",ucs2:{decode:l,encode:c},decode:d,encode:g,toASCII:v,toUnicode:m},void 0!==(i=function(){return w}.call(e,n,e,t))&&(t.exports=i)}()}).call(e,n(42)(t),n(2))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(152),e.encode=e.stringify=n(153)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var h,p,f,d,g=t[c].replace(a,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),p=g.substr(m+1)):(h=g,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),r(s,f)?i(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var a=encodeURIComponent(i(s))+n;return o(t[s])?r(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){function r(t){if("string"==typeof t&&(t=o.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}var i=n(65),o=n(41),s=t.exports;for(var a in i)i.hasOwnProperty(a)&&(s[a]=i[a]);s.request=function(t,e){return t=r(t),i.request.call(this,t,e)},s.get=function(t,e){return t=r(t),i.get.call(this,t,e)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(77);e.GridItem=function(t){var e=Object({NODE_ENV:"production"}).REACT_APP_OSD_BASE,n=(Object({NODE_ENV:"production"}).REACT_APP_OSD_COMPONENT_BASE,Object({NODE_ENV:"production"}).REACT_APP_UBL_IMAGE_VIEWER_BASE),o=t.bemBlocks,s=t.result,a=i({},s._source,s.highlight),u=a.iiifService+"/full/pct:25/0/default.jpg",l=e+"?image="+a.iiifService,c=new URL(a.iiifService).pathname,h=c.split("/"),p=h[5],f=n+p,d=a.metadata.Title.substr(0,50)+"... : "+a.imageIndex;return r.createElement("div",{className:o.item().mix(o.container("item")),"data-qa":"hit"},r.createElement("div",{className:o.item("poster")},r.createElement("a",{href:l,target:"_blank"},r.createElement("img",{className:o.item("poster"),alt:"presentation","data-qa":"poster",src:u,width:"140"}))),r.createElement("a",{href:f,target:"_blank"},r.createElement("div",{"data-qa":"title",className:o.item("title"),dangerouslySetInnerHTML:{__html:d}})))}},function(t,e,n){var r=n(78),i=n(83),o=n(47),s=i(function(t,e){r(e,o(e),t)});t.exports=s},function(t,e,n){function r(t){return!(!s(t)||o(t))&&(i(t)?d:l).test(a(t))}var i=n(80),o=n(160),s=n(12),a=n(82),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,p=c.toString,f=h.hasOwnProperty,d=RegExp("^"+p.call(f).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){var e=s.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(27),o=Object.prototype,s=o.hasOwnProperty,a=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e,n){function r(t){return!!o&&o in t}var i=n(161),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(6),i=r["__core-js_shared__"];t.exports=i},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=o(r.length-e,0),u=Array(a);++s<a;)u[s]=r[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=r[s];return l[e]=n(u),i(t,this,l)}}var i=n(164),o=Math.max;t.exports=r},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},function(t,e,n){var r=n(166),i=n(168),o=i(r);t.exports=o},function(t,e,n){var r=n(167),i=n(79),o=n(28),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},function(t,e){function n(t){return function(){return t}}t.exports=n},function(t,e){function n(t){var e=0,n=0;return function(){var s=o(),a=i-(s-n);if(n=s,a>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,i=16,o=Date.now;t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){function r(t){return o(t)&&i(t)==s}var i=n(15),o=n(13),s="[object Arguments]";t.exports=r},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function r(t){return s(t)&&o(t.length)&&!!a[i(t)]}var i=n(15),o=n(46),s=n(13),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){(function(t){var r=n(81),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===i,a=s&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u}).call(e,n(42)(t))},function(t,e,n){function r(t){if(!i(t))return s(t);var e=o(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var i=n(12),o=n(30),s=n(175),a=Object.prototype,u=a.hasOwnProperty;t.exports=r},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(77);e.ListItem=function(t){var e=Object({NODE_ENV:"production"}).REACT_APP_GENERATOR_BASE,n=Object({NODE_ENV:"production"}).REACT_APP_OSD_COMPONENT_BASE,o=Object({NODE_ENV:"production"}).REACT_APP_UBL_IMAGE_VIEWER_BASE,s=e+"?type=atomic&index="+Object({NODE_ENV:"production"}).REACT_APP_ATOMIC_INDEX+"&q=",a=t.bemBlocks,u=t.result,l=i({},u._source,u.highlight),c=l.iiifService+"/full/90,/0/default.jpg",h=n+"?image="+l.iiifService,p=new URL(l.iiifService).pathname,f=p.split("/"),d=f[5],g=o+d,m='{"query":{"multi_match":{"query":"'+d+'","type":"cross_fields","operator":"and"}},"size":500}',v=n+"?manifest="+encodeURIComponent(s+m);return r.createElement("div",{className:a.item().mix(a.container("item")),"data-qa":"hit"},r.createElement("div",{className:a.item("poster")},r.createElement("a",{href:h,target:"_blank"},r.createElement("img",{className:"thumbnail",alt:"presentation","data-qa":"poster",src:c}))),r.createElement("div",{className:a.item("details")},r.createElement("a",{href:g,target:"_blank"},r.createElement("h2",{className:a.item("title"),dangerouslySetInnerHTML:{__html:l.metadata.Title}})),r.createElement("table",null,r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"Image Index:"),r.createElement("td",null,l.imageIndex)),r.createElement("tr",null,r.createElement("td",null,"Author:"),r.createElement("td",null,l.metadata.Author)),r.createElement("tr",null,r.createElement("td",null,"Date:"),r.createElement("td",null,l.metadata.Date," ",l.metadata["Date of publication"]," ",l.metadata.Datierung," ",l.metadata.datiert)),r.createElement("tr",null,r.createElement("td",null,"Composite Manifest:"),r.createElement("td",null,r.createElement("a",{href:s+m,target:"_blank"},d))),r.createElement("tr",null,r.createElement("td",null,"View:"),r.createElement("td",null,r.createElement("a",{href:v,target:"_blank"},d)))))))}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(88),o=n(40);e.ManifestItem=function(t){var e=t.document;if(e){var n=o.create(e),s=n.getSequences(),a=[];return s.forEach(function(t){t.getCanvases().forEach(function(t){t.getImages().forEach(function(t){t.getResource().getServices().forEach(function(t){a.push(t.id+"/info.json")})})})}),r.createElement(i.default,{images:a})}return null}},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(179)),r(n(301)),r(n(303)),r(n(125))},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(8),s=n(51),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.componentWillMount=function(){this.props.viewer.setupListeners()},e.prototype.componentDidMount=function(){this.props.viewer.completeRegistration()},e.prototype.componentWillUnmount=function(){this.props.viewer.guidGenerator.reset()},e.prototype.getChildContext=function(){return{viewer:this.props.viewer}},e.prototype.render=function(){return this.props.children},e.childContextTypes={viewer:o.instanceOf(s.ViewerManager)},e.propTypes={viewer:o.instanceOf(s.ViewerManager).isRequired,children:o.element.isRequired},e}(i.Component);e.ViewerProvider=a},function(t,e,n){"use strict";function r(){}var i=n(181);t.exports=function(){function t(t,e,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.transport=t,this.documentUri=e,this.viewer=n,this.active=!0}return t.prototype.run=function(){return this.transport.get(this.documentUri).then(this.setResults.bind(this)).catch(this.setError.bind(this))},t.prototype.deactivate=function(){this.active=!1},t.prototype.setResults=function(t){this.active&&this.viewer.setDocument(t)},t.prototype.setError=function(t){this.active&&this.viewer.setError(t)},t}();e.DocumentRequest=n},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(91),o=n(52),s=n(21),a=function(t){function e(n,r){void 0===r&&(r={});var o=t.call(this)||this;o.host=n,o.options=s(r,{headers:{},timeout:e.timeout});var a=e.parseCredentials(o.options),u=s(a,{baseURL:o.host,timeout:o.options.timeout,headers:o.options.headers});return o.axios=i.default.create(u),o}return r(e,t),e.prototype.get=function(t){return this.axios.get(t).then(this.getData)},e.prototype.getData=function(t){return t.data},e.parseCredentials=function(t){var e={};if(void 0!==t.basicAuth){var n=t.basicAuth.split(":"),r={username:n[0],password:n[1]};e.auth=r}return t.withCredentials&&(e.withCredentials=!0),e},e.timeout=2e4,e}(o.ManifestTransport);e.AxiosManifestTransport=a},function(t,e,n){"use strict";function r(t){var e=new s(t),n=o(s.prototype.request,e);return i.extend(n,s.prototype,e),i.extend(n,e),n}var i=n(3),o=n(92),s=n(186),a=n(53),u=r(a);u.Axios=s,u.create=function(t){return r(i.merge(a,t))},u.Cancel=n(96),u.CancelToken=n(200),u.isCancel=n(95),u.all=function(t){return Promise.all(t)},u.spread=n(201),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function r(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var i=n(53),o=n(3),s=n(195),a=n(196),u=n(198),l=n(199);r.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,this.defaults,{method:"get"},t),t.method=t.method.toLowerCase(),t.baseURL&&!u(t.url)&&(t.url=l(t.baseURL,t.url));var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(94);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(3);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(r(e)+"="+r(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\n"),function(t){i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e&&(o[e]=o[e]?o[e]+", "+n:n)}),o):o}},function(t,e,n){"use strict";var r=n(3);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";function r(){this.message="String contains an invalid character"}function i(t){for(var e,n,i=String(t),s="",a=0,u=o;i.charAt(0|a)||(u="=",a%1);s+=u.charAt(63&e>>8-a%1*8)){if((n=i.charCodeAt(a+=.75))>255)throw new r;e=e<<8|n}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=i},function(t,e,n){"use strict";var r=n(3);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(3);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=n(3),o=n(197),s=n(95),a=n(53);t.exports=function(t){return r(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return r(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(r(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}var i=n(96);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(52),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.get=function(t){return Promise.resolve(t)},e}(i.ManifestTransport);e.MockESTransport=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(97),i=n(62),o=n(298),s=n(299),a=n(120),u=n(124),l=n(118),c=n(38),h=n(100),p=function(){function t(){this.accessors=[],this.statefulAccessors={}}return t.prototype.getAccessors=function(){return this.accessors},t.prototype.getActiveAccessors=function(){return o(this.accessors,{active:!0})},t.prototype.getStatefulAccessors=function(){return s(this.statefulAccessors)},t.prototype.getAccessorsByType=function(t){return o(this.accessors,i.Utils.instanceOf(t))},t.prototype.getAccessorByType=function(t){return h(this.accessors,i.Utils.instanceOf(t))},t.prototype.add=function(t){if(t instanceof r.StatefulAccessor){var e=this.statefulAccessors[t.key];if(e){if(e.constructor===t.constructor)return e.incrementRef(),e;throw new Error("Multiple imcompatible components with id='"+t.key+"' existing on the page")}this.statefulAccessors[t.key]=t}return t.incrementRef(),this.accessors.push(t),t},t.prototype.remove=function(t){t&&(t.decrementRef(),0===t.refCount&&(t instanceof r.StatefulAccessor&&delete this.statefulAccessors[t.key],this.accessors=c(this.accessors,t)))},t.prototype.getState=function(){return a(this.getStatefulAccessors(),function(t,e){return u(t,e.getQueryObject())},{})},t.prototype.setState=function(t){l(this.getStatefulAccessors(),function(e){return e.fromQueryObject(t)})},t.prototype.notifyStateChange=function(t){l(this.getStatefulAccessors(),function(e){return e.onStateChange(t)})},t.prototype.setResults=function(t){l(this.accessors,function(e){return e.setResults(t)})},t.prototype.resetState=function(){l(this.getStatefulAccessors(),function(t){return t.resetState()})},t}();e.AccessorManager=p},function(t,e,n){var r=n(205),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=s},function(t,e,n){function r(t){var e=i(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}var i=n(206),o=500;t.exports=r},function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(r.Cache||i),n}var i=n(56),o="Expected a function";r.Cache=i,t.exports=r},function(t,e,n){function r(){this.size=0,this.__data__={hash:new i,map:new(s||o),string:new i}}var i=n(208),o=n(35),s=n(57);t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(209),o=n(210),s=n(211),a=n(212),u=n(213);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(34);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return a.call(e,t)?e[t]:void 0}var i=n(34),o="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:s.call(e,t)}var i=n(34),o=Object.prototype,s=o.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?o:e,this}var i=n(34),o="__lodash_hash_undefined__";t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)}var i=n(36),o=Array.prototype,s=o.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=n(36);t.exports=r},function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=n(36);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var i=n(36);t.exports=r},function(t,e,n){function r(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=n(37);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return i(this,t).get(t)}var i=n(37);t.exports=r},function(t,e,n){function r(t){return i(this,t).has(t)}var i=n(37);t.exports=r},function(t,e,n){function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var i=n(37);t.exports=r},function(t,e,n){function r(t){return null==t?"":i(t)}var i=n(225);t.exports=r},function(t,e,n){function r(t){if("string"==typeof t)return t;if(s(t))return o(t,r)+"";if(a(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=n(27),o=n(22),s=n(1),a=n(33),u=1/0,l=i?i.prototype:void 0,c=l?l.toString:void 0;t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(227),o=n(100),s=n(99),a=n(115),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.state=new a.ValueState,r.options=n,r}return r(e,t),e.prototype.getSelectedOption=function(){return o(this.options,{key:this.state.getValue()})||o(this.options,{defaultOption:!0})||i(this.options)},e.prototype.setView=function(t){var e=o(this.options,{key:t});e&&(e.defaultOption?this.state=this.state.clear():this.state=this.state.setValue(e.key),this.search())},e.prototype.search=function(){this.viewer.getDocumentAndState(),this.viewer.emitter.trigger()},e}(s.StatefulAccessor);e.DocumentViewAccessor=u},function(t,e){function n(t){return t&&t.length?t[0]:void 0}t.exports=n},function(t,e,n){function r(t){return function(e,n,r){var a=Object(e);if(!o(e)){var u=i(n,3);e=s(e),n=function(t){return u(a[t],t,a)}}var l=t(e,n,r);return l>-1?a[u?e[l]:l]:void 0}}var i=n(7),o=n(4),s=n(16);t.exports=r},function(t,e,n){function r(t){var e=o(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}var i=n(230),o=n(251),s=n(112);t.exports=r},function(t,e,n){function r(t,e,n,r){var u=n.length,l=u,c=!r;if(null==t)return!l;for(t=Object(t);u--;){var h=n[u];if(c&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++u<l;){h=n[u];var p=h[0],f=t[p],d=h[1];if(c&&h[2]){if(void 0===f&&!(p in t))return!1}else{var g=new i;if(r)var m=r(f,d,p,t,e,g);if(!(void 0===m?o(d,f,s|a,r,g):m))return!1}}return!0}var i=n(101),o=n(102),s=1,a=2;t.exports=r},function(t,e,n){function r(){this.__data__=new i,this.size=0}var i=n(35);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<a-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(r)}return n.set(t,e),this.size=n.size,this}var i=n(35),o=n(57),s=n(56),a=200;t.exports=r},function(t,e,n){function r(t,e,n,r,m,y){var w=l(t),x=l(e),b=w?d:u(t),E=x?d:u(e);b=b==f?g:b,E=E==f?g:E;var _=b==g,T=E==g,S=b==E;if(S&&c(t)){if(!c(e))return!1;w=!0,_=!1}if(S&&!_)return y||(y=new i),w||h(t)?o(t,e,n,r,m,y):s(t,e,b,n,r,m,y);if(!(n&p)){var C=_&&v.call(t,"__wrapped__"),O=T&&v.call(e,"__wrapped__");if(C||O){var P=C?t.value():t,I=O?e.value():e;return y||(y=new i),m(P,I,n,r,y)}}return!!S&&(y||(y=new i),a(t,e,n,r,m,y))}var i=n(101),o=n(103),s=n(240),a=n(244),u=n(60),l=n(1),c=n(49),h=n(50),p=1,f="[object Arguments]",d="[object Array]",g="[object Object]",m=Object.prototype,v=m.hasOwnProperty;t.exports=r},function(t,e){function n(t){return this.__data__.set(t,r),this}var r="__lodash_hash_undefined__";t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}t.exports=n},function(t,e,n){function r(t,e,n,r,i,_,S){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!_(new o(t),new o(e)));case p:case f:case m:return s(+t,+e);case d:return t.name==e.name&&t.message==e.message;case v:case w:return t==e+"";case g:var C=u;case y:var O=r&c;if(C||(C=l),t.size!=e.size&&!O)return!1;var P=S.get(t);if(P)return P==e;r|=h,S.set(t,e);var I=a(C(t),C(e),r,i,_,S);return S.delete(t),I;case x:if(T)return T.call(t)==T.call(e)}return!1}var i=n(27),o=n(241),s=n(19),a=n(103),u=n(242),l=n(243),c=1,h=2,p="[object Boolean]",f="[object Date]",d="[object Error]",g="[object Map]",m="[object Number]",v="[object RegExp]",y="[object Set]",w="[object String]",x="[object Symbol]",b="[object ArrayBuffer]",E="[object DataView]",_=i?i.prototype:void 0,T=_?_.valueOf:void 0;t.exports=r},function(t,e,n){var r=n(6),i=r.Uint8Array;t.exports=i},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}t.exports=n},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=n},function(t,e,n){function r(t,e,n,r,s,u){var l=n&o,c=i(t),h=c.length;if(h!=i(e).length&&!l)return!1;for(var p=h;p--;){var f=c[p];if(!(l?f in e:a.call(e,f)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var g=!0;u.set(t,e),u.set(e,t);for(var m=l;++p<h;){f=c[p];var v=t[f],y=e[f];if(r)var w=l?r(y,v,f,e,t,u):r(v,y,f,t,e,u);if(!(void 0===w?v===y||s(v,y,n,r,u):w)){g=!1;break}m||(m="constructor"==f)}if(g&&!m){var x=t.constructor,b=e.constructor;x!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(g=!1)}return u.delete(t),u.delete(e),g}var i=n(245),o=1,s=Object.prototype,a=s.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return i(t,s,o)}var i=n(106),o=n(108),s=n(16);t.exports=r},function(t,e,n){var r=n(110),i=r(Object.keys,Object);t.exports=i},function(t,e,n){var r=n(11),i=n(6),o=r(i,"DataView");t.exports=o},function(t,e,n){var r=n(11),i=n(6),o=r(i,"Promise");t.exports=o},function(t,e,n){var r=n(11),i=n(6),o=r(i,"Set");t.exports=o},function(t,e,n){var r=n(11),i=n(6),o=r(i,"WeakMap");t.exports=o},function(t,e,n){function r(t){for(var e=o(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,i(s)]}return e}var i=n(111),o=n(16);t.exports=r},function(t,e,n){function r(t,e){return a(t)&&u(e)?l(c(t),e):function(n){var r=o(n,t);return void 0===r&&r===e?s(n,t):i(e,r,h|p)}}var i=n(102),o=n(98),s=n(253),a=n(55),u=n(111),l=n(112),c=n(23),h=1,p=2;t.exports=r},function(t,e,n){function r(t,e){return null!=t&&o(t,e,i)}var i=n(254),o=n(255);t.exports=r},function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},function(t,e,n){function r(t,e,n){e=i(e,t);for(var r=-1,c=e.length,h=!1;++r<c;){var p=l(e[r]);if(!(h=null!=t&&n(t,p)))break;t=t[p]}return h||++r!=c?h:!!(c=null==t?0:t.length)&&u(c)&&a(p,c)&&(s(t)||o(t))}var i=n(32),o=n(48),s=n(1),a=n(29),u=n(46),l=n(23);t.exports=r},function(t,e,n){function r(t){return s(t)?i(a(t)):o(t)}var i=n(113),o=n(257),s=n(55),a=n(23);t.exports=r},function(t,e,n){function r(t){return function(e){return i(e,t)}}var i=n(54);t.exports=r},function(t,e,n){function r(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var u=null==n?0:s(n);return u<0&&(u=a(r+u,0)),i(t,o(e,3),u)}var i=n(114),o=n(7),s=n(61),a=Math.max;t.exports=r},function(t,e,n){function r(t){if(!t)return 0===t?t:0;if((t=i(t))===o||t===-o){return(t<0?-1:1)*s}return t===t?t:0}var i=n(260),o=1/0,s=1.7976931348623157e308;t.exports=r},function(t,e,n){function r(t){if("number"==typeof t)return t;if(o(t))return s;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=l.test(t);return n||c.test(t)?h(t.slice(2),n?2:8):u.test(t)?s:+t}var i=n(12),o=n(33),s=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=n(116),s=n(38),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getValue=function(){return this.value||[]},e.prototype.toggle=function(t){return this.contains(t)?this.remove(t):this.add(t)},e.prototype.clear=function(){return this.create([])},e.prototype.remove=function(t){return this.create(s(this.getValue(),t))},e.prototype.add=function(t){return this.create(this.getValue().concat(t))},e.prototype.contains=function(t){return-1!==o(this.value,t)},e}(i.State);e.ArrayState=a},function(t,e){function n(t){return t!==t}t.exports=n},function(t,e){function n(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}t.exports=n},function(t,e,n){function r(t,e,n,r){var h=-1,p=o,f=!0,d=t.length,g=[],m=e.length;if(!d)return g;n&&(e=a(e,u(n))),r?(p=s,f=!1):e.length>=c&&(p=l,f=!1,e=new i(e));t:for(;++h<d;){var v=t[h],y=null==n?v:n(v);if(v=r||0!==v?v:0,f&&y===y){for(var w=m;w--;)if(e[w]===y)continue t;g.push(v)}else p(e,y,r)||g.push(v)}return g}var i=n(104),o=n(265),s=n(266),a=n(22),u=n(86),l=n(105),c=200;t.exports=r},function(t,e,n){function r(t,e){return!!(null==t?0:t.length)&&i(t,e,0)>-1}var i=n(117);t.exports=r},function(t,e){function n(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}t.exports=n},function(t,e,n){function r(t){return o(t)&&i(t)}var i=n(4),o=n(13);t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=n(269),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getValue=function(){return this.value||{}},e.prototype.hasValue=function(){return!o(this.value)},e}(i.State);e.ObjectState=s},function(t,e,n){function r(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||h(t)||s(t)))return!t.length;var e=o(t);if(e==p||e==f)return!t.size;if(c(t))return!i(t).length;for(var n in t)if(g.call(t,n))return!1;return!0}var i=n(59),o=n(60),s=n(48),a=n(1),u=n(4),l=n(49),c=n(30),h=n(50),p="[object Map]",f="[object Set]",d=Object.prototype,g=d.hasOwnProperty;t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toggle=function(t){return this.is(t)?this.clear():this.setValue(t)},e.prototype.is=function(t){return this.value===t},e}(i.State);e.ValueState=o},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),o=n(1),s=n(272),a=n(274),u=n(38),l=n(116),c=n(280),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getValue=function(){return this.value||[]},e.prototype.add=function(t,e){var n,r,i=this.getValue();return o(i[t])||(i=c(i,(n={},n[t]={$set:[]},n))),i=c(i,(r={},r[t]={$push:[e]},r)),this.create(i)},e.prototype.contains=function(t,e){return-1!==l(this.getValue()[t],e)},e.prototype.clear=function(t){return void 0===t&&(t=0),this.create(s(this.getValue(),t))},e.prototype.remove=function(t,e){var n;return this.create(c(this.getValue(),(n={},n[t]={$set:u(this.getValue()[t],e)},n)))},e.prototype.toggle=function(t,e){return this.contains(t,e)?this.remove(t,e):this.add(t,e)},e.prototype.getLevel=function(t){return this.getValue()[t]||[]},e.prototype.levelHasFilters=function(t){return this.getLevel(t).length>0},e.prototype.getLeafLevel=function(){return a(this.value)-1},e.prototype.isLeafLevel=function(t){return t===this.getLeafLevel()},e.prototype.toggleLevel=function(t,e){return this.contains(t,e)?this.isLeafLevel(t)?this.clear(t):this.clear(t+1):this.clear(t).add(t,e)},e}(i.State);e.LevelState=h},function(t,e,n){function r(t,e,n){return t&&t.length?(e=n||void 0===e?1:o(e),i(t,0,e<0?0:e)):[]}var i=n(273),o=n(61);t.exports=r},function(t,e){function n(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}t.exports=n},function(t,e,n){function r(t){if(null==t)return 0;if(s(t))return a(t)?u(t):t.length;var e=o(t);return e==l||e==c?t.size:i(t).length}var i=n(59),o=n(60),s=n(4),a=n(275),u=n(276),l="[object Map]",c="[object Set]";t.exports=r},function(t,e,n){function r(t){return"string"==typeof t||!o(t)&&s(t)&&i(t)==a}var i=n(15),o=n(1),s=n(13),a="[object String]";t.exports=r},function(t,e,n){function r(t){return o(t)?s(t):i(t)}var i=n(277),o=n(278),s=n(279);t.exports=r},function(t,e,n){var r=n(113),i=r("length");t.exports=i},function(t,e){function n(t){return r.test(t)}var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=n},function(t,e){function n(t){for(var e=h.lastIndex=0;h.test(t);)++e;return e}var r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",a="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",u="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",o,s].join("|")+")[\\ufe0e\\ufe0f]?"+a+")*",l="[\\ufe0e\\ufe0f]?"+a+u,c="(?:"+["[^\\ud800-\\udfff]"+r+"?",r,o,s,"[\\ud800-\\udfff]"].join("|")+")",h=RegExp(i+"(?="+i+")|"+c+l,"g");t.exports=n},function(t,e,n){function r(t){if(Array.isArray(t))return y(t.constructor(t.length),t);if("Map"===v(t))return new Map(t);if("Set"===v(t))return new Set(t);if(t&&"object"==typeof t){var e=Object.getPrototypeOf(t);return y(Object.create(e),t)}return t}function i(){function t(n,i){"function"==typeof i&&(i={$apply:i}),Array.isArray(n)&&Array.isArray(i)||f(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),f("object"==typeof i&&null!==i,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var o=n;return w(i).forEach(function(s){if(d.call(e,s)){var a=n===o;o=e[s](i[s],o,i,n),a&&t.isEquals(o,n)&&(o=n)}else{var u="Map"===v(n)?t(n.get(s),i[s]):t(n[s],i[s]);t.isEquals(u,o[s])&&(void 0!==u||d.call(n,s))||(o===n&&(o=r(n)),"Map"===v(o)?o.set(s,u):o[s]=u)}}),o}var e=y({},x);return t.extend=function(t,n){e[t]=n},t.isEquals=function(t,e){return t===e},t}function o(t,e,n){f(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t),s(e[n],n)}function s(t,e){f(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function a(t,e){f(Array.isArray(t),"Expected $splice target to be an array; got %s",t),u(e.$splice)}function u(t){f(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function l(t){f("function"==typeof t,"update(): expected spec of $apply to be a function; got %s.",t)}function c(t){f(1===Object.keys(t).length,"Cannot have more than one key in an object with $set")}function h(t,e){f(e&&"object"==typeof e,"update(): $merge expects a spec of type 'object'; got %s",e),f(t&&"object"==typeof t,"update(): $merge expects a target of type 'object'; got %s",t)}function p(t,e){var n=v(t);f("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",e,n)}var f=n(281),d=Object.prototype.hasOwnProperty,g=Array.prototype.splice,m=Object.prototype.toString,v=function(t){return m.call(t).slice(8,-1)},y=Object.assign||function(t,e){return w(e).forEach(function(n){d.call(e,n)&&(t[n]=e[n])}),t},w="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)},x={$push:function(t,e,n){return o(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return o(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,i){return a(e,n),t.forEach(function(t){u(t),e===i&&t.length&&(e=r(i)),g.apply(e,t)}),e},$set:function(t,e,n){return c(n),t},$toggle:function(t,e){s(t,"$toggle");var n=t.length?r(e):e;return t.forEach(function(t){n[t]=!e[t]}),n},$unset:function(t,e,n,i){return s(t,"$unset"),t.forEach(function(t){Object.hasOwnProperty.call(e,t)&&(e===i&&(e=r(i)),delete e[t])}),e},$add:function(t,e,n,i){return p(e,"$add"),s(t,"$add"),"Map"===v(e)?t.forEach(function(t){var n=t[0],o=t[1];e===i&&e.get(n)!==o&&(e=r(i)),e.set(n,o)}):t.forEach(function(t){e!==i||e.has(t)||(e=r(i)),e.add(t)}),e},$remove:function(t,e,n,i){return p(e,"$remove"),s(t,"$remove"),t.forEach(function(t){e===i&&e.has(t)&&(e=r(i)),e.delete(t)}),e},$merge:function(t,e,n,i){return h(e,t),w(t).forEach(function(n){t[n]!==e[n]&&(e===i&&(e=r(i)),e[n]=t[n])}),e},$apply:function(t,e){return l(t),t(e)}},b=i();t.exports=b,t.exports.default=b,t.exports.newContext=i},function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),o=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.setResults=function(e){t.prototype.setDocument.call(this,e)},e}(i.Accessor);e.AnnotationsAccessor=o},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),o=function(t){function e(e){var n=t.call(this)||this;return n.options=e,n}return r(e,t),e.prototype.setResults=function(e){t.prototype.setDocument.call(this,e)},e}(i.Accessor);e.MetadataAccessor=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(38),i=n(118),o=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){var e=this;return this.listeners.push(t),function(){e.listeners=r(e.listeners,t)}},t.prototype.trigger=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i(this.listeners,function(e){e.apply(null,t)})},t.prototype.clear=function(){this.listeners=[]},t}();e.EventEmitter=o},function(t,e,n){function r(t,e){return(a(t)?i:o)(t,s(e))}var i=n(286),o=n(39),s=n(290),a=n(1);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e,n){var r=n(288),i=r();t.exports=i},function(t,e){function n(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==r(a[s],s,a););return n}}var i=n(4);t.exports=r},function(t,e,n){function r(t){return"function"==typeof t?t:i}var i=n(28);t.exports=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(120),i=n(294),o=n(296),s=n(123),a=function(){function t(){}return t.guid=function(e){void 0===e&&(e="");var n=++t.guidCounter;return e.toString()+n},t.collapse=function(t,e){return r(t,function(t,e){return e(t)},e)},t.instanceOf=function(t){return function(e){return e instanceof t}},t.interpolate=function(t,e){return t.replace(/{([^{}]*)}/g,function(t,n){var r=e[n];return"string"==typeof r||"number"==typeof r?r:t})},t.translate=function(e,n){return n?t.interpolate(e,n):e},t.computeOptionKeys=function(e,n,r){return i(e,function(e){return t.generateKeyFromFields(e,n,r)})},t.generateKeyFromFields=function(t,e,n){if(t.key)return t;var r=o(i(e,function(e){return t[e]}),s);return r.length>0?t.key=r.join("_"):t.key=n,t},t.guidCounter=0,t}();e.Utils=a},function(t,e){function n(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}t.exports=n},function(t,e){function n(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}t.exports=n},function(t,e,n){function r(t,e){return(a(t)?i:s)(t,o(e,3))}var i=n(22),o=n(7),s=n(295),a=n(1);t.exports=r},function(t,e,n){function r(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=n(39),o=n(4);t.exports=r},function(t,e,n){function r(t,e){return(a(t)?i:o)(t,u(s(e,3)))}var i=n(58),o=n(121),s=n(7),a=n(1),u=n(122);t.exports=r},function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.counter=0}return t.prototype.reset=function(){this.counter=0},t.prototype.guid=function(t){void 0===t&&(t="");var e=++this.counter;return t.toString()+e},t}();e.GuidGenerator=n},function(t,e,n){function r(t,e){return(a(t)?i:o)(t,s(e,3))}var i=n(58),o=n(121),s=n(7),a=n(1);t.exports=r},function(t,e,n){function r(t){return null==t?[]:i(t,o(t))}var i=n(300),o=n(16);t.exports=r},function(t,e,n){function r(t,e){return i(e,function(e){return t[e]})}var i=n(22);t.exports=r},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(8),s=n(51),a=n(302),u=n(125),l=function(t){function e(e){var n=t.call(this,e)||this;return n.translations={},n.unmounted=!1,n}return r(e,t),e.prototype.defineBEMBlocks=function(){return null},e.prototype.defineAccessor=function(){return null},Object.defineProperty(e.prototype,"bemBlocks",{get:function(){return a(this.defineBEMBlocks(),function(t){return u.block(t).el})},enumerable:!0,configurable:!0}),e.prototype._getSearchkit=function(){return this.props.viewer||this.context.viewer},e.prototype.componentWillMount=function(){var t=this;this.viewer=this._getSearchkit(),this.viewer&&(this.accessor=this.defineAccessor(),this.accessor&&(this.accessor=this.viewer.addAccessor(this.accessor)),this.stateListenerUnsubscribe=this.viewer.emitter.addListener(function(){t.unmounted||t.forceUpdate()}))},e.prototype.componentWillUnmount=function(){this.stateListenerUnsubscribe&&this.stateListenerUnsubscribe(),this.viewer&&this.accessor&&this.viewer.removeAccessor(this.accessor),this.unmounted=!0},e.prototype.getDocument=function(){return this.viewer.document},e.prototype.isInitialLoading=function(){return this.viewer.initialLoading},e.prototype.isLoading=function(){return this.viewer.loading},e.prototype.getError=function(){return this.viewer.error},e.contextTypes={viewer:o.instanceOf(s.ViewerManager)},e.translationsPropType=function(t){return o.shape(a(t,function(){return o.string}))},e.propTypes={mod:o.string,className:o.string,translations:o.objectOf(o.string),viewer:o.instanceOf(s.ViewerManager)},e}(i.Component);e.ViewerComponent=l},function(t,e,n){function r(t,e){var n={};return e=s(e,3),o(t,function(t,r,o){i(n,r,e(t,r,o))}),n}var i=n(44),o=n(119),s=n(7);t.exports=r},function(t,e,n){function r(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=null),t.prototype instanceof i.Component||t.prototype&&t.prototype.isReactComponent||"function"==typeof t?i.createElement(t,e,n):i.isValidElement(t)?i.cloneElement(t,s(e,a),n):null}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(8),s=n(304),a=n(123);e.RenderComponentPropType=o.oneOfType([function(t,e){if(a(t[e])||t[e].prototype instanceof i.Component)return null},o.element,o.func]),e.renderComponent=r},function(t,e,n){function r(t,e){return s(t,o(i(e)))}var i=n(7),o=n(122),s=n(305);t.exports=r},function(t,e,n){function r(t,e){if(null==t)return{};var n=i(a(t),function(t){return[t]});return e=o(e),s(t,n,function(t,n){return e(t,n[0])})}var i=n(22),o=n(7),s=n(306),a=n(308);t.exports=r},function(t,e,n){function r(t,e,n){for(var r=-1,a=e.length,u={};++r<a;){var l=e[r],c=i(t,l);n(c,l)&&o(u,s(l,t),c)}return u}var i=n(54),o=n(307),s=n(32);t.exports=r},function(t,e,n){function r(t,e,n,r){if(!a(t))return t;e=o(e,t);for(var l=-1,c=e.length,h=c-1,p=t;null!=p&&++l<c;){var f=u(e[l]),d=n;if(l!=h){var g=p[f];d=r?r(g,f,p):void 0,void 0===d&&(d=a(g)?g:s(e[l+1])?[]:{})}i(p,f,d),p=p[f]}return t}var i=n(43),o=n(32),s=n(29),a=n(12),u=n(23);t.exports=r},function(t,e,n){function r(t){return i(t,s,o)}var i=n(106),o=n(309),s=n(47);t.exports=r},function(t,e,n){var r=n(107),i=n(310),o=n(108),s=n(109),a=Object.getOwnPropertySymbols,u=a?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=u},function(t,e,n){var r=n(110),i=r(Object.getPrototypeOf,Object);t.exports=i},function(module,exports,__webpack_require__){//! openseadragon 2.3.1
//! Built on 2017-09-19
//! Git commit: v2.3.1-0-08414cd
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function OpenSeadragon(t){return new OpenSeadragon.Viewer(t)}var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t){t.version={versionStr:"2.3.1",major:parseInt("2",10),minor:parseInt("3",10),revision:parseInt("1",10)};var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,r=Object.prototype.hasOwnProperty;t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==typeof t&&"setInterval"in t},t.type=function(t){return null===t||void 0===t?String(t):e[n.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!r.call(e,"constructor")&&!r.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var i in e)n=i;return void 0===n||r.call(e,n)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0},t.freezeObject=function(e){return Object.freeze?t.freezeObject=Object.freeze:t.freezeObject=function(t){return t},t.freezeObject(e)},t.supportsCanvas=function(){var e=document.createElement("canvas");return!(!t.isFunction(e.getContext)||!e.getContext("2d"))}(),t.isCanvasTainted=function(t){var e=!1;try{t.getContext("2d").getImageData(0,0,1,1)}catch(t){e=!0}return e},t.pixelDensityRatio=function(){if(t.supportsCanvas){var e=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return Math.max(n,1)/r}return 1}()}(OpenSeadragon),function($){function getOffsetParent(t,e){return e&&t!=document.body?document.body:t.offsetParent}$.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=arguments.length,u=!1,l=1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==typeof s||OpenSeadragon.isFunction(s)||(s={}),a===l&&(s=this,--l);l<a;l++)if(null!==(t=arguments[l])||void 0!==t)for(e in t)n=s[e],r=t[e],s!==r&&(u&&r&&(OpenSeadragon.isPlainObject(r)||(i=OpenSeadragon.isArray(r)))?(i?(i=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},s[e]=OpenSeadragon.extend(u,o,r)):void 0!==r&&(s[e]=r));return s};var isIOSDevice=function(){if("object"!=typeof navigator)return!1;var t=navigator.userAgent;return"string"==typeof t&&(-1!==t.indexOf("iPhone")||-1!==t.indexOf("iPad")||-1!==t.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,degrees:0,opacity:1,preload:!1,compositeOperation:null,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){var n=arguments;return void 0===n&&(n=[]),e.apply(t,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(t){var e,n,r=new $.Point;for(t=$.getElement(t),e="fixed"==$.getElementStyle(t).position,n=getOffsetParent(t,e);n;)r.x+=t.offsetLeft,r.y+=t.offsetTop,e&&(r=r.plus($.getPageScroll())),t=n,e="fixed"==$.getElementStyle(t).position,n=getOffsetParent(t,e);return r},getElementOffset:function(t){t=$.getElement(t);var e,n,r=t&&t.ownerDocument,i={top:0,left:0};return r?(e=r.documentElement,void 0!==t.getBoundingClientRect&&(i=t.getBoundingClientRect()),n=r==r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new $.Point(i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0),i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0))):new $.Point},getElementSize:function(t){return t=$.getElement(t),new $.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return t=$.getElement(t),t.currentStyle}:function(t){return t=$.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var e={};return $.getCssPropertyWithVendorPrefix=function(t){if(void 0!==e[t])return e[t];var n=document.createElement("div").style,r=null;if(void 0!==n[t])r=t;else for(var i=["Webkit","Moz","MS","O","webkit","moz","ms","o"],o=$.capitalizeFirstLetter(t),s=0;s<i.length;s++){var a=i[s]+o;if(void 0!==n[a]){r=a;break}}return e[t]=r,r},$.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},positiveModulo:function(t,e){var n=t%e;return n<0&&(n+=e),n},pointInElement:function(t,e){t=$.getElement(t);var n=$.getElementOffset(t),r=$.getElementSize(t);return e.x>=n.x&&e.x<n.x+r.x&&e.y<n.y+r.y&&e.y>=n.y},getEvent:function(t){return $.getEvent=t?function(t){return t}:function(){return window.event},$.getEvent(t)},getMousePosition:function(t){if("number"==typeof t.pageX)$.getMousePosition=function(t){var e=new $.Point;return t=$.getEvent(t),e.x=t.pageX,e.y=t.pageY,e};else{if("number"!=typeof t.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(t){var e=new $.Point;return t=$.getEvent(t),e.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,e}}return $.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},e=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(e.scrollLeft||e.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!t.scrollLeft&&!t.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(t){if(void 0!==window.scrollTo)$.setPageScroll=function(t){window.scrollTo(t.x,t.y)};else{var e=$.getPageScroll();if(e.x===t.x&&e.y===t.y)return;document.body.scrollLeft=t.x,document.body.scrollTop=t.y;var n=$.getPageScroll();if(n.x!==e.x&&n.y!==e.y)return void($.setPageScroll=function(t){document.body.scrollLeft=t.x,document.body.scrollTop=t.y});if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,n=$.getPageScroll(),n.x!==e.x&&n.y!==e.y)return void($.setPageScroll=function(t){document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y});$.setPageScroll=function(t){}}return $.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},e=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!e.clientWidth&&!e.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(t){t=$.getElement(t);var e=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(e[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(e[1].style,{display:"table-row"}),$.extend(e[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),e[0].appendChild(e[1]),e[1].appendChild(e[2]),e[2].appendChild(t),e[0]},makeNeutralElement:function(t){var e=document.createElement(t),n=e.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",e},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(t){return $.makeTransparentImage=function(t){var e=$.makeNeutralElement("img");return e.src=t,e},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(t){var e=$.makeNeutralElement("img"),n=null;return n=$.makeNeutralElement("span"),n.style.display="inline-block",e.onload=function(){n.style.width=n.style.width||e.width+"px",n.style.height=n.style.height||e.height+"px",e.onload=null,e=null},e.src=t,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')",n}),$.makeTransparentImage(t)},setElementOpacity:function(t,e,n){var r,i;t=$.getElement(t),n&&!$.Browser.alpha&&(e=Math.round(e)),$.Browser.opacity?t.style.opacity=e<1?e:"":e<1?(r=Math.round(100*e),i="alpha(opacity="+r+")",t.style.filter=i):t.style.filter=""},setElementTouchActionNone:function(t){t=$.getElement(t),void 0!==t.style.touchAction?t.style.touchAction="none":void 0!==t.style.msTouchAction&&(t.style.msTouchAction="none")},addClass:function(t,e){t=$.getElement(t),t.className?-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=" "+e):t.className=e},indexOf:function(t,e,n){return Array.prototype.indexOf?this.indexOf=function(t,e,n){return t.indexOf(e,n)}:this.indexOf=function(t,e,n){var r,i,o=n||0;if(!t)throw new TypeError;if(0===(i=t.length)||o>=i)return-1;for(o<0&&(o=i-Math.abs(o)),r=o;r<i;r++)if(t[r]===e)return r;return-1},this.indexOf(t,e,n)},removeClass:function(t,e){var n,r,i=[];for(t=$.getElement(t),n=t.className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==e&&i.push(n[r]);t.className=i.join(" ")},addEvent:function(){if(window.addEventListener)return function(t,e,n,r){t=$.getElement(t),t.addEventListener(e,n,r)};if(window.attachEvent)return function(t,e,n,r){t=$.getElement(t),t.attachEvent("on"+e,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(t,e,n,r){t=$.getElement(t),t.removeEventListener(e,n,r)};if(window.detachEvent)return function(t,e,n,r){t=$.getElement(t),t.detachEvent("on"+e,n)};throw new Error("No known event model.")}(),cancelEvent:function(t){t=$.getEvent(t),t.preventDefault?$.cancelEvent=function(t){t.preventDefault()}:$.cancelEvent=function(t){t=$.getEvent(t),t.cancel=!0,t.returnValue=!1},$.cancelEvent(t)},stopEvent:function(t){t=$.getEvent(t),t.stopPropagation?$.stopEvent=function(t){t.stopPropagation()}:$.stopEvent=function(t){t=$.getEvent(t),t.cancelBubble=!0},$.stopEvent(t)},createCallback:function(t,e){var n,r=[];for(n=2;n<arguments.length;n++)r.push(arguments[n]);return function(){var n,i=r.concat([]);for(n=0;n<arguments.length;n++)i.push(arguments[n]);return e.apply(t,i)}},getUrlParameter:function(t){var e=URLPARAMS[t];return e||null},getUrlProtocol:function(t){var e=t.match(/^([a-z]+:)\/\//i);return null===e?window.location.protocol:e[1].toLowerCase()},createAjaxRequest:function(t){var e;try{e=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}if(e)window.XMLHttpRequest?$.createAjaxRequest=function(t){return t?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(t)},makeAjaxRequest:function(t,e,n){var r,i,o;$.isPlainObject(t)&&(e=t.success,n=t.error,r=t.withCredentials,i=t.headers,o=t.responseType||null,t=t.url);var s=$.getUrlProtocol(t),a=$.createAjaxRequest("file:"===s);if(!$.isFunction(e))throw new Error("makeAjaxRequest requires a success callback");a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},a.status>=200&&a.status<300||0===a.status&&"http:"!==s&&"https:"!==s?e(a):($.console.log("AJAX request returned %d: %s",a.status,t),$.isFunction(n)&&n(a)))};try{if(a.open("GET",t,!0),o&&(a.responseType=o),i)for(var u in i)i.hasOwnProperty(u)&&i[u]&&a.setRequestHeader(u,i[u]);r&&(a.withCredentials=!0),a.send(null)}catch(r){var l=r.message,c=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(c&&void 0!==r.number&&-2147024891==r.number&&(l+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",r.name,l),a.onreadystatechange=function(){},window.XDomainRequest){var h=new XDomainRequest;if(h){h.onload=function(t){$.isFunction(e)&&e({responseText:h.responseText,status:200,statusText:"OK"})},h.onerror=function(t){$.isFunction(n)&&n({responseText:h.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{h.open("GET",t),h.send()}catch(t){$.isFunction(n)&&n(a,r)}}}else $.isFunction(n)&&n(a,r)}return a},jsonp:function(t){var e,n=t.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=t.callbackName||"openseadragon"+$.now(),o=window[i],s="$1"+i+"$2",a=t.param||"callback",u=t.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,s),n+=(/\?/.test(n)?"&":"?")+a+"="+i,window[i]=function(t){if(o)window[i]=o;else try{delete window[i]}catch(t){}u&&$.isFunction(u)&&u(t)},e=document.createElement("script"),void 0===t.async&&!1===t.async||(e.async="async"),t.scriptCharset&&(e.charset=t.scriptCharset),e.src=n,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,r&&e.parentNode&&r.removeChild(e),e=void 0)},r.insertBefore(e,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(window.DOMParser)$.parseXml=function(t){var e;return e=new DOMParser,e.parseFromString(t,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(t){var e=null;return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e}}return $.parseXml(t)},parseJSON:function(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(t){return t=t||"",!!FILEFORMATS[t.toLowerCase()]}}),$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};!function(){var t,e=navigator.appVersion,n=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(n.substring(n.indexOf("MSIE")+5,n.indexOf(";",n.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(n.indexOf("Firefox")>=0?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(n.substring(n.indexOf("Firefox")+8))):n.indexOf("Safari")>=0?($.Browser.vendor=n.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(n.substring(n.substring(0,n.indexOf("Safari")).lastIndexOf("/")+1,n.indexOf("Safari")))):(t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==t.exec(n)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(e)}var r,i,o,s=window.location.search.substring(1),a=s.split("&");for(o=0;o<a.length;o++)r=a[o],(i=r.indexOf("="))>0&&(URLPARAMS[r.substring(0,i)]=decodeURIComponent(r.substring(i+1)));$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}();var nullfunction=function(t){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;if(e&&n)$.requestAnimationFrame=function(){return e.apply(t,arguments)},$.cancelAnimationFrame=function(){return n.apply(t,arguments)};else{var r,i=[],o=[],s=0;$.requestAnimationFrame=function(t){return i.push([++s,t]),r||(r=setInterval(function(){if(i.length){var t=$.now(),e=o;for(o=i,i=e;o.length;)o.shift()[1](t)}else clearInterval(r),r=void 0},20)),s},$.cancelAnimationFrame=function(t){var e,n;for(e=0,n=i.length;e<n;e+=1)if(i[e][0]===t)return void i.splice(e,1);for(e=0,n=o.length;e<n;e+=1)if(o[e][0]===t)return void o.splice(e,1)}}}(window)}(OpenSeadragon),function(t,e){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=e,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(){return OpenSeadragon}),function(t){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.fullscreenElement},e.requestFullScreen=function(t){return t.requestFullscreen()},e.exitFullScreen=function(){document.exitFullscreen()},e.fullScreenEventName="fullscreenchange",e.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.msFullscreenElement},e.requestFullScreen=function(t){return t.msRequestFullscreen()},e.exitFullScreen=function(){document.msExitFullscreen()},e.fullScreenEventName="MSFullscreenChange",e.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitFullscreenElement},e.requestFullScreen=function(t){return t.webkitRequestFullscreen()},e.exitFullScreen=function(){document.webkitExitFullscreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},e.requestFullScreen=function(t){return t.webkitRequestFullScreen()},e.exitFullScreen=function(){document.webkitCancelFullScreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.mozFullScreenElement},e.requestFullScreen=function(t){return t.mozRequestFullScreen()},e.exitFullScreen=function(){document.mozCancelFullScreen()},e.fullScreenEventName="mozfullscreenchange",e.fullScreenErrorEventName="mozfullscreenerror"),e.isFullScreen=function(){return null!==e.getFullScreenElement()},e.cancelFullScreen=function(){t.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),e.exitFullScreen()},t.extend(t,e)}(OpenSeadragon),function(t){t.EventSource=function(){this.events={}},t.EventSource.prototype={addOnceHandler:function(t,e,n,r){var i=this;r=r||1;var o=0,s=function(n){o++,o===r&&i.removeHandler(t,s),e(n)};this.addHandler(t,s,n)},addHandler:function(e,n,r){var i=this.events[e];i||(this.events[e]=i=[]),n&&t.isFunction(n)&&(i[i.length]={handler:n,userData:r||null})},removeHandler:function(e,n){var r,i=this.events[e],o=[];if(i&&t.isArray(i)){for(r=0;r<i.length;r++)i[r].handler!==n&&o.push(i[r]);this.events[e]=o}},removeAllHandlers:function(t){if(t)this.events[t]=[];else for(var e in this.events)this.events[e]=[]},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,n){var r,i=e.length;for(r=0;r<i;r++)e[r]&&(n.eventSource=t,n.userData=e[r].userData,e[r].handler(n))}):null},raiseEvent:function(t,e){var n=this.getHandler(t);n&&(e||(e={}),n(this,e))}}}(OpenSeadragon),function(t){function e(e){var n,r=gt[e.hash],i=r.activePointersLists.length;for(n=0;n<i;n++)r.activePointersLists[n].captureCount>0&&(t.removeEvent(t.MouseTracker.captureElement,"mousemove",r.mousemovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"mouseup",r.mouseupcaptured,!0),t.removeEvent(t.MouseTracker.captureElement,t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",r.pointermovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",r.pointerupcaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"touchmove",r.touchmovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"touchend",r.touchendcaptured,!0),r.activePointersLists[n].captureCount=0);for(n=0;n<i;n++)r.activePointersLists.pop()}function n(n){var r,i,o=gt[n.hash];if(!o.tracking){for(i=0;i<t.MouseTracker.subscribeEvents.length;i++)r=t.MouseTracker.subscribeEvents[i],t.addEvent(n.element,r,o[r],!1);e(n),o.tracking=!0}}function r(n){var r,i,o=gt[n.hash];if(o.tracking){for(i=0;i<t.MouseTracker.subscribeEvents.length;i++)r=t.MouseTracker.subscribeEvents[i],t.removeEvent(n.element,r,o[r],!1);e(n),o.tracking=!1}}function i(e,n){var r=gt[e.hash];if("pointerevent"===n)return{upName:t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:r.pointerupcaptured,moveName:t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:r.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:r.mouseupcaptured,moveName:"mousemove",moveHandler:r.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:r.touchendcaptured,moveName:"touchmove",moveHandler:r.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function o(e,n,r){var o,s=e.getActivePointersListByType(n);s.captureCount+=r||1,1===s.captureCount&&(t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?e.element.setCapture(!0):(o=i(e,t.MouseTracker.havePointerEvents?"pointerevent":n),mt&&ft(window.top)&&t.addEvent(window.top,o.upName,o.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,o.upName,o.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,o.moveName,o.moveHandler,!0)))}function s(e,n,r){var o,s=e.getActivePointersListByType(n);s.captureCount-=r||1,0===s.captureCount&&(t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?e.element.releaseCapture():(o=i(e,t.MouseTracker.havePointerEvents?"pointerevent":n),mt&&ft(window.top)&&t.removeEvent(window.top,o.upName,o.upHandler,!0),t.removeEvent(t.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),t.removeEvent(t.MouseTracker.captureElement,o.upName,o.upHandler,!0)))}function a(e){var n;if(t.MouseTracker.unprefixedPointerEvents)n=e.pointerType;else switch(e.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function u(e){return t.getMousePosition(e)}function l(t,e){return c(u(t),e)}function c(e,n){var r=t.getElementOffset(n);return e.minus(r)}function h(e,n){return new t.Point((e.x+n.x)/2,(e.y+n.y)/2)}function p(e,n){e.clickHandler&&t.cancelEvent(n)}function f(e,n){e.dblClickHandler&&t.cancelEvent(n)}function d(e,n){e.keyDownHandler&&(n=t.getEvent(n),e.keyDownHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})||t.cancelEvent(n))}function g(e,n){e.keyUpHandler&&(n=t.getEvent(n),e.keyUpHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})||t.cancelEvent(n))}function m(e,n){e.keyHandler&&(n=t.getEvent(n),e.keyHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})||t.cancelEvent(n))}function v(e,n){e.focusHandler&&(n=t.getEvent(n),!1===e.focusHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n))}function y(e,n){e.blurHandler&&(n=t.getEvent(n),!1===e.blurHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n))}function w(t,e){b(t,e,e)}function x(e,n){n=t.getEvent(n);var r={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==t.MouseTracker.wheelEventName?r.deltaY=-n.wheelDelta/t.DEFAULT_SETTINGS.pixelsPerWheelLine:r.deltaY=n.detail,b(e,r,n)}function b(e,n,r){var i=0;i=n.deltaY<0?1:-1,e.scrollHandler&&!1===e.scrollHandler({eventSource:e,pointerType:"mouse",position:l(n,e.element),scroll:i,shift:n.shiftKey,isTouchEvent:!1,originalEvent:r,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(r)}function E(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}function _(e,n){n=t.getEvent(n),S(e,n)}function T(e,n){n=t.getEvent(n),n.currentTarget===n.relatedTarget||E(n.currentTarget,n.relatedTarget)||S(e,n)}function S(e,n){st(e,n,[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:t.now()}])}function C(e,n){n=t.getEvent(n),P(e,n)}function O(e,n){n=t.getEvent(n),n.currentTarget===n.relatedTarget||E(n.currentTarget,n.relatedTarget)||P(e,n)}function P(e,n){at(e,n,[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:t.now()}])}function I(e){return t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?1===e?0:2===e?2:4===e?1:-1:e}function R(e,n){var r;n=t.getEvent(n),r={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:t.now()},ut(e,n,[r],I(n.button))&&(t.stopEvent(n),o(e,"mouse")),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler)&&t.cancelEvent(n)}function A(t,e){N(t,e)}function M(e,n){N(e,n),t.stopEvent(n)}function N(e,n){var r;n=t.getEvent(n),r={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:t.now()},lt(e,n,[r],I(n.button))&&s(e,"mouse")}function F(t,e){k(t,e)}function L(e,n){k(e,n),t.stopEvent(n)}function k(e,n){var r;n=t.getEvent(n),r={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:u(n),currentTime:t.now()},ct(e,n,[r])}function D(t,e,n){var r,i=n.getLength(),o=[];if("touch"===n.type||n.contacts>0){for(r=0;r<i;r++)o.push(n.getByIndex(r));o.length>0&&(lt(t,e,o,0),n.captureCount=1,s(t,n.type),at(t,e,o))}}function B(e,n){var r,i,s,a,l=n.changedTouches.length,c=[],h=e.getActivePointersListByType("touch");for(r=t.now(),h.getLength()>n.touches.length-l&&(t.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),D(e,n,h)),i=0;i<l;i++)c.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:u(n.changedTouches[i]),currentTime:r});for(st(e,n,c),i=0;i<dt.length;i++)if(dt[i]!==e&&dt[i].isTracking()&&E(dt[i].element,e.element)){for(a=[],s=0;s<l;s++)a.push({id:n.changedTouches[s].identifier,type:"touch",currentPos:u(n.changedTouches[s]),currentTime:r});st(dt[i],n,a)}ut(e,n,c,0)&&(t.stopEvent(n),o(e,"touch",l)),t.cancelEvent(n)}function j(t,e){z(t,e)}function H(e,n){z(e,n),t.stopEvent(n)}function z(e,n){var r,i,o,a,l=n.changedTouches.length,c=[];for(r=t.now(),i=0;i<l;i++)c.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:u(n.changedTouches[i]),currentTime:r});for(lt(e,n,c,0)&&s(e,"touch",l),at(e,n,c),i=0;i<dt.length;i++)if(dt[i]!==e&&dt[i].isTracking()&&E(dt[i].element,e.element)){for(a=[],o=0;o<l;o++)a.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:u(n.changedTouches[o]),currentTime:r});at(dt[i],n,a)}t.cancelEvent(n)}function U(t,e){G(t,e)}function V(e,n){G(e,n),t.stopEvent(n)}function G(e,n){var r,i=n.changedTouches.length,o=[];for(r=0;r<i;r++)o.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:u(n.changedTouches[r]),currentTime:t.now()});ct(e,n,o),t.cancelEvent(n)}function W(t,e){D(t,e,t.getActivePointersListByType("touch"))}function q(t,e){return e.stopPropagation(),e.preventDefault(),!1}function $(t,e){return e.stopPropagation(),e.preventDefault(),!1}function Y(e,n){var r;n.currentTarget===n.relatedTarget||E(n.currentTarget,n.relatedTarget)||(r={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:t.now()},st(e,n,[r]))}function X(e,n){var r;n.currentTarget===n.relatedTarget||E(n.currentTarget,n.relatedTarget)||(r={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:t.now()},at(e,n,[r]))}function Z(e,n){var r;r={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:t.now()},ut(e,n,[r],n.button)&&(t.stopEvent(n),o(e,r.type)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.cancelEvent(n)}function K(t,e){J(t,e)}function Q(e,n){e.getActivePointersListByType(a(n)).getById(n.pointerId)&&J(e,n),t.stopEvent(n)}function J(e,n){var r;r={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:t.now()},lt(e,n,[r],n.button)&&s(e,r.type)}function tt(t,e){nt(t,e)}function et(e,n){e.getActivePointersListByType(a(n)).getById(n.pointerId)&&nt(e,n),t.stopEvent(n)}function nt(e,n){var r;r={id:n.pointerId,type:a(n),isPrimary:n.isPrimary,currentPos:u(n),currentTime:t.now()},ct(e,n,[r])}function rt(t,e){var n;n={id:e.pointerId,type:a(e)},ht(t,e,[n])}function it(t,e){return e.hasOwnProperty("isPrimary")||(0===t.getLength()?e.isPrimary=!0:e.isPrimary=!1),e.speed=0,e.direction=0,e.contactPos=e.currentPos,e.contactTime=e.currentTime,e.lastPos=e.currentPos,e.lastTime=e.currentTime,t.add(e)}function ot(t,e){var n,r;return t.getById(e.id)?(n=t.removeById(e.id),e.hasOwnProperty("isPrimary")||(r=t.getPrimary())||(r=t.getByIndex(0))&&(r.isPrimary=!0)):n=t.getLength(),n}function st(e,n,r){var i,o,s,a=e.getActivePointersListByType(r[0].type),u=r.length;for(i=0;i<u;i++)o=r[i],s=a.getById(o.id),s?(s.insideElement=!0,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime,o=s):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,it(a,o)),e.enterHandler&&!1===e.enterHandler({eventSource:e,pointerType:o.type,position:c(o.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:o.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)}function at(e,n,r){var i,o,s,a=e.getActivePointersListByType(r[0].type),u=r.length;for(i=0;i<u;i++)o=r[i],s=a.getById(o.id),s&&(s.captured?(s.insideElement=!1,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):ot(a,s),o=s),e.exitHandler&&!1===e.exitHandler({eventSource:e,pointerType:o.type,position:c(o.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:!!s&&s.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)}function ut(e,n,r,i){var o,s,a,u=gt[e.hash],l=e.getActivePointersListByType(r[0].type),p=r.length;void 0!==n.buttons?l.buttons=n.buttons:t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?0===i?l.buttons+=1:1===i?l.buttons+=4:2===i?l.buttons+=2:3===i?l.buttons+=8:4===i?l.buttons+=16:5===i&&(l.buttons+=32):0===i?l.buttons|=1:1===i?l.buttons|=4:2===i?l.buttons|=2:3===i?l.buttons|=8:4===i?l.buttons|=16:5===i&&(l.buttons|=32);var f=e.getActivePointersListsExceptType(r[0].type);for(o=0;o<f.length;o++)D(e,n,f[o]);if(0!==i)return e.nonPrimaryPressHandler&&!1===e.nonPrimaryPressHandler({eventSource:e,pointerType:r[0].type,position:c(r[0].currentPos,e.element),button:i,buttons:l.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),!1;for(o=0;o<p;o++)s=r[o],a=l.getById(s.id),a?(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,a.contactPos=s.currentPos,a.contactTime=s.currentTime,a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=s.currentPos,a.currentTime=s.currentTime,s=a):(s.captured=!0,s.insideElementPressed=!0,s.insideElement=!0,it(l,s)),l.addContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(e,s),1===l.contacts?e.pressHandler&&!1===e.pressHandler({eventSource:e,pointerType:s.type,position:c(s.contactPos,e.element),buttons:l.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n):2===l.contacts&&e.pinchHandler&&"touch"===s.type&&(u.pinchGPoints=l.asArray(),u.lastPinchDist=u.currentPinchDist=u.pinchGPoints[0].currentPos.distanceTo(u.pinchGPoints[1].currentPos),u.lastPinchCenter=u.currentPinchCenter=h(u.pinchGPoints[0].currentPos,u.pinchGPoints[1].currentPos));return!0}function lt(e,n,r,i){var o,s,a,u,l,p,f=gt[e.hash],d=e.getActivePointersListByType(r[0].type),g=r.length,m=!1,v=!1;if(void 0!==n.buttons?d.buttons=n.buttons:t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?0===i?d.buttons-=1:1===i?d.buttons-=4:2===i?d.buttons-=2:3===i?d.buttons-=8:4===i?d.buttons-=16:5===i&&(d.buttons-=32):0===i?d.buttons^=-2:1===i?d.buttons^=-5:2===i?d.buttons^=-3:3===i?d.buttons^=-9:4===i?d.buttons^=-17:5===i&&(d.buttons^=-33),0!==i){e.nonPrimaryReleaseHandler&&!1===e.nonPrimaryReleaseHandler({eventSource:e,pointerType:r[0].type,position:c(r[0].currentPos,e.element),button:i,buttons:d.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n);return D(e,n,e.getActivePointersListByType("mouse")),!1}for(a=0;a<g;a++)u=r[a],(l=d.getById(u.id))&&(l.captured&&(l.captured=!1,m=!0,v=!0),l.lastPos=l.currentPos,l.lastTime=l.currentTime,l.currentPos=u.currentPos,l.currentTime=u.currentTime,l.insideElement||ot(d,l),o=l.currentPos,s=l.currentTime,v?(d.removeContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(e,l),0===d.contacts?(e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:l.type,position:c(o,e.element),buttons:d.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),e.dragEndHandler&&!l.currentPos.equals(l.contactPos)&&!1===e.dragEndHandler({eventSource:e,pointerType:l.type,position:c(l.currentPos,e.element),speed:l.speed,direction:l.direction,shift:n.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),(e.clickHandler||e.dblClickHandler)&&l.insideElement&&(p=s-l.contactTime<=e.clickTimeThreshold&&l.contactPos.distanceTo(o)<=e.clickDistThreshold,e.clickHandler&&!1===e.clickHandler({eventSource:e,pointerType:l.type,position:c(l.currentPos,e.element),quick:p,shift:n.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),e.dblClickHandler&&p&&(d.clicks++,1===d.clicks?(f.lastClickPos=o,f.dblClickTimeOut=setTimeout(function(){d.clicks=0},e.dblClickTimeThreshold)):2===d.clicks&&(clearTimeout(f.dblClickTimeOut),d.clicks=0,f.lastClickPos.distanceTo(o)<=e.dblClickDistThreshold&&!1===e.dblClickHandler({eventSource:e,pointerType:l.type,position:c(l.currentPos,e.element),shift:n.shiftKey,isTouchEvent:"touch"===l.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),f.lastClickPos=null)))):2===d.contacts&&e.pinchHandler&&"touch"===l.type&&(f.pinchGPoints=d.asArray(),f.lastPinchDist=f.currentPinchDist=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),f.lastPinchCenter=f.currentPinchCenter=h(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos))):e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:l.type,position:c(o,e.element),buttons:d.buttons,insideElementPressed:l.insideElementPressed,insideElementReleased:l.insideElement,isTouchEvent:"touch"===l.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n));return m}function ct(e,n,r){var i,o,s,a,u,l=gt[e.hash],p=e.getActivePointersListByType(r[0].type),f=r.length;for(void 0!==n.buttons&&(p.buttons=n.buttons),i=0;i<f;i++)o=r[i],s=p.getById(o.id),s?(o.hasOwnProperty("isPrimary")&&(s.isPrimary=o.isPrimary),s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,it(p,o));e.stopHandler&&"mouse"===r[0].type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout(function(){pt(e,n,r[0].type)},e.stopDelay)),0===p.contacts?e.moveHandler&&!1===e.moveHandler({eventSource:e,pointerType:r[0].type,position:c(r[0].currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n):1===p.contacts?(e.moveHandler&&(s=p.asArray()[0],!1===e.moveHandler({eventSource:e,pointerType:s.type,position:c(s.currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)),e.dragHandler&&(s=p.asArray()[0],u=s.currentPos.minus(s.lastPos),!1===e.dragHandler({eventSource:e,pointerType:s.type,position:c(s.currentPos,e.element),buttons:p.buttons,delta:u,speed:s.speed,direction:s.direction,shift:n.shiftKey,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n))):2===p.contacts&&(e.moveHandler&&(a=p.asArray(),!1===e.moveHandler({eventSource:e,pointerType:a[0].type,position:c(h(a[0].currentPos,a[1].currentPos),e.element),buttons:p.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)),e.pinchHandler&&"touch"===r[0].type&&(u=l.pinchGPoints[0].currentPos.distanceTo(l.pinchGPoints[1].currentPos))!=l.currentPinchDist&&(l.lastPinchDist=l.currentPinchDist,l.currentPinchDist=u,l.lastPinchCenter=l.currentPinchCenter,l.currentPinchCenter=h(l.pinchGPoints[0].currentPos,l.pinchGPoints[1].currentPos),!1===e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:l.pinchGPoints,lastCenter:c(l.lastPinchCenter,e.element),center:c(l.currentPinchCenter,e.element),lastDistance:l.lastPinchDist,distance:l.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)))}function ht(t,e,n){lt(t,e,n,0),at(t,e,n)}function pt(t,e,n){t.stopHandler&&t.stopHandler({eventSource:t,pointerType:n,position:l(e,t.element),buttons:t.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:e,preventDefaultAction:!1,userData:t.userData})}function ft(t){try{return t.addEventListener&&t.removeEventListener}catch(t){return!1}}var dt=[],gt={};t.MouseTracker=function(e){dt.push(this);var n=arguments;t.isPlainObject(e)||(e={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=e.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=e.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=e.userData||null,this.stopDelay=e.stopDelay||50,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.nonPrimaryPressHandler=e.nonPrimaryPressHandler||null,this.releaseHandler=e.releaseHandler||null,this.nonPrimaryReleaseHandler=e.nonPrimaryReleaseHandler||null,this.moveHandler=e.moveHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dblClickHandler=e.dblClickHandler||null,this.dragHandler=e.dragHandler||null,this.dragEndHandler=e.dragEndHandler||null,this.pinchHandler=e.pinchHandler||null,this.stopHandler=e.stopHandler||null,this.keyDownHandler=e.keyDownHandler||null,this.keyUpHandler=e.keyUpHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var r=this;gt[this.hash]={click:function(t){p(r,t)},dblclick:function(t){f(r,t)},keydown:function(t){d(r,t)},keyup:function(t){g(r,t)},keypress:function(t){m(r,t)},focus:function(t){v(r,t)},blur:function(t){y(r,t)},wheel:function(t){w(r,t)},mousewheel:function(t){x(r,t)},DOMMouseScroll:function(t){x(r,t)},MozMousePixelScroll:function(t){x(r,t)},mouseenter:function(t){_(r,t)},mouseleave:function(t){C(r,t)},mouseover:function(t){T(r,t)},mouseout:function(t){O(r,t)},mousedown:function(t){R(r,t)},mouseup:function(t){A(r,t)},mouseupcaptured:function(t){M(r,t)},mousemove:function(t){F(r,t)},mousemovecaptured:function(t){L(r,t)},touchstart:function(t){B(r,t)},touchend:function(t){j(r,t)},touchendcaptured:function(t){H(r,t)},touchmove:function(t){U(r,t)},touchmovecaptured:function(t){V(r,t)},touchcancel:function(t){W(r,t)},gesturestart:function(t){q(r,t)},gesturechange:function(t){$(r,t)},pointerover:function(t){Y(r,t)},MSPointerOver:function(t){Y(r,t)},pointerout:function(t){X(r,t)},MSPointerOut:function(t){X(r,t)},pointerdown:function(t){Z(r,t)},MSPointerDown:function(t){Z(r,t)},pointerup:function(t){K(r,t)},MSPointerUp:function(t){K(r,t)},pointermove:function(t){tt(r,t)},MSPointerMove:function(t){tt(r,t)},pointercancel:function(t){rt(r,t)},MSPointerCancel:function(t){rt(r,t)},pointerupcaptured:function(t){Q(r,t)},pointermovecaptured:function(t){et(r,t)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},e.startDisabled||this.setTracking(!0)},t.MouseTracker.prototype={destroy:function(){var t;for(r(this),this.element=null,t=0;t<dt.length;t++)if(dt[t]===this){dt.splice(t,1);break}gt[this.hash]=null,delete gt[this.hash]},isTracking:function(){return gt[this.hash].tracking},setTracking:function(t){return t?n(this):r(this),this},getActivePointersListsExceptType:function(t){for(var e=gt[this.hash],n=[],r=0;r<e.activePointersLists.length;++r)e.activePointersLists[r].type!==t&&n.push(e.activePointersLists[r]);return n},getActivePointersListByType:function(e){var n,r,i=gt[this.hash],o=i.activePointersLists.length;for(n=0;n<o;n++)if(i.activePointersLists[n].type===e)return i.activePointersLists[n];return r=new t.MouseTracker.GesturePointList(e),i.activePointersLists.push(r),r},getActivePointerCount:function(){var t,e=gt[this.hash],n=e.activePointersLists.length,r=0;for(t=0;t<n;t++)r+=e.activePointersLists[t].getLength();return r},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},t.MouseTracker.resetAllMouseTrackers=function(){for(var t=0;t<dt.length;t++)dt[t].isTracking()&&(dt[t].setTracking(!1),dt[t].setTracking(!0))},t.MouseTracker.gesturePointVelocityTracker=function(){var e=[],n=0,r=0,i=function(t,e){return t.hash.toString()+e.type+e.id.toString()},o=function(){var n,i,o,s,a,u,l=e.length,c=t.now();for(s=c-r,r=c,n=0;n<l;n++)i=e[n],o=i.gPoint,o.direction=Math.atan2(o.currentPos.y-i.lastPos.y,o.currentPos.x-i.lastPos.x),a=i.lastPos.distanceTo(o.currentPos),i.lastPos=o.currentPos,u=1e3*a/(s+1),o.speed=.75*u+.25*o.speed};return{addPoint:function(s,a){var u=i(s,a);e.push({guid:u,gPoint:a,lastPos:a.currentPos}),1===e.length&&(r=t.now(),n=window.setInterval(o,50))},removePoint:function(t,r){var o,s=i(t,r),a=e.length;for(o=0;o<a;o++)if(e[o].guid===s){e.splice(o,1),0===--a&&window.clearInterval(n);break}}}}(),t.MouseTracker.captureElement=document,t.MouseTracker.wheelEventName=t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t.MouseTracker.supportsMouseCapture=function(){var e=document.createElement("div");return t.isFunction(e.setCapture)&&t.isFunction(e.releaseCapture)}(),t.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",t.MouseTracker.wheelEventName],"DOMMouseScroll"==t.MouseTracker.wheelEventName&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||t.Browser.vendor!==t.BROWSERS.IE)?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?t.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:t.MouseTracker.maxTouchPoints=0,t.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),t.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?t.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:t.MouseTracker.maxTouchPoints=0,t.MouseTracker.haveMouseEnter=!1):(t.MouseTracker.havePointerEvents=!1,t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?(t.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),t.MouseTracker.haveMouseEnter=!0):(t.MouseTracker.subscribeEvents.push("mouseover","mouseout"),t.MouseTracker.haveMouseEnter=!1),t.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.maxTouchPoints=10),t.MouseTracker.GesturePointList=function(t){this._gPoints=[],this.type=t,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(t){return this._gPoints.push(t)},removeById:function(t){var e,n=this._gPoints.length;for(e=0;e<n;e++)if(this._gPoints[e].id===t){this._gPoints.splice(e,1);break}return this._gPoints.length},getByIndex:function(t){return t<this._gPoints.length?this._gPoints[t]:null},getById:function(t){var e,n=this._gPoints.length;for(e=0;e<n;e++)if(this._gPoints[e].id===t)return this._gPoints[e];return null},getPrimary:function(t){var e,n=this._gPoints.length;for(e=0;e<n;e++)if(this._gPoints[e].isPrimary)return this._gPoints[e];return null},addContact:function(){++this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts<0&&(this.contacts=0)}};var mt=function(){try{return window.self!==window.top}catch(t){return!0}}()}(OpenSeadragon),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},t.Control=function(e,n,r){var i=e.parentNode;"number"==typeof n&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=void 0===n.attachToViewer||n.attachToViewer,this.autoFade=void 0===n.autoFade||n.autoFade,this.element=e,this.anchor=n.anchor,this.container=r,this.anchor==t.ControlAnchor.ABSOLUTE?(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==t.ControlAnchor.TOP_RIGHT||this.anchor==t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):i.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(e){this.wrapper.style.display=e?this.anchor==t.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(e){this.element[t.SIGNAL]&&t.Browser.vendor==t.BROWSERS.IE?t.setElementOpacity(this.element,e,!0):t.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),function(t){function e(t,e){var n,r=t.controls;for(n=r.length-1;n>=0;n--)if(r[n].element==e)return n;return-1}t.ControlDock=function(e){var n,r,i=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("div"),controls:[]},e),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),r=0;r<i.length;r++)n=i[r],this.controls[n]=t.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,r){n=t.getElement(n);var i=null;if(!(e(this,n)>=0)){switch(r.anchor){case t.ControlAnchor.TOP_RIGHT:i=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:i=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:i=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:i=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:i=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case t.ControlAnchor.NONE:i=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new t.Control(n,r,i)),n.style.display="inline-block"}},removeControl:function(n){n=t.getElement(n);var r=e(this,n);return r>=0&&(this.controls[r].destroy(),this.controls.splice(r,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;t>=0;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;e>=0;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),function(t){t.Placement=t.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(OpenSeadragon),function(t){function e(e){return e=t.getElement(e),new t.Point(0===e.clientWidth?1:e.clientWidth,0===e.clientHeight?1:e.clientHeight)}function n(e,n,r,i,o){function s(t,e){t.ready?i(t):(t.addHandler("ready",function(){i(t)}),t.addHandler("open-failed",function(t){o({message:t.message,source:e})}))}var a=e;if("string"==t.type(n))if(n.match(/^\s*<.*>\s*$/))n=t.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var u=t.parseJSON(n);n=u}catch(t){}setTimeout(function(){if("string"==t.type(n))n=new t.TileSource({url:n,crossOriginPolicy:void 0!==r.crossOriginPolicy?r.crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,ajaxHeaders:e.ajaxHeaders,useCanvas:e.useCanvas,success:function(t){i(t.tileSource)}}),n.addHandler("open-failed",function(t){o(t)});else if(t.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===r.crossOriginPolicy&&void 0===e.crossOriginPolicy||(n.crossOriginPolicy=void 0!==r.crossOriginPolicy?r.crossOriginPolicy:e.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=e.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=e.useCanvas),t.isFunction(n.getTileUrl)){var u=new t.TileSource(n);u.getTileUrl=n.getTileUrl,i(u)}else{var l=t.TileSource.determineType(a,n);if(!l)return void o({message:"Unable to load TileSource",source:n});var c=l.prototype.configure.apply(a,[n]);s(new l(c),n)}else s(n,n)})}function r(e,n){if(n instanceof t.Overlay)return n;var r=null;if(n.element)r=t.getElement(n.element);else{var i=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());r=t.getElement(n.id),r||(r=document.createElement("a"),r.href="#/overlay/"+i),r.id=i,t.addClass(r,n.className?n.className:"openseadragon-overlay")}var o=n.location,s=n.width,a=n.height;if(!o){var u=n.x,l=n.y;if(void 0!==n.px){var c=e.viewport.imageToViewportRectangle(new t.Rect(n.px,n.py,s||0,a||0));u=c.x,l=c.y,s=void 0!==s?c.width:void 0,a=void 0!==a?c.height:void 0}o=new t.Point(u,l)}var h=n.placement;return h&&"string"===t.type(h)&&(h=t.Placement[n.placement.toUpperCase()]),new t.Overlay({element:r,location:o,placement:h,onDraw:n.onDraw,checkResize:n.checkResize,width:s,height:a,rotationMode:n.rotationMode})}function i(t,e){var n;for(n=t.length-1;n>=0;n--)if(t[n].element===e)return n;return-1}function o(e,n){return t.requestAnimationFrame(function(){n(e)})}function s(e){t.requestAnimationFrame(function(){u(e)})}function a(e){e.autoHideControls&&(e.controlsShouldFade=!0,e.controlsFadeBeginTime=t.now()+e.controlsFadeDelay,window.setTimeout(function(){s(e)},e.controlsFadeDelay))}function u(e){var n,r,i,o;if(e.controlsShouldFade){for(n=t.now(),r=n-e.controlsFadeBeginTime,i=1-r/e.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),o=e.controls.length-1;o>=0;o--)e.controls[o].autoFade&&e.controls[o].setOpacity(i);i>0&&s(e)}}function l(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;e>=0;e--)t.controls[e].setOpacity(1)}function c(){l(this)}function h(){a(this)}function p(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-40))),this.viewport.applyConstraints(),!1;case 40:return e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,40))),this.viewport.applyConstraints(),!1;case 37:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-40,0))),this.viewport.applyConstraints(),!1;case 39:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function f(e){if(e.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-40))),this.viewport.applyConstraints(),!1;case 115:case 83:return e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,40))),this.viewport.applyConstraints(),!1;case 97:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-40,0))),this.viewport.applyConstraints(),!1;case 100:return this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(40,0))),this.viewport.applyConstraints(),!1;default:return!0}}function d(t){var e;document.activeElement==this.canvas||this.canvas.focus();var n={tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};this.raiseEvent("canvas-click",n),!n.preventDefaultAction&&this.viewport&&t.quick&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.clickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints()))}function g(t){var e;!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.dblClickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-double-click",{tracker:t.eventSource,position:t.position,shift:t.shift,originalEvent:t.originalEvent})}function m(t){var e,n={tracker:t.eventSource,position:t.position,delta:t.delta,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(e=this.gestureSettingsByDeviceType(t.pointerType),this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.constrainDuringPan){var r=this.viewport.deltaPointsFromPixels(t.delta.negate());this.viewport.centerSpringX.target.value+=r.x,this.viewport.centerSpringY.target.value+=r.y;var i=this.viewport.getBounds(),o=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=r.x,this.viewport.centerSpringY.target.value-=r.y,i.x!=o.x&&(t.delta.x=0),i.y!=o.y&&(t.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta.negate()),e.flickEnabled&&!this.constrainDuringPan)}}function v(e){if(!e.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(e.pointerType);if(n.flickEnabled&&e.speed>=n.flickMinSpeed){var r=0;this.panHorizontal&&(r=n.flickMomentum*e.speed*Math.cos(e.direction));var i=0;this.panVertical&&(i=n.flickMomentum*e.speed*Math.sin(e.direction));var o=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),s=this.viewport.pointFromPixel(new t.Point(o.x-r,o.y-i));this.viewport.panTo(s,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:e.eventSource,position:e.position,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent})}function y(t){this.raiseEvent("canvas-enter",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function w(e){window.location!=window.parent.location&&t.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function x(t){this.raiseEvent("canvas-press",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function b(t){this.raiseEvent("canvas-release",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function E(t){this.raiseEvent("canvas-nonprimary-press",{tracker:t.eventSource,position:t.position,pointerType:t.pointerType,button:t.button,buttons:t.buttons,originalEvent:t.originalEvent})}function _(t){this.raiseEvent("canvas-nonprimary-release",{tracker:t.eventSource,position:t.position,pointerType:t.pointerType,button:t.button,buttons:t.buttons,originalEvent:t.originalEvent})}function T(t){var e,n,r,i;if(!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.pinchToZoom&&(n=this.viewport.pointFromPixel(t.center,!0),r=this.viewport.pointFromPixel(t.lastCenter,!0),i=r.minus(n),this.panHorizontal||(i.x=0),this.panVertical||(i.y=0),this.viewport.zoomBy(t.distance/t.lastDistance,n,!0),this.viewport.panBy(i,!0),this.viewport.applyConstraints()),e.pinchRotate)){var o=Math.atan2(t.gesturePoints[0].currentPos.y-t.gesturePoints[1].currentPos.y,t.gesturePoints[0].currentPos.x-t.gesturePoints[1].currentPos.x),s=Math.atan2(t.gesturePoints[0].lastPos.y-t.gesturePoints[1].lastPos.y,t.gesturePoints[0].lastPos.x-t.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-s)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:t.eventSource,gesturePoints:t.gesturePoints,lastCenter:t.lastCenter,center:t.center,lastDistance:t.lastDistance,distance:t.distance,shift:t.shift,originalEvent:t.originalEvent}),!1}function S(e){var n,r,i;if(i=t.now(),i-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=i,!e.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(e.pointerType),n.scrollToZoom&&(r=Math.pow(this.zoomPerScroll,e.scroll),this.viewport.zoomBy(r,this.viewport.pointFromPixel(e.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),n&&n.scrollToZoom)return!1}else if((n=this.gestureSettingsByDeviceType(e.pointerType))&&n.scrollToZoom)return!1}function C(t){q[this.hash].mouseInside=!0,l(this),this.raiseEvent("container-enter",{tracker:t.eventSource,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function O(t){t.pointers<1&&(q[this.hash].mouseInside=!1,q[this.hash].animating||a(this)),this.raiseEvent("container-exit",{tracker:t.eventSource,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function P(t){I(t),t.isOpen()?t._updateRequestId=o(t,P):t._updateRequestId=!1}function I(t){if(!t._opening){if(t.autoResize){var n=e(t.container),r=q[t.hash].prevContainerSize;if(!n.equals(r)){var i=t.viewport;if(t.preserveImageSizeOnResize){var o=r.x/n.x,s=i.getZoom()*o,u=i.getCenter();i.resize(n,!1),i.zoomTo(s,null,!0),i.panTo(u,!0)}else{var c=i.getBounds();i.resize(n,!0),i.fitBoundsWithConstraints(c,!0)}q[t.hash].prevContainerSize=n,q[t.hash].forceRedraw=!0}}var h=t.viewport.update(),p=t.world.update()||h;h&&t.raiseEvent("viewport-change"),t.referenceStrip&&(p=t.referenceStrip.update(t.viewport)||p),!q[t.hash].animating&&p&&(t.raiseEvent("animation-start"),l(t)),(p||q[t.hash].forceRedraw||t.world.needsDraw())&&(R(t),t._drawOverlays(),t.navigator&&t.navigator.update(t.viewport),q[t.hash].forceRedraw=!1,p&&t.raiseEvent("animation")),q[t.hash].animating&&!p&&(t.raiseEvent("animation-finish"),q[t.hash].mouseInside||a(t)),q[t.hash].animating=p}}function R(t){t.imageLoader.clear(),t.drawer.clear(),t.world.draw(),t.raiseEvent("update-viewport",{})}function A(t,e){return t?t+e:e}function M(){q[this.hash].lastZoomTime=t.now(),q[this.hash].zoomFactor=this.zoomPerSecond,q[this.hash].zooming=!0,L(this)}function N(){q[this.hash].lastZoomTime=t.now(),q[this.hash].zoomFactor=1/this.zoomPerSecond,q[this.hash].zooming=!0,L(this)}function F(){q[this.hash].zooming=!1}function L(e){t.requestAnimationFrame(t.delegate(e,k))}function k(){var e,n,r;q[this.hash].zooming&&this.viewport&&(e=t.now(),n=e-q[this.hash].lastZoomTime,r=Math.pow(q[this.hash].zoomFactor,n/1e3),this.viewport.zoomBy(r),this.viewport.applyConstraints(),q[this.hash].lastZoomTime=e,L(this))}function D(){this.viewport&&(q[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function B(){this.viewport&&(q[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function j(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function H(){this.viewport&&this.viewport.goHome()}function z(){this.isFullPage()&&!t.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function U(){if(this.viewport){var t=this.viewport.getRotation();0===t?t=270:t-=90,this.viewport.setRotation(t)}}function V(){if(this.viewport){var t=this.viewport.getRotation();270===t?t=0:t+=90,this.viewport.setRotation(t)}}function G(){var t=this._sequenceIndex-1;this.navPrevNextWrap&&t<0&&(t+=this.tileSources.length),this.goToPage(t)}function W(){var t=this._sequenceIndex+1;this.navPrevNextWrap&&t>=this.tileSources.length&&(t=0),this.goToPage(t)}var q={},$=1;t.Viewer=function(n){var r,i=arguments,s=this;if(t.isPlainObject(n)||(n={id:i[0],xmlPath:i.length>1?i[1]:void 0,prefixUrl:i.length>2?i[2]:void 0,controls:i.length>3?i[3]:void 0,overlays:i.length>4?i[4]:void 0}),n.config&&(t.extend(!0,n,n.config),delete n.config),t.extend(!0,this,{id:n.id,hash:n.hash||$++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},t.DEFAULT_SETTINGS,n),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==q[this.hash]&&t.console.warn("Hash "+this.hash+" has already been used."),q[this.hash]={fsBoundsDelta:new t.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=t.now(),t.EventSource.call(this),this.addHandler("open-failed",function(e){var n=t.getString("Errors.OpenFailed",e.eventSource,e.message);s._showMessage(n)}),t.ControlDock.call(this,n),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=t.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),t.setElementTouchActionNone(this.canvas),""!==n.tabIndex&&(this.canvas.tabIndex=void 0===n.tabIndex?0:n.tabIndex),this.container.className="openseadragon-container",function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new t.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:t.delegate(this,p),keyHandler:t.delegate(this,f),clickHandler:t.delegate(this,d),dblClickHandler:t.delegate(this,g),dragHandler:t.delegate(this,m),dragEndHandler:t.delegate(this,v),enterHandler:t.delegate(this,y),exitHandler:t.delegate(this,w),pressHandler:t.delegate(this,x),releaseHandler:t.delegate(this,b),nonPrimaryPressHandler:t.delegate(this,E),nonPrimaryReleaseHandler:t.delegate(this,_),scrollHandler:t.delegate(this,S),pinchHandler:t.delegate(this,T)}),this.outerTracker=new t.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:t.delegate(this,C),exitHandler:t.delegate(this,O)}),this.toolbar&&(this.toolbar=new t.ControlDock({element:this.toolbar})),this.bindStandardControls(),q[this.hash].prevContainerSize=e(this.container),this.world=new t.World({viewer:this}),this.world.addHandler("add-item",function(t){s.source=s.world.getItemAt(0).source,q[s.hash].forceRedraw=!0,s._updateRequestId||(s._updateRequestId=o(s,P))}),this.world.addHandler("remove-item",function(t){s.world.getItemCount()?s.source=s.world.getItemAt(0).source:s.source=null,q[s.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(t){s.viewport&&s.viewport._setContentBounds(s.world.getHomeBounds(),s.world.getContentFactor())}),this.world.addHandler("item-index-change",function(t){s.source=s.world.getItemAt(0).source}),this.viewport=new t.Viewport({containerSize:q[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new t.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:n.timeout}),this.tileCache=new t.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new t.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=t.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(r=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(r,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(r=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(r,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new t.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),r=0;r<this.customControls.length;r++)this.addControl(this.customControls[r].id,{anchor:this.customControls[r].anchor});t.requestAnimationFrame(function(){a(s)})},t.extend(t.Viewer.prototype,t.EventSource.prototype,t.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(e){return t.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(e)},openTileSource:function(e){return t.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(e)},open:function(e,n){var i=this;if(this.close(),e){if(this.sequenceMode&&t.isArray(e))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===n||isNaN(n)||(this.initialPage=n),this.tileSources=e,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),void this._updateSequenceButtons(this._sequenceIndex);if(t.isArray(e)||(e=[e]),e.length){this._opening=!0;for(var o,s=e.length,a=0,u=0,l=function(){if(a+u===s)if(a){!i._firstOpen&&i.preserveViewport||(i.viewport.goHome(!0),i.viewport.update()),i._firstOpen=!1;var t=e[0];if(t.tileSource&&(t=t.tileSource),i.overlays&&!i.preserveOverlays)for(var n=0;n<i.overlays.length;n++)i.currentOverlays[n]=r(i,i.overlays[n]);i._drawOverlays(),i._opening=!1,i.raiseEvent("open",{source:t})}else i._opening=!1,i.raiseEvent("open-failed",o)},c=0;c<e.length;c++)!function(e){t.isPlainObject(e)&&e.tileSource||(e={tileSource:e}),void 0!==e.index&&(t.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete e.index),void 0===e.collectionImmediately&&(e.collectionImmediately=!0);var n=e.success;e.success=function(t){if(a++,e.tileSource.overlays)for(var r=0;r<e.tileSource.overlays.length;r++)i.addOverlay(e.tileSource.overlays[r]);n&&n(t),l()};var r=e.error;e.error=function(t){u++,o||(o=t),r&&r(t),l()},i.addTiledImage(e)}(e[c]);return this}}},close:function(){return q[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),q[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(q[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(t.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),q[this.hash]=null,delete q[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this.outerTracker.setTracking(t),this.raiseEvent("mouse-enabled",{enabled:t}),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;t<this.controls.length;t++)e=e&&this.controls[t].isVisibile();return e},setControlsEnabled:function(t){return t?l(this):a(this),this.raiseEvent("controls-enabled",{enabled:t}),this},setDebugMode:function(t){for(var e=0;e<this.world.getItemCount();e++)this.world.getItemAt(e).debugMode=t;this.debugMode=t,this.forceRedraw()},isFullPage:function(){return q[this.hash].fullPage},setFullPage:function(e){var n,r,i=document.body,o=i.style,s=document.documentElement.style,a=this;if(e==this.isFullPage())return this;var u={fullPage:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",u),u.preventDefaultAction)return this;if(e){for(this.elementSize=t.getElementSize(this.element),this.pageScroll=t.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=o.margin,this.docMargin=s.margin,o.margin="0",s.margin="0",this.bodyPadding=o.padding,this.docPadding=s.padding,o.padding="0",s.padding="0",this.bodyWidth=o.width,this.docWidth=s.width,o.width="100%",s.width="100%",this.bodyHeight=o.height,this.docHeight=s.height,o.height="100%",s.height="100%",this.previousBody=[],q[this.hash].prevElementParent=this.element.parentNode,q[this.hash].prevNextSibling=this.element.nextSibling,q[this.hash].prevElementWidth=this.element.style.width,q[this.hash].prevElementHeight=this.element.style.height,n=i.childNodes.length,r=0;r<n;r++)this.previousBody.push(i.childNodes[0]),i.removeChild(i.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,i.appendChild(this.toolbar.element),t.addClass(this.toolbar.element,"fullpage")),t.addClass(this.element,"fullpage"),i.appendChild(this.element),this.element.style.height=t.getWindowSize().y+"px",this.element.style.width=t.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=t.getElementSize(this.element).y-t.getElementSize(this.toolbar.element).y+"px"),q[this.hash].fullPage=!0,t.delegate(this,C)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,o.margin=this.bodyMargin,s.margin=this.docMargin,o.padding=this.bodyPadding,s.padding=this.docPadding,o.width=this.bodyWidth,s.width=this.docWidth,o.height=this.bodyHeight,s.height=this.docHeight,i.removeChild(this.element),n=this.previousBody.length,r=0;r<n;r++)i.appendChild(this.previousBody.shift());t.removeClass(this.element,"fullpage"),q[this.hash].prevElementParent.insertBefore(this.element,q[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(i.removeChild(this.toolbar.element),t.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=q[this.hash].prevElementWidth,this.element.style.height=q[this.hash].prevElementHeight;var l=0,c=function(){t.setPageScroll(a.pageScroll);var e=t.getPageScroll();++l<10&&(e.x!==a.pageScroll.x||e.y!==a.pageScroll.y)&&t.requestAnimationFrame(c)};t.requestAnimationFrame(c),q[this.hash].fullPage=!1,t.delegate(this,O)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:e}),this},setFullScreen:function(e){var n=this;if(!t.supportsFullScreen)return this.setFullPage(e);if(t.isFullScreen()===e)return this;var r={fullScreen:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",r),r.preventDefaultAction)return this;if(e){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var i=function(){var e=t.isFullScreen();e||(t.removeEvent(document,t.fullScreenEventName,i),t.removeEvent(document,t.fullScreenErrorEventName,i),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&n.navigator.update(n.viewport),n.raiseEvent("full-screen",{fullScreen:e})};t.addEvent(document,t.fullScreenEventName,i),t.addEvent(document,t.fullScreenErrorEventName,i),t.requestFullScreen(document.body)}else t.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this.raiseEvent("visible",{visible:t}),this},addTiledImage:function(e){function r(t){for(var n=0;n<s._loadQueue.length;n++)if(s._loadQueue[n]===a){s._loadQueue.splice(n,1);break}0===s._loadQueue.length&&i(a),s.raiseEvent("add-item-failed",t),e.error&&e.error(t)}function i(t){s.collectionMode&&(s.world.arrange({immediately:t.options.collectionImmediately,rows:s.collectionRows,columns:s.collectionColumns,layout:s.collectionLayout,tileSize:s.collectionTileSize,tileMargin:s.collectionTileMargin}),s.world.setAutoRefigureSizes(!0))}function o(){for(var e,n,r;s._loadQueue.length&&(e=s._loadQueue[0],e.tileSource);){if(s._loadQueue.splice(0,1),e.options.replace){var o=s.world.getIndexOfItem(e.options.replaceItem);-1!=o&&(e.options.index=o),s.world.removeItem(e.options.replaceItem)}n=new t.TiledImage({viewer:s,source:e.tileSource,viewport:s.viewport,drawer:s.drawer,tileCache:s.tileCache,imageLoader:s.imageLoader,x:e.options.x,y:e.options.y,width:e.options.width,height:e.options.height,fitBounds:e.options.fitBounds,fitBoundsPlacement:e.options.fitBoundsPlacement,clip:e.options.clip,placeholderFillStyle:e.options.placeholderFillStyle,opacity:e.options.opacity,preload:e.options.preload,degrees:e.options.degrees,compositeOperation:e.options.compositeOperation,springStiffness:s.springStiffness,animationTime:s.animationTime,minZoomImageRatio:s.minZoomImageRatio,wrapHorizontal:s.wrapHorizontal,wrapVertical:s.wrapVertical,immediateRender:s.immediateRender,blendTime:s.blendTime,alwaysBlend:s.alwaysBlend,minPixelRatio:s.minPixelRatio,smoothTileEdgesMinZoom:s.smoothTileEdgesMinZoom,iOSDevice:s.iOSDevice,crossOriginPolicy:e.options.crossOriginPolicy,ajaxWithCredentials:e.options.ajaxWithCredentials,loadTilesWithAjax:e.options.loadTilesWithAjax,ajaxHeaders:e.options.ajaxHeaders,debugMode:s.debugMode}),s.collectionMode&&s.world.setAutoRefigureSizes(!1),s.world.addItem(n,{index:e.options.index}),0===s._loadQueue.length&&i(e),1!==s.world.getItemCount()||s.preserveViewport||s.viewport.goHome(!0),s.navigator&&(r=t.extend({},e.options,{replace:!1,originalTiledImage:n,tileSource:e.tileSource}),s.navigator.addTiledImage(r)),e.options.success&&e.options.success({item:n})}}t.console.assert(e,"[Viewer.addTiledImage] options is required"),t.console.assert(e.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),t.console.assert(!e.replace||e.index>-1&&e.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var s=this;e.replace&&(e.replaceItem=s.world.getItemAt(e.index)),this._hideMessage(),void 0===e.placeholderFillStyle&&(e.placeholderFillStyle=this.placeholderFillStyle),void 0===e.opacity&&(e.opacity=this.opacity),void 0===e.preload&&(e.preload=this.preload),void 0===e.compositeOperation&&(e.compositeOperation=this.compositeOperation),void 0===e.crossOriginPolicy&&(e.crossOriginPolicy=void 0!==e.tileSource.crossOriginPolicy?e.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===e.ajaxWithCredentials&&(e.ajaxWithCredentials=this.ajaxWithCredentials),void 0===e.loadTilesWithAjax&&(e.loadTilesWithAjax=this.loadTilesWithAjax),void 0===e.ajaxHeaders||null===e.ajaxHeaders?e.ajaxHeaders=this.ajaxHeaders:t.isPlainObject(e.ajaxHeaders)&&t.isPlainObject(this.ajaxHeaders)&&(e.ajaxHeaders=t.extend({},this.ajaxHeaders,e.ajaxHeaders));var a={options:e};if(t.isArray(e.tileSource))return void setTimeout(function(){r({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:e.tileSource,options:e})});this._loadQueue.push(a),n(this,e.tileSource,e,function(t){a.tileSource=t,o()},function(t){t.options=e,r(t),o()})},addSimpleImage:function(e){t.console.assert(e,"[Viewer.addSimpleImage] options is required"),t.console.assert(e.url,"[Viewer.addSimpleImage] options.url is required");var n=t.extend({},e,{tileSource:{type:"image",url:e.url}});delete n.url,this.addTiledImage(n)},addLayer:function(e){var n=this;t.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var r=t.extend({},e,{success:function(t){n.raiseEvent("add-layer",{options:e,drawer:t.item})},error:function(t){n.raiseEvent("add-layer-failed",t)}});return this.addTiledImage(r),this},getLayerAtLevel:function(e){return t.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(e)},getLevelOfLayer:function(e){return t.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(e)},getLayersCount:function(){return t.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(e,n){return t.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(e,n)},removeLayer:function(e){return t.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(e)},forceRedraw:function(){return q[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var e=t.delegate(this,c),n=t.delegate(this,h),r=t.delegate(this,W),i=t.delegate(this,G),o=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new t.Button({element:this.previousButton?t.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.PreviousPage"),srcRest:A(this.prefixUrl,o.previous.REST),srcGroup:A(this.prefixUrl,o.previous.GROUP),srcHover:A(this.prefixUrl,o.previous.HOVER),srcDown:A(this.prefixUrl,o.previous.DOWN),onRelease:i,onFocus:e,onBlur:n}),this.nextButton=new t.Button({element:this.nextButton?t.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.NextPage"),srcRest:A(this.prefixUrl,o.next.REST),srcGroup:A(this.prefixUrl,o.next.GROUP),srcHover:A(this.prefixUrl,o.next.HOVER),srcDown:A(this.prefixUrl,o.next.DOWN),onRelease:r,onFocus:e,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new t.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:t.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var e=t.delegate(this,M),n=t.delegate(this,F),r=t.delegate(this,D),i=t.delegate(this,N),o=t.delegate(this,B),s=t.delegate(this,H),a=t.delegate(this,z),u=t.delegate(this,U),l=t.delegate(this,V),p=t.delegate(this,c),f=t.delegate(this,h),d=this.navImages,g=[],m=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(m=!1),this.showZoomControl&&(g.push(this.zoomInButton=new t.Button({element:this.zoomInButton?t.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomIn"),srcRest:A(this.prefixUrl,d.zoomIn.REST),srcGroup:A(this.prefixUrl,d.zoomIn.GROUP),srcHover:A(this.prefixUrl,d.zoomIn.HOVER),srcDown:A(this.prefixUrl,d.zoomIn.DOWN),onPress:e,onRelease:n,onClick:r,onEnter:e,onExit:n,onFocus:p,onBlur:f})),g.push(this.zoomOutButton=new t.Button({element:this.zoomOutButton?t.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomOut"),srcRest:A(this.prefixUrl,d.zoomOut.REST),srcGroup:A(this.prefixUrl,d.zoomOut.GROUP),srcHover:A(this.prefixUrl,d.zoomOut.HOVER),srcDown:A(this.prefixUrl,d.zoomOut.DOWN),onPress:i,onRelease:n,onClick:o,onEnter:i,onExit:n,onFocus:p,onBlur:f}))),this.showHomeControl&&g.push(this.homeButton=new t.Button({element:this.homeButton?t.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Home"),srcRest:A(this.prefixUrl,d.home.REST),srcGroup:A(this.prefixUrl,d.home.GROUP),srcHover:A(this.prefixUrl,d.home.HOVER),srcDown:A(this.prefixUrl,d.home.DOWN),onRelease:s,onFocus:p,onBlur:f})),this.showFullPageControl&&g.push(this.fullPageButton=new t.Button({element:this.fullPageButton?t.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.FullPage"),srcRest:A(this.prefixUrl,d.fullpage.REST),srcGroup:A(this.prefixUrl,d.fullpage.GROUP),srcHover:A(this.prefixUrl,d.fullpage.HOVER),srcDown:A(this.prefixUrl,d.fullpage.DOWN),onRelease:a,onFocus:p,onBlur:f})),this.showRotationControl&&(g.push(this.rotateLeftButton=new t.Button({element:this.rotateLeftButton?t.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateLeft"),srcRest:A(this.prefixUrl,d.rotateleft.REST),srcGroup:A(this.prefixUrl,d.rotateleft.GROUP),srcHover:A(this.prefixUrl,d.rotateleft.HOVER),srcDown:A(this.prefixUrl,d.rotateleft.DOWN),onRelease:u,onFocus:p,onBlur:f})),g.push(this.rotateRightButton=new t.Button({element:this.rotateRightButton?t.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateRight"),srcRest:A(this.prefixUrl,d.rotateright.REST),srcGroup:A(this.prefixUrl,d.rotateright.GROUP),srcHover:A(this.prefixUrl,d.rotateright.HOVER),srcDown:A(this.prefixUrl,d.rotateright.DOWN),onRelease:l,onFocus:p,onBlur:f}))),m&&(this.buttons=new t.ButtonGroup({buttons:g,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",t.delegate(this,j)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(t){return this.tileSources&&t>=0&&t<this.tileSources.length&&(this.raiseEvent("page",{page:t}),this._sequenceIndex=t,this._updateSequenceButtons(t),this.open(this.tileSources[t]),this.referenceStrip&&this.referenceStrip.setFocus(t)),this},addOverlay:function(e,n,o,s){var a;if(a=t.isPlainObject(e)?e:{element:e,location:n,placement:o,onDraw:s},e=t.getElement(a.element),i(this.currentOverlays,e)>=0)return this;var u=r(this,a);return this.currentOverlays.push(u),u.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:e,location:a.location,placement:a.placement}),this},updateOverlay:function(e,n,r){var o;return e=t.getElement(e),o=i(this.currentOverlays,e),o>=0&&(this.currentOverlays[o].update(n,r),q[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:e,location:n,placement:r})),this},removeOverlay:function(e){var n;return e=t.getElement(e),n=i(this.currentOverlays,e),n>=0&&(this.currentOverlays[n].destroy(),this.currentOverlays.splice(n,1),q[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:e})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return q[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(e){var n;return e=t.getElement(e),n=i(this.currentOverlays,e),n>=0?this.currentOverlays[n]:null},_updateSequenceButtons:function(t){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==t?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(t>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(e){this._hideMessage();var n=t.makeNeutralElement("div");n.appendChild(document.createTextNode(e)),this.messageDiv=t.makeCenteredNode(n),t.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var t=this.messageDiv;t&&(t.parentNode.removeChild(t),delete this.messageDiv)},gestureSettingsByDeviceType:function(t){switch(t){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var t,e=this.currentOverlays.length;for(t=0;t<e;t++)this.currentOverlays[t].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new t.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else t.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(t){function e(t){t.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(t.position)),this.viewer.viewport.applyConstraints())}function n(t){this.viewer.viewport&&(this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function r(t){t.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function i(t){return this.viewer.raiseEvent("navigator-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),!1}function o(t,e){t.style.webkitTransform="rotate("+e+"deg)",t.style.mozTransform="rotate("+e+"deg)",t.style.msTransform="rotate("+e+"deg)",t.style.oTransform="rotate("+e+"deg)",t.style.transform="rotate("+e+"deg)"}t.Navigator=function(s){function a(t){o(h.displayRegionContainer,t),o(h.displayRegion,-t),h.viewport.setRotation(t)}var u,l,c=s.viewer,h=this;if(s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),s.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"==s.position?s.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==s.position?s.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==s.position?s.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==s.position?s.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:"ABSOLUTE"==s.position&&(s.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",s=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize,minZoomImageRatio:1}),s.minPixelRatio=this.minPixelRatio=c.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!=t.ControlAnchor.NONE&&function(t,e){t.margin="0px",t.border=e+"px solid #555",t.padding="0px",t.background="#000",t.opacity=.8,t.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t,e){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border=e+"px solid #900",t.margin="0px",t.padding="0px",t.background="transparent",t.float="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",c.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!=t.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!=t.ControlAnchor.NONE,this._resizeWithViewer&&(s.width&&s.height?(this.element.style.height="number"==typeof s.height?s.height+"px":s.height,this.element.style.width="number"==typeof s.width?s.width+"px":s.width):(u=t.getElementSize(c.element),this.element.style.height=Math.round(u.y*s.sizeRatio)+"px",this.element.style.width=Math.round(u.x*s.sizeRatio)+"px",this.oldViewerSize=u),l=t.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate){a(s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0),s.viewer.addHandler("rotate",function(t){a(t.degrees)})}this.innerTracker.destroy(),this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,e),releaseHandler:t.delegate(this,r),scrollHandler:t.delegate(this,i)}),this.addHandler("reset-size",function(){h.viewport&&h.viewport.goHome(!0)}),c.world.addHandler("item-index-change",function(t){window.setTimeout(function(){var e=h.world.getItemAt(t.previousIndex);h.world.setItemIndex(e,t.newIndex)},1)}),c.world.addHandler("remove-item",function(t){var e=t.item,n=h._getMatchingItem(e);n&&h.world.removeItem(n)}),this.update(c.viewport)},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){var e=new t.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);e.equals(this.oldContainerSize)||(this.viewport.resize(e,!0),this.viewport.goHome(!0),this.oldContainerSize=e,this.drawer.clear(),this.world.draw())}},update:function(e){var n,r,i,o,s,a;if(n=t.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(r=n.x*this.sizeRatio,i=n.y*this.sizeRatio):(r=Math.sqrt(this.elementArea*(n.x/n.y)),i=this.elementArea/r),this.element.style.width=Math.round(r)+"px",this.element.style.height=Math.round(i)+"px",this.elementArea||(this.elementArea=r*i),this.updateSize()),e&&this.viewport){o=e.getBoundsNoRotate(!0),s=this.viewport.pixelFromPointNoRotate(o.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(o.getBottomRight(),!1).minus(this.totalBorderWidths);var u=this.displayRegion.style;u.display=this.world.getItemCount()?"block":"none",u.top=Math.round(s.y)+"px",u.left=Math.round(s.x)+"px";var l=Math.abs(s.x-a.x),c=Math.abs(s.y-a.y);u.width=Math.round(Math.max(l,0))+"px",u.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(e){var n=this,r=e.originalTiledImage;delete e.original;var i=t.extend({},e,{success:function(t){function e(){n._matchBounds(s,r)}function i(){n._matchOpacity(s,r)}function o(){n._matchCompositeOperation(s,r)}var s=t.item;s._originalForNavigator=r,n._matchBounds(s,r,!0),r.addHandler("bounds-change",e),r.addHandler("clip-change",e),r.addHandler("opacity-change",i),r.addHandler("composite-operation-change",o)}});return t.Viewer.prototype.addTiledImage.apply(this,[i])},_getMatchingItem:function(t){for(var e,n=this.world.getItemCount(),r=0;r<n;r++)if(e=this.world.getItemAt(r),e._originalForNavigator===t)return e;return null},_matchBounds:function(t,e,n){var r=e.getBoundsNoRotate();t.setPosition(r.getTopLeft(),n),t.setWidth(r.width,n),t.setRotation(e.getRotation(),n),t.setClip(e.getClip())},_matchOpacity:function(t,e){t.setOpacity(e.opacity)},_matchCompositeOperation:function(t,e){t.setCompositeOperation(e.compositeOperation)}})}(OpenSeadragon),function(t){var e={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};t.extend(t,{getString:function(n){var r,i=n.split("."),o=null,s=arguments,a=e;for(r=0;r<i.length-1;r++)a=a[i[r]]||{};return o=a[i[r]],"string"!=typeof o&&(t.console.log("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(t){var e=parseInt(t.match(/\d+/),10)+1;return e<s.length?s[e]:""})},setString:function(t,n){var r,i=t.split("."),o=e;for(r=0;r<i.length-1;r++)o[i[r]]||(o[i[r]]={}),o=o[i[r]];o[i[r]]=n}})}(OpenSeadragon),function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={clone:function(){return new t.Point(this.x,this.y)},plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},squaredDistanceTo:function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,n){n=n||new t.Point(0,0);var r,i;if(e%90==0){switch(t.positiveModulo(e,360)){case 0:r=1,i=0;break;case 90:r=0,i=1;break;case 180:r=-1,i=0;break;case 270:r=0,i=-1}}else{var o=e*Math.PI/180;r=Math.cos(o),i=Math.sin(o)}var s=r*(this.x-n.x)-i*(this.y-n.y)+n.x,a=i*(this.x-n.x)+r*(this.y-n.y)+n.y;return new t.Point(s,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(t){function e(e){var n,r,i=e.responseText,o=e.status;if(!e)throw new Error(t.getString("Errors.Security"));if(200!==e.status&&0!==e.status)throw o=e.status,n=404==o?"Not Found":e.statusText,new Error(t.getString("Errors.Status",o,n));if(i.match(/\s*<.*/))try{r=e.responseXML&&e.responseXML.documentElement?e.responseXML:t.parseXml(i)}catch(t){r=e.responseText}else if(i.match(/\s*[\{\[].*/))try{r=t.parseJSON(i)}catch(t){r=i}else r=i;return r}t.TileSource=function(e,n,r,i,o,s){var a,u,l=this,c=arguments;if(a=t.isPlainObject(e)?e:{width:c[0],height:c[1],tileSize:c[2],tileOverlap:c[3],minLevel:c[4],maxLevel:c[5]},t.EventSource.call(this),t.extend(!0,this,a),!this.success)for(u=0;u<arguments.length;u++)if(t.isFunction(arguments[u])){this.success=arguments[u];break}this.success&&this.addHandler("ready",function(t){l.success(t)}),"string"==t.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new t.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=a.width&&a.height?a.width/a.height:1,this.dimensions=new t.Point(a.width,a.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=a.tileOverlap?a.tileOverlap:0,this.minLevel=a.minLevel?a.minLevel:0,this.maxLevel=void 0!==a.maxLevel&&null!==a.maxLevel?a.maxLevel:a.width&&a.height?Math.ceil(Math.log(Math.max(a.width,a.height))/Math.log(2)):0,this.success&&t.isFunction(this.success)&&this.success(this))},t.TileSource.prototype={getTileSize:function(e){return t.console.error("[TileSource.getTileSize] is deprecated.Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(t){return this._tileWidth?this._tileWidth:this.getTileSize(t)},getTileHeight:function(t){return this._tileHeight?this._tileHeight:this.getTileSize(t)},getLevelScale:function(t){var e,n={};for(e=0;e<=this.maxLevel;e++)n[e]=1/Math.pow(2,this.maxLevel-e);return this.getLevelScale=function(t){return n[t]},this.getLevelScale(t)},getNumTiles:function(e){var n=this.getLevelScale(e),r=Math.ceil(n*this.dimensions.x/this.getTileWidth(e)),i=Math.ceil(n*this.dimensions.y/this.getTileHeight(e));return new t.Point(r,i)},getPixelRatio:function(e){var n=this.dimensions.times(this.getLevelScale(e)),r=1/n.x,i=1/n.y;return new t.Point(r,i)},getClosestLevel:function(){var t,e;for(t=this.minLevel+1;t<=this.maxLevel&&(e=this.getNumTiles(t),!(e.x>1||e.y>1));t++);return t-1},getTileAtPoint:function(e,n){var r=n.x>=0&&n.x<=1&&n.y>=0&&n.y<=1/this.aspectRatio;t.console.assert(r,"[TileSource.getTileAtPoint] must be called with a valid point.");var i=this.dimensions.x*this.getLevelScale(e),o=n.x*i,s=n.y*i,a=Math.floor(o/this.getTileWidth(e)),u=Math.floor(s/this.getTileHeight(e));n.x>=1&&(a=this.getNumTiles(e).x-1);return n.y>=1/this.aspectRatio-1e-16&&(u=this.getNumTiles(e).y-1),new t.Point(a,u)},getTileBounds:function(e,n,r){var i=this.dimensions.times(this.getLevelScale(e)),o=this.getTileWidth(e),s=this.getTileHeight(e),a=0===n?0:o*n-this.tileOverlap,u=0===r?0:s*r-this.tileOverlap,l=o+(0===n?1:2)*this.tileOverlap,c=s+(0===r?1:2)*this.tileOverlap,h=1/i.x;return l=Math.min(l,i.x-a),c=Math.min(c,i.y-u),new t.Rect(a*h,u*h,l*h,c*h)},getImageInfo:function(n){var r,i,o,s,a,u,l,c=this;n&&(a=n.split("/"),u=a[a.length-1],(l=u.lastIndexOf("."))>-1&&(a[a.length-1]=u.slice(0,l))),i=function(e){"string"==typeof e&&(e=t.parseXml(e));var r=t.TileSource.determineType(c,e,n);if(!r)return void c.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n});s=r.prototype.configure.apply(c,[e,n]),void 0===s.ajaxWithCredentials&&(s.ajaxWithCredentials=c.ajaxWithCredentials),o=new r(s),c.ready=!0,c.raiseEvent("ready",{tileSource:o})},n.match(/\.js$/)?(r=n.split("/").pop().replace(".js",""),t.jsonp({url:n,async:!1,callbackName:r,callback:i})):t.makeAjaxRequest({url:n,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var n=e(t);i(n)},error:function(t,e){var r;try{r="HTTP "+t.status+" attempting to load TileSource"}catch(t){var i;i=void 0!==e&&e.toString?e.toString():"Unknown error",r=i+" attempting to load TileSource"}c.raiseEvent("open-failed",{message:r,source:n})}})},supports:function(t,e){return!1},configure:function(t,e){throw new Error("Method not implemented.")},getTileUrl:function(t,e,n){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(t,e,n){return{}},tileExists:function(t,e,n){var r=this.getNumTiles(t);return t>=this.minLevel&&t<=this.maxLevel&&e>=0&&n>=0&&e<r.x&&n<r.y}},t.extend(!0,t.TileSource.prototype,t.EventSource.prototype),t.TileSource.determineType=function(e,n,r){var i;for(i in OpenSeadragon)if(i.match(/.+TileSource$/)&&t.isFunction(OpenSeadragon[i])&&t.isFunction(OpenSeadragon[i].prototype.supports)&&OpenSeadragon[i].prototype.supports.call(e,n,r))return OpenSeadragon[i];t.console.error("No TileSource was able to open %s %s",r,n)}}(OpenSeadragon),function(t){function e(e,r){if(!r||!r.documentElement)throw new Error(t.getString("Errors.Xml"));var i,o,s,a,u,l=r.documentElement,c=l.localName||l.tagName,h=r.documentElement.namespaceURI,p=null,f=[];if("Image"==c)try{if(a=l.getElementsByTagName("Size")[0],void 0===a&&(a=l.getElementsByTagNameNS(h,"Size")[0]),p={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!t.imageFormatSupported(p.Image.Format))throw new Error(t.getString("Errors.ImageFormat",p.Image.Format.toUpperCase()));for(i=l.getElementsByTagName("DisplayRect"),void 0===i&&(i=l.getElementsByTagNameNS(h,"DisplayRect")[0]),u=0;u<i.length;u++)o=i[u],s=o.getElementsByTagName("Rect")[0],void 0===s&&(s=o.getElementsByTagNameNS(h,"Rect")[0]),f.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return f.length&&(p.Image.DisplayRect=f),n(e,p)}catch(e){throw e instanceof Error?e:new Error(t.getString("Errors.Dzi"))}else{if("Collection"==c)throw new Error(t.getString("Errors.Dzc"));if("Error"==c){var d=l.getElementsByTagName("Message")[0],g=d.firstChild.nodeValue;throw new Error(g)}}throw new Error(t.getString("Errors.Dzi"))}function n(e,n){var r,i,o=n.Image,s=o.Url,a=o.Format,u=o.Size,l=o.DisplayRect||[],c=parseInt(u.Width,10),h=parseInt(u.Height,10),p=parseInt(o.TileSize,10),f=parseInt(o.Overlap,10),d=[];for(i=0;i<l.length;i++)r=l[i].Rect,d.push(new t.DisplayRect(parseInt(r.X,10),parseInt(r.Y,10),parseInt(r.Width,10),parseInt(r.Height,10),parseInt(r.MinLevel,10),parseInt(r.MaxLevel,10)));return t.extend(!0,{width:c,height:h,tileSize:p,tileOverlap:f,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:d},n)}t.DziTileSource=function(e,n,r,i,o,s,a,u,l){var c,h,p,f;if(f=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=f.tilesUrl,this.fileFormat=f.fileFormat,this.displayRects=f.displayRects,this.displayRects)for(c=this.displayRects.length-1;c>=0;c--)for(h=this.displayRects[c],p=h.minLevel;p<=h.maxLevel;p++)this._levelRects[p]||(this._levelRects[p]=[]),this._levelRects[p].push(h);t.TileSource.apply(this,[f])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){var n;return t.Image?n=t.Image.xmlns:t.documentElement&&("Image"!=t.documentElement.localName&&"Image"!=t.documentElement.tagName||(n=t.documentElement.namespaceURI)),n=(n||"").toLowerCase(),-1!==n.indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(r,i){var o;return o=t.isPlainObject(r)?n(this,r):e(this,r),i&&!o.tilesUrl&&(o.tilesUrl=i.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=i.search(/\.(dzi|xml|js)\?/)?o.queryParams=i.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(t,e,n){return[this.tilesUrl,t,"/",e,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(t,e,n){var r,i,o,s,a,u,l,c=this._levelRects[t];if(!c||!c.length)return!0;for(l=c.length-1;l>=0;l--)if(r=c[l],!(t<r.minLevel||t>r.maxLevel)&&(i=this.getLevelScale(t),o=r.x*i,s=r.y*i,a=o+r.width*i,u=s+r.height*i,o=Math.floor(o/this._tileWidth),s=Math.floor(s/this._tileWidth),a=Math.ceil(a/this._tileWidth),u=Math.ceil(u/this._tileWidth),o<=e&&e<a&&s<=n&&n<u))return!0;return!1}})}(OpenSeadragon),function(t){function e(t){return!(-1!=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"].indexOf(t[0]))||-1!=t.indexOf("sizeByW")}function n(t){for(var e=[],n=0;n<t.sizes.length;n++)e.push({url:t["@id"]+"/full/"+t.sizes[n].width+",/0/default.jpg",width:t.sizes[n].width,height:t.sizes[n].height});return e.sort(function(t,e){return t.width-e.width})}function r(e){if(!e||!e.documentElement)throw new Error(t.getString("Errors.Xml"));var n=e.documentElement,r=n.tagName,o=null;if("info"==r)try{return o={},i(n,o),o}catch(e){throw e instanceof Error?e:new Error(t.getString("Errors.IIIF"))}throw new Error(t.getString("Errors.IIIF"))}function i(e,n,r){var o,s;if(3==e.nodeType&&r)s=e.nodeValue.trim(),s.match(/^\d*$/)&&(s=Number(s)),n[r]?(t.isArray(n[r])||(n[r]=[n[r]]),n[r].push(s)):n[r]=s;else if(1==e.nodeType)for(o=0;o<e.childNodes.length;o++)i(e.childNodes[o],n,e.nodeName)}t.IIIFTileSource=function(r){if(t.extend(!0,this,r),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(r.tileSizePerScaleFactor={},this.tile_width&&this.tile_height)r.tileWidth=this.tile_width,r.tileHeight=this.tile_height;else if(this.tile_width)r.tileSize=this.tile_width;else if(this.tile_height)r.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)r.tileWidth=this.tiles[0].width,r.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var i=0;i<this.tiles.length;i++)for(var o=0;o<this.tiles[i].scaleFactors.length;o++){var s=this.tiles[i].scaleFactors[o];this.scale_factors.push(s),r.tileSizePerScaleFactor[s]={width:this.tiles[i].width,height:this.tiles[i].height||this.tiles[i].width}}}else if(e(r.profile)){for(var a=Math.min(this.height,this.width),u=[256,512,1024],l=[],c=0;c<u.length;c++)u[c]<=a&&l.push(u[c]);l.length>0?r.tileSize=Math.max.apply(null,l):r.tileSize=a}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,r.levels=n(this),t.extend(!0,r,{width:r.levels[r.levels.length-1].width,height:r.levels[r.levels.length-1].height,tileSize:Math.max(r.height,r.width),tileOverlap:0,minLevel:0,maxLevel:r.levels.length-1}),this.levels=r.levels):t.console.error("Nothing in the info.json to construct image pyramids from");r.maxLevel||this.emulateLegacyImagePyramid||(this.scale_factors?r.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):r.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),t.TileSource.apply(this,[r])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return!(!t.protocol||"http://iiif.io/api/image"!=t.protocol)||(!(!t["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=t["@context"]&&"http://iiif.io/api/image/1/context.json"!=t["@context"])||(!(!t.profile||0!==t.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html"))||(!!(t.identifier&&t.width&&t.height)||!(!t.documentElement||"info"!=t.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!=t.documentElement.namespaceURI))))},configure:function(e,n){if(t.isPlainObject(e))return e["@context"]?e:(e["@context"]="http://iiif.io/api/image/1.0/context.json",e["@id"]=n.replace("/info.json",""),e);var i=r(e);return i["@context"]="http://iiif.io/api/image/1.0/context.json",i["@id"]=n.replace("/info.xml",""),i},getTileWidth:function(e){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileWidth.call(this,e);var n=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(e){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileHeight.call(this,e);var n=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(e){if(this.emulateLegacyImagePyramid){var n=NaN;return this.levels.length>0&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].width/this.levels[this.maxLevel].width),n}return t.TileSource.prototype.getLevelScale.call(this,e)},getNumTiles:function(e){if(this.emulateLegacyImagePyramid){return this.getLevelScale(e)?new t.Point(1,1):new t.Point(0,0)}return t.TileSource.prototype.getNumTiles.call(this,e)},getTileAtPoint:function(e,n){return this.emulateLegacyImagePyramid?new t.Point(0,0):t.TileSource.prototype.getTileAtPoint.call(this,e,n)},getTileUrl:function(t,e,n){if(this.emulateLegacyImagePyramid){var r=null;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].url),r}var i,o,s,a,u,l,c,h,p,f,d,g=Math.pow(.5,this.maxLevel-t),m=Math.ceil(this.width*g),v=Math.ceil(this.height*g);return i=this.getTileWidth(t),o=this.getTileHeight(t),s=Math.ceil(i/g),a=Math.ceil(o/g),d=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",m<i&&v<o?(f=m+",",u="full"):(l=e*s,c=n*a,h=Math.min(s,this.width-l),p=Math.min(a,this.height-c),f=Math.ceil(h*g)+",",u=[l,c,h,p].join(",")),[this["@id"],u,f,"0",d].join("/")}})}(OpenSeadragon),function(t){t.OsmTileSource=function(e,n,r,i,o){var s;s=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},s.width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,t.TileSource.apply(this,[s])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"openstreetmaps"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){return this.tilesUrl+(t-8)+"/"+e+"/"+n+".png"}})}(OpenSeadragon),function(t){t.TmsTileSource=function(e,n,r,i,o){var s;s=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var a,u=256*Math.ceil(s.width/256),l=256*Math.ceil(s.height/256);a=u>l?u/256:l/256,s.maxLevel=Math.ceil(Math.log(a)/Math.log(2))-1,s.tileSize=256,s.width=u,s.height=l,t.TileSource.apply(this,[s])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"tiledmapservice"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){var r=this.getNumTiles(t).y-1;return this.tilesUrl+t+"/"+e+"/"+(r-n)+".png"}})}(OpenSeadragon),function(t){t.ZoomifyTileSource=function(t){t.tileSize=256;var e={x:t.width,y:t.height};for(t.imageSizes=[{x:t.width,y:t.height}],t.gridSize=[this._getGridSize(t.width,t.height,t.tileSize)];parseInt(e.x,10)>t.tileSize||parseInt(e.y,10)>t.tileSize;)e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),t.imageSizes.push({x:e.x,y:e.y}),t.gridSize.push(this._getGridSize(e.x,e.y,t.tileSize));t.imageSizes.reverse(),t.gridSize.reverse(),t.minLevel=0,t.maxLevel=t.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[t])},t.extend(t.ZoomifyTileSource.prototype,t.TileSource.prototype,{_getGridSize:function(t,e,n){return{x:Math.ceil(t/n),y:Math.ceil(e/n)}},_calculateAbsoluteTileNumber:function(t,e,n){for(var r=0,i={},o=0;o<t;o++)i=this.gridSize[o],r+=i.x*i.y;return i=this.gridSize[t],r+=i.x*n+e},supports:function(t,e){return t.type&&"zoomifytileservice"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){var r=0,i=this._calculateAbsoluteTileNumber(t,e,n);return r=Math.floor(i/256),this.tilesUrl+"TileGroup"+r+"/"+t+"-"+e+"-"+n+".jpg"}})}(OpenSeadragon),function(t){function e(e){var n,r,i=[];for(r=0;r<e.length;r++)n=e[r],n.height&&n.width&&n.url?i.push({url:n.url,width:Number(n.width),height:Number(n.height)}):t.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return i.sort(function(t,e){return t.height-e.height})}function n(e,n){if(!n||!n.documentElement)throw new Error(t.getString("Errors.Xml"));var i,o,s=n.documentElement,a=s.tagName,u=null,l=[];if("image"==a)try{for(u={type:s.getAttribute("type"),levels:[]},l=s.getElementsByTagName("level"),o=0;o<l.length;o++)i=l[o],u.levels.push({url:i.getAttribute("url"),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10)});return r(e,u)}catch(t){throw t instanceof Error?t:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw new Error("Error: "+n)}throw new Error("Unknown element "+a)}function r(t,e){return e.levels}t.LegacyTileSource=function(n){var r,i,o;t.isArray(n)&&(r={type:"legacy-image-pyramid",levels:n}),r.levels=e(r.levels),r.levels.length>0?(i=r.levels[r.levels.length-1].width,o=r.levels[r.levels.length-1].height):(i=0,o=0,t.console.error("No supported image formats found")),t.extend(!0,r,{width:i,height:o,tileSize:Math.max(o,i),tileOverlap:0,minLevel:0,maxLevel:r.levels.length>0?r.levels.length-1:0}),t.TileSource.apply(this,[r]),this.levels=r.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(e,i){return t.isPlainObject(e)?r(this,e):n(this,e)},getLevelScale:function(t){var e=NaN;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){return this.getLevelScale(e)?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(t,e,n){var r=null;return this.levels.length>0&&t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].url),r}})}(OpenSeadragon),function(t){t.ImageTileSource=function(e){e=t.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},e),t.TileSource.apply(this,[e])},t.extend(t.ImageTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"image"===t.type},configure:function(t,e){return t},getImageInfo:function(e){var n=this._image=new Image,r=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),t.addEvent(n,"load",function(){r.width=Object.prototype.hasOwnProperty.call(n,"naturalWidth")?n.naturalWidth:n.width,r.height=Object.prototype.hasOwnProperty.call(n,"naturalHeight")?n.naturalHeight:n.height,r.aspectRatio=r.width/r.height,r.dimensions=new t.Point(r.width,r.height),r._tileWidth=r.width,r._tileHeight=r.height,r.tileOverlap=0,r.minLevel=0,r.levels=r._buildLevels(),r.maxLevel=r.levels.length-1,r.ready=!0,r.raiseEvent("ready",{tileSource:r})}),t.addEvent(n,"error",function(){r.raiseEvent("open-failed",{message:"Error loading image at "+e,source:e})}),n.src=e},getLevelScale:function(t){var e=NaN;return t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){return this.getLevelScale(e)?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(t,e,n){var r=null;return t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].url),r},getContext2D:function(t,e,n){var r=null;return t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].context2D),r},_buildLevels:function(){var e=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!t.supportsCanvas||!this.useCanvas)return delete this._image,e;var n=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,r=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,i=document.createElement("canvas"),o=i.getContext("2d");if(i.width=n,i.height=r,o.drawImage(this._image,0,0,n,r),e[0].context2D=o,delete this._image,t.isCanvasTainted(i))return e;for(;n>=2&&r>=2;){n=Math.floor(n/2),r=Math.floor(r/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n,s.height=r,a.drawImage(i,0,0,n,r),e.splice(0,0,{context2D:a,width:n,height:r}),i=s,o=a}return e}})}(OpenSeadragon),function(t){t.TileSourceCollection=function(e,n,r,i){t.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(t){function e(e){t.requestAnimationFrame(function(){n(e)})}function n(n){var r,i,o;n.shouldFade&&(r=t.now(),i=r-n.fadeBeginTime,o=1-i/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&t.setElementOpacity(n.imgGroup,o,!0),o>0&&e(n))}function r(n){n.shouldFade=!0,n.fadeBeginTime=t.now()+n.fadeDelay,window.setTimeout(function(){e(n)},n.fadeDelay)}function i(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}function o(e,n){e.element.disabled||(n>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(i(e),e.currentState=t.ButtonState.GROUP),n>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),n>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function s(e,n){e.element.disabled||(n<=t.ButtonState.HOVER&&e.currentState==t.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=t.ButtonState.HOVER),n<=t.ButtonState.GROUP&&e.currentState==t.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=t.ButtonState.GROUP),n<=t.ButtonState.REST&&e.currentState==t.ButtonState.GROUP&&(r(e),e.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var n=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("div"),e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&t.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){e.insideElementPressed?(o(n,t.ButtonState.DOWN),n.raiseEvent("enter",{originalEvent:e.originalEvent})):e.buttonDownAny||o(n,t.ButtonState.HOVER)},focusHandler:function(t){this.enterHandler(t),n.raiseEvent("focus",{originalEvent:t.originalEvent})},exitHandler:function(e){s(n,t.ButtonState.GROUP),e.insideElementPressed&&n.raiseEvent("exit",{originalEvent:e.originalEvent})},blurHandler:function(t){this.exitHandler(t),n.raiseEvent("blur",{originalEvent:t.originalEvent})},pressHandler:function(e){o(n,t.ButtonState.DOWN),n.raiseEvent("press",{originalEvent:e.originalEvent})},releaseHandler:function(e){e.insideElementPressed&&e.insideElementReleased?(s(n,t.ButtonState.HOVER),n.raiseEvent("release",{originalEvent:e.originalEvent})):e.insideElementPressed?s(n,t.ButtonState.GROUP):o(n,t.ButtonState.HOVER)},clickHandler:function(t){t.quick&&n.raiseEvent("click",{originalEvent:t.originalEvent})},keyHandler:function(t){return 13!==t.keyCode||(n.raiseEvent("click",{originalEvent:t.originalEvent}),n.raiseEvent("release",{originalEvent:t.originalEvent}),!1)}}),s(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){o(this,t.ButtonState.GROUP)},notifyGroupExit:function(){s(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var n,r=this.buttons.concat([]),i=this;if(this.element=e.element||t.makeNeutralElement("div"),!e.group)for(this.label=t.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;n<r.length;n++)this.element.appendChild(r[n].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){var e;for(e=0;e<i.buttons.length;e++)i.buttons[e].notifyGroupEnter()},exitHandler:function(t){var e;if(!t.insideElementPressed)for(e=0;e<i.buttons.length;e++)i.buttons[e].notifyGroupExit()}})},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(t){t.Rect=function(e,n,r,i,o){this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0,this.width="number"==typeof r?r:0,this.height="number"==typeof i?i:0,this.degrees="number"==typeof o?o:0,this.degrees=t.positiveModulo(this.degrees,360);var s,a;this.degrees>=270?(s=this.getTopRight(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(s=this.getBottomRight(),this.x=s.x,this.y=s.y,this.degrees-=180):this.degrees>=90&&(s=this.getBottomLeft(),this.x=s.x,this.y=s.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},t.Rect.fromSummits=function(e,n,r){var i=e.distanceTo(n),o=e.distanceTo(r),s=n.minus(e),a=Math.atan(s.y/s.x);return s.x<0?a+=Math.PI:s.y<0&&(a+=2*Math.PI),new t.Rect(e.x,e.y,i,o,a/Math.PI*180)},t.Rect.prototype={clone:function(){return new t.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new t.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new t.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new t.Point(this.width,this.height)},equals:function(e){return e instanceof t.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height&&this.degrees===e.degrees},times:function(e){return new t.Rect(this.x*e,this.y*e,this.width*e,this.height*e,this.degrees)},translate:function(e){return new t.Rect(this.x+e.x,this.y+e.y,this.width,this.height,this.degrees)},union:function(e){var n=this.getBoundingBox(),r=e.getBoundingBox(),i=Math.min(n.x,r.x),o=Math.min(n.y,r.y),s=Math.max(n.x+n.width,r.x+r.width),a=Math.max(n.y+n.height,r.y+r.height);return new t.Rect(i,o,s-i,a-o)},intersection:function(e){var n=1e-10,r=[],i=this.getTopLeft();e.containsPoint(i,n)&&r.push(i);var o=this.getTopRight();e.containsPoint(o,n)&&r.push(o);var s=this.getBottomLeft();e.containsPoint(s,n)&&r.push(s);var a=this.getBottomRight();e.containsPoint(a,n)&&r.push(a);var u=e.getTopLeft();this.containsPoint(u,n)&&r.push(u);var l=e.getTopRight();this.containsPoint(l,n)&&r.push(l);var c=e.getBottomLeft();this.containsPoint(c,n)&&r.push(c);var h=e.getBottomRight();this.containsPoint(h,n)&&r.push(h);for(var p=this._getSegments(),f=e._getSegments(),d=0;d<p.length;d++)for(var g=p[d],m=0;m<f.length;m++){var v=f[m],y=function(e,r,i,o){var s=r.minus(e),a=o.minus(i),u=-a.x*s.y+s.x*a.y;if(0===u)return null;var l=(s.x*(e.y-i.y)-s.y*(e.x-i.x))/u,c=(a.x*(e.y-i.y)-a.y*(e.x-i.x))/u;return-n<=l&&l<=1-n&&-n<=c&&c<=1-n?new t.Point(e.x+c*s.x,e.y+c*s.y):null}(g[0],g[1],v[0],v[1]);y&&r.push(y)}if(0===r.length)return null;for(var w=r[0].x,x=r[0].x,b=r[0].y,E=r[0].y,_=1;_<r.length;_++){var T=r[_];T.x<w&&(w=T.x),T.x>x&&(x=T.x),T.y<b&&(b=T.y),T.y>E&&(E=T.y)}return new t.Rect(w,b,x-w,E-b)},_getSegments:function(){var t=this.getTopLeft(),e=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight();return[[t,e],[e,r],[r,n],[n,t]]},rotate:function(e,n){if(0===(e=t.positiveModulo(e,360)))return this.clone();n=n||this.getCenter();var r=this.getTopLeft().rotate(e,n),i=this.getTopRight().rotate(e,n),o=i.minus(r);o=o.apply(function(t){return Math.abs(t)<1e-15?0:t});var s=Math.atan(o.y/o.x);return o.x<0?s+=Math.PI:o.y<0&&(s+=2*Math.PI),new t.Rect(r.x,r.y,this.width,this.height,s/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var e=this.getTopLeft(),n=this.getTopRight(),r=this.getBottomLeft(),i=this.getBottomRight(),o=Math.min(e.x,n.x,r.x,i.x),s=Math.max(e.x,n.x,r.x,i.x),a=Math.min(e.y,n.y,r.y,i.y),u=Math.max(e.y,n.y,r.y,i.y);return new t.Rect(o,a,s-o,u-a)},getIntegerBoundingBox:function(){var e=this.getBoundingBox(),n=Math.floor(e.x),r=Math.floor(e.y),i=Math.ceil(e.width+e.x-n),o=Math.ceil(e.height+e.y-r);return new t.Rect(n,r,i,o)},containsPoint:function(t,e){e=e||0;var n=this.getTopLeft(),r=this.getTopRight(),i=this.getBottomLeft(),o=r.minus(n),s=i.minus(n);return(t.x-n.x)*o.x+(t.y-n.y)*o.y>=-e&&(t.x-r.x)*o.x+(t.y-r.y)*o.y<=e&&(t.x-n.x)*s.x+(t.y-n.y)*s.y>=-e&&(t.x-i.x)*s.x+(t.y-i.y)*s.y<=e},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(t){function e(e){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-e.delta.x>0?n>-(o-a.x)&&(this.element.style.marginLeft=n+2*e.delta.x+"px",r(this,a.x,n+2*e.delta.x)):-e.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*e.delta.x+"px",r(this,a.x,n+2*e.delta.x)):-e.delta.y>0?i>-(s-a.y)&&(this.element.style.marginTop=i+2*e.delta.y+"px",r(this,a.y,i+2*e.delta.y)):-e.delta.y<0&&i<0&&(this.element.style.marginTop=i+2*e.delta.y+"px",r(this,a.y,i+2*e.delta.y))),!1}function n(e){var n=Number(this.element.style.marginLeft.replace("px","")),i=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?e.scroll>0?n>-(o-a.x)&&(this.element.style.marginLeft=n-60*e.scroll+"px",r(this,a.x,n-60*e.scroll)):e.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*e.scroll+"px",r(this,a.x,n-60*e.scroll)):e.scroll<0?i>a.y-s&&(this.element.style.marginTop=i+60*e.scroll+"px",r(this,a.y,i+60*e.scroll)):e.scroll>0&&i<0&&(this.element.style.marginTop=i+60*e.scroll+"px",r(this,a.y,i+60*e.scroll))),!1}function r(e,n,r){var i,o,s,a,u,l,c;for(i="horizontal"==e.scroll?e.panelWidth:e.panelHeight,o=Math.ceil(n/i)+5,s=Math.ceil((Math.abs(r)+n)/i)+1,o=s-o,o=o<0?0:o,l=o;l<s&&l<e.panels.length;l++)if(c=e.panels[l],!c.activePanel){var h,p=e.viewer.tileSources[l];h=p.referenceStripThumbnailUrl?{type:"image",url:p.referenceStripThumbnailUrl}:p,a=new t.Viewer({id:c.id,tileSources:[h],element:c,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),a.displayRegion=t.makeNeutralElement("div"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",u=a.displayRegion.style,u.position="relative",u.top="0px",u.left="0px",u.fontSize="0px",u.overflow="hidden",u.float="left",u.cssFloat="left",u.styleFloat="left",u.zIndex=999999999,u.cursor="default",u.width=e.panelWidth-4+"px",u.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new t.MouseTracker({element:a.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),e.miniViewers[c.id]=a,c.activePanel=!0}}function i(t){var e=t.eventSource.element;return"horizontal"==this.scroll?e.style.marginBottom="0px":e.style.marginLeft="0px",!1}function o(e){var n=e.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+t.getElementSize(n).y/2+"px":n.style.marginLeft="-"+t.getElementSize(n).x/2+"px",!1}function s(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function a(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 61:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var u={};t.ReferenceStrip=function(l){var c,h,p,f=this,d=l.viewer,g=t.getElementSize(d.element);for(l.id||(l.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,l),u[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,h=this.element.style,h.marginTop="0px",h.marginRight="0px",h.marginBottom="0px",h.marginLeft="0px",h.left="0px",h.bottom="0px",h.border="0px",h.background="#000",h.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=d,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,e),scrollHandler:t.delegate(this,n),enterHandler:t.delegate(this,i),exitHandler:t.delegate(this,o),keyDownHandler:t.delegate(this,s),keyHandler:t.delegate(this,a)}),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",d.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=g.x*l.sizeRatio*d.tileSources.length+12*d.tileSources.length+"px",this.element.style.height=g.y*l.sizeRatio+"px",d.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=g.y*l.sizeRatio*d.tileSources.length+12*d.tileSources.length+"px",this.element.style.width=g.x*l.sizeRatio+"px",d.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=g.x*this.sizeRatio+8,this.panelHeight=g.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},p=0;p<d.tileSources.length;p++)c=t.makeNeutralElement("div"),c.id=this.element.id+"-"+p,c.style.width=f.panelWidth+"px",c.style.height=f.panelHeight+"px",c.style.display="inline",c.style.float="left",c.style.cssFloat="left",c.style.styleFloat="left",c.style.padding="2px",t.setElementTouchActionNone(c),c.innerTracker=new t.MouseTracker({element:c,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.eventSource.dragging=t.now()},releaseHandler:function(e){var n=e.eventSource,r=n.element.id,i=Number(r.split("-")[2]),o=t.now();e.insideElementPressed&&e.insideElementReleased&&n.dragging&&o-n.dragging<n.clickTimeThreshold&&(n.dragging=null,d.goToPage(i))}}),this.element.appendChild(c),c.activePanel=!1,this.panels.push(c);r(this,"vertical"==this.scroll?g.y:g.x,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventSource.prototype,t.Viewer.prototype,{setFocus:function(e){var n,o=t.getElement(this.element.id+"-"+e),s=t.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),u=Number(this.element.style.height.replace("px","")),l=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(e)*(this.panelWidth+3),n>l+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",r(this,s.x,-n)):n<l&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",r(this,s.x,-n))):(n=Number(e)*(this.panelHeight+3),n>c+s.y-this.panelHeight?(n=Math.min(n,u-s.y),this.element.style.marginTop=-n+"px",r(this,s.y,-n)):n<c&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",r(this,s.y,-n))),this.currentPage=e,i.call(this,{eventSource:this.innerTracker}))},update:function(){return!!u[this.id].animating&&(t.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var t in this.miniViewers)this.miniViewers[t].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(t){t.DisplayRect=function(e,n,r,i,o,s){t.Rect.apply(this,[e,n,r,i]),this.minLevel=o,this.maxLevel=s},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),function(t){function e(t,e){return(1-Math.exp(t*-e))/(1-Math.exp(-t))}t.Spring=function(e){var n=arguments;"object"!=typeof e&&(e={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),t.console.assert("number"==typeof e.springStiffness&&0!==e.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),t.console.assert("number"==typeof e.animationTime&&e.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),e.exponential&&(this._exponential=!0,delete e.exponential),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:t.now()},t.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},t.Spring.prototype={resetTo:function(e){t.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=e,this.start.time=this.target.time=this.current.time=t.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(e){t.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=e,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(e){this.start.value+=e,this.target.value+=e,this._exponential&&(t.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(e){this._exponential=e,this._exponential&&(t.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=t.now();var n,r;this._exponential?(n=this.start._logValue,r=this.target._logValue):(n=this.start.value,r=this.target.value);var i=this.current.time>=this.target.time?r:n+(r-n)*e(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),o=this.current.value;return this._exponential?this.current.value=Math.exp(i):this.current.value=i,o!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(t){function e(e){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null},e),this.image=null}function n(t,e,n){var r;t.jobsInProgress--,(!t.jobLimit||t.jobsInProgress<t.jobLimit)&&t.jobQueue.length>0&&(r=t.jobQueue.shift(),r.start(),t.jobsInProgress++),n(e.image,e.errorMsg,e.request)}e.prototype={errorMsg:null,start:function(){var e=this,n=this.abort;this.image=new Image,this.image.onload=function(){e.finish(!0)},this.image.onabort=this.image.onerror=function(){e.errorMsg="Image load aborted",e.finish(!1)},this.jobId=window.setTimeout(function(){e.errorMsg="Image load exceeded timeout",e.finish(!1)},this.timeout),this.loadWithAjax?(this.request=t.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(t){var n;try{n=new window.Blob([t.response])}catch(e){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===e.name&&r){var i=new r;i.append(t.response),n=i.getBlob()}}0===n.size&&(e.errorMsg="Empty image response.",e.finish(!1));var o=(window.URL||window.webkitURL).createObjectURL(n);e.image.src=o},error:function(t){e.errorMsg="Image load aborted - XHR error",e.finish(!1)}}),this.abort=function(){e.request.abort(),"function"==typeof n&&n()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(t){this.image.onload=this.image.onerror=this.image.onabort=null,t||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(e){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,timeout:t.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},e)},t.ImageLoader.prototype={addJob:function(t){var r=this,i=function(e){n(r,e,t.callback)},o={src:t.src,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:i,abort:t.abort,timeout:this.timeout},s=new e(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(s.start(),this.jobsInProgress++):this.jobQueue.push(s)},clear:function(){for(var t=0;t<this.jobQueue.length;t++){var e=this.jobQueue[t];"function"==typeof e.abort&&e.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(t){t.Tile=function(t,e,n,r,i,o,s,a,u){this.level=t,this.x=e,this.y=n,this.bounds=r,this.exists=i,this.url=o,this.context2D=s,this.loadWithAjax=a,this.ajaxHeaders=u,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(e){return this.cacheImageRecord?this.loaded?(this.element||(this.element=t.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",void t.setElementOpacity(this.element,this.opacity)):void t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):void t.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(e,n,r,i){var o,s=this.position.times(t.pixelDensityRatio),a=this.size.times(t.pixelDensityRatio);return this.context2D||this.cacheImageRecord?(o=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&o?(e.save(),e.globalAlpha=this.opacity,"number"==typeof r&&1!==r&&(s=s.times(r),a=a.times(r)),i instanceof t.Point&&(s=s.plus(i)),1===e.globalAlpha&&this._hasTransparencyChannel()&&e.clearRect(s.x+1,s.y+1,a.x-2,a.y-2),n({context:e,tile:this,rendered:o}),e.drawImage(o.canvas,0,0,o.canvas.width,o.canvas.height,s.x,s.y,a.x,a.y),void e.restore()):void t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):void t.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var e;if(this.cacheImageRecord)e=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return t.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;e=this.context2D}return e.canvas.width/(this.size.x*t.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(e,n,r){var i=Math.max(1,Math.ceil((r.x-n.x)/2)),o=Math.max(1,Math.ceil((r.y-n.y)/2));return new t.Point(i,o).minus(this.position.times(t.pixelDensityRatio).times(e||1).apply(function(t){return t%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(t){t.OverlayPlacement=t.Placement,t.OverlayRotationMode=t.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),t.Overlay=function(e,n,r){var i;i=t.isPlainObject(e)?e:{element:e,location:n,placement:r},this.element=i.element,this.style=i.element.style,this._init(i)},t.Overlay.prototype={_init:function(e){this.location=e.location,this.placement=void 0===e.placement?t.Placement.TOP_LEFT:e.placement,this.onDraw=e.onDraw,this.checkResize=void 0===e.checkResize||e.checkResize,this.width=void 0===e.width?null:e.width,this.height=void 0===e.height?null:e.height,this.rotationMode=e.rotationMode||t.OverlayRotationMode.EXACT,this.location instanceof t.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=t.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new t.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(e,n){var r=t.Placement.properties[this.placement];r&&(r.isHorizontallyCentered?e.x-=n.x/2:r.isRight&&(e.x-=n.x),r.isVerticallyCentered?e.y-=n.y/2:r.isBottom&&(e.y-=n.y))},destroy:function(){var e=this.element,n=this.style;e.parentNode&&(e.parentNode.removeChild(e),e.prevElementParent&&(n.display="none",document.body.appendChild(e))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var r=t.getCssPropertyWithVendorPrefix("transformOrigin"),i=t.getCssPropertyWithVendorPrefix("transform");r&&i&&(n[r]="",n[i]="")},drawHTML:function(e,n){var r=this.element;r.parentNode!==e&&(r.prevElementParent=r.parentNode,r.prevNextSibling=r.nextSibling,e.appendChild(r),this.style.position="absolute",this.size=t.getElementSize(r));var i=this._getOverlayPositionAndSize(n),o=i.position,s=this.size=i.size,a=i.rotate;if(this.onDraw)this.onDraw(o,s,this.element);else{var u=this.style;u.left=o.x+"px",u.top=o.y+"px",null!==this.width&&(u.width=s.x+"px"),null!==this.height&&(u.height=s.y+"px");var l=t.getCssPropertyWithVendorPrefix("transformOrigin"),c=t.getCssPropertyWithVendorPrefix("transform");l&&c&&(a?(u[l]=this._getTransformOrigin(),u[c]="rotate("+a+"deg)"):(u[l]="",u[c]="")),"none"!==u.display&&(u.display="block")}},_getOverlayPositionAndSize:function(e){var n=e.pixelFromPoint(this.location,!0),r=this._getSizeInPixels(e);this.adjust(n,r);var i=0;if(e.degrees&&this.rotationMode!==t.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new t.Rect(n.x,n.y,r.x,r.y),s=this._getBoundingBox(o,e.degrees);n=s.getTopLeft(),r=s.getSize()}else i=e.degrees;return{position:n,size:r,rotate:i}},_getSizeInPixels:function(e){var n=this.size.x,r=this.size.y;if(null!==this.width||null!==this.height){var i=e.deltaPixelsFromPointsNoRotate(new t.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=i.x),null!==this.height&&(r=i.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=t.getElementSize(this.element);null===this.width&&(n=o.x),null===this.height&&(r=o.y)}return new t.Point(n,r)},_getBoundingBox:function(t,e){var n=this._getPlacementPoint(t);return t.rotate(e,n).getBoundingBox()},_getPlacementPoint:function(e){var n=new t.Point(e.x,e.y),r=t.Placement.properties[this.placement];return r&&(r.isHorizontallyCentered?n.x+=e.width/2:r.isRight&&(n.x+=e.width),r.isVerticallyCentered?n.y+=e.height/2:r.isBottom&&(n.y+=e.height)),n},_getTransformOrigin:function(){var e="",n=t.Placement.properties[this.placement];return n?(n.isLeft?e="left":n.isRight&&(e="right"),n.isTop?e+=" top":n.isBottom&&(e+=" bottom"),e):e},update:function(e,n){var r=t.isPlainObject(e)?e:{location:e,placement:n};this._init({location:r.location||this.location,placement:void 0!==r.placement?r.placement:this.placement,onDraw:r.onDraw||this.onDraw,checkResize:r.checkResize||this.checkResize,width:void 0!==r.width?r.width:this.width,height:void 0!==r.height?r.height:this.height,rotationMode:r.rotationMode||this.rotationMode})},getBounds:function(e){t.console.assert(e,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,r=this.height;if(null===n||null===r){var i=e.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=i.x),null===r&&(r=i.y)}var o=this.location.clone();return this.adjust(o,new t.Point(n,r)),this._adjustBoundsForRotation(e,new t.Rect(o.x,o.y,n,r))},_adjustBoundsForRotation:function(e,n){if(!e||0===e.degrees||this.rotationMode===t.OverlayRotationMode.EXACT)return n;if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var r=this._getOverlayPositionAndSize(e);return e.viewerElementToViewportRectangle(new t.Rect(r.position.x,r.position.y,r.size.x,r.size.y))}return n.rotate(-e.degrees,this._getPlacementPoint(n))}}}(OpenSeadragon),function(t){t.Drawer=function(e){t.console.assert(e.viewer,"[Drawer] options.viewer is required");var n=arguments;if(t.isPlainObject(e)||(e={source:n[0],viewport:n[1],element:n[2]}),t.console.assert(e.viewport,"[Drawer] options.viewport is required"),t.console.assert(e.element,"[Drawer] options.element is required"),e.source&&t.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=e.viewer,this.viewport=e.viewport,this.debugGridColor="string"==typeof e.debugGridColor?[e.debugGridColor]:e.debugGridColor||t.DEFAULT_SETTINGS.debugGridColor,e.opacity&&t.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=t.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=t.getElement(e.element),this.canvas=t.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var r=this._calculateCanvasSize();this.canvas.width=r.x,this.canvas.height=r.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",t.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas)},t.Drawer.prototype={addOverlay:function(e,n,r,i){return t.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(e,n,r,i),this},updateOverlay:function(e,n,r){return t.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(e,n,r),this},removeOverlay:function(e){return t.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(e),this},clearOverlays:function(){return t.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(e){t.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,r=0;r<n.getItemCount();r++)n.getItemAt(r).setOpacity(e);return this},getOpacity:function(){t.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var e=this.viewer.world,n=0,r=0;r<e.getItemCount();r++){var i=e.getItemAt(r).getOpacity();i>n&&(n=i)}return n},needsUpdate:function(){return t.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return t.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return t.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return t.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var t=this._calculateCanvasSize();if((this.canvas.width!=t.x||this.canvas.height!=t.y)&&(this.canvas.width=t.x,this.canvas.height=t.y,null!==this.sketchCanvas)){var e=this._calculateSketchCanvasSize();this.sketchCanvas.width=e.x,this.sketchCanvas.height=e.y}this._clear()}},_clear:function(t,e){if(this.useCanvas){var n=this._getContext(t);if(e)n.clearRect(e.x,e.y,e.width,e.height);else{var r=n.canvas;n.clearRect(0,0,r.width,r.height)}}},viewportToDrawerRectangle:function(e){var n=this.viewport.pixelFromPointNoRotate(e.getTopLeft(),!0),r=this.viewport.deltaPixelsFromPointsNoRotate(e.getSize(),!0);return new t.Rect(n.x*t.pixelDensityRatio,n.y*t.pixelDensityRatio,r.x*t.pixelDensityRatio,r.y*t.pixelDensityRatio)},drawTile:function(e,n,r,i,o){if(t.console.assert(e,"[Drawer.drawTile] tile is required"),t.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var s=this._getContext(r);i=i||1,e.drawCanvas(s,n,i,o)}else e.drawHTML(this.canvas)},_getContext:function(t){var e=this.context;if(t){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var r=this;this.viewer.addHandler("rotate",function t(){if(0!==r.viewport.getRotation()){r.viewer.removeHandler("rotate",t);var e=r._calculateSketchCanvasSize();r.sketchCanvas.width=e.x,r.sketchCanvas.height=e.y}})}}e=this.sketchContext}return e},saveContext:function(t){this.useCanvas&&this._getContext(t).save()},restoreContext:function(t){this.useCanvas&&this._getContext(t).restore()},setClip:function(t,e){if(this.useCanvas){var n=this._getContext(e);n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.clip()}},drawRectangle:function(t,e,n){if(this.useCanvas){var r=this._getContext(n);r.save(),r.fillStyle=e,r.fillRect(t.x,t.y,t.width,t.height),r.restore()}},blendSketch:function(e,n,r,i){var o=e;if(t.isPlainObject(o)||(o={opacity:e,scale:n,translate:r,compositeOperation:i}),this.useCanvas&&this.sketchCanvas){e=o.opacity,i=o.compositeOperation;var s=o.bounds;if(this.context.save(),this.context.globalAlpha=e,i&&(this.context.globalCompositeOperation=i),s)s.x<0&&(s.width+=s.x,s.x=0),s.x+s.width>this.canvas.width&&(s.width=this.canvas.width-s.x),s.y<0&&(s.height+=s.y,s.y=0),s.y+s.height>this.canvas.height&&(s.height=this.canvas.height-s.y),this.context.drawImage(this.sketchCanvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height);else{n=o.scale||1,r=o.translate;var a=r instanceof t.Point?r:new t.Point(0,0),u=0,l=0;if(r){var c=this.sketchCanvas.width-this.canvas.width,h=this.sketchCanvas.height-this.canvas.height;u=Math.round(c/2),l=Math.round(h/2)}this.context.drawImage(this.sketchCanvas,a.x-u*n,a.y-l*n,(this.canvas.width+2*u)*n,(this.canvas.height+2*l)*n,-u,-l,this.canvas.width+2*u,this.canvas.height+2*l)}this.context.restore()}},drawDebugInfo:function(e,n,r,i){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(i)%this.debugGridColor.length,s=this.context;s.save(),s.lineWidth=2*t.pixelDensityRatio,s.font="small-caps bold "+13*t.pixelDensityRatio+"px arial",s.strokeStyle=this.debugGridColor[o],s.fillStyle=this.debugGridColor[o],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),i.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:i.getRotation(!0),point:i.viewport.pixelFromPointNoRotate(i._getRotationPoint(!0),!0)}),s.strokeRect(e.position.x*t.pixelDensityRatio,e.position.y*t.pixelDensityRatio,e.size.x*t.pixelDensityRatio,e.size.y*t.pixelDensityRatio);var a=(e.position.x+e.size.x/2)*t.pixelDensityRatio,u=(e.position.y+e.size.y/2)*t.pixelDensityRatio;s.translate(a,u),s.rotate(Math.PI/180*-this.viewport.degrees),s.translate(-a,-u),0===e.x&&0===e.y&&(s.fillText("Zoom: "+this.viewport.getZoom(),e.position.x*t.pixelDensityRatio,(e.position.y-30)*t.pixelDensityRatio),s.fillText("Pan: "+this.viewport.getBounds().toString(),e.position.x*t.pixelDensityRatio,(e.position.y-20)*t.pixelDensityRatio)),s.fillText("Level: "+e.level,(e.position.x+10)*t.pixelDensityRatio,(e.position.y+20)*t.pixelDensityRatio),s.fillText("Column: "+e.x,(e.position.x+10)*t.pixelDensityRatio,(e.position.y+30)*t.pixelDensityRatio),s.fillText("Row: "+e.y,(e.position.x+10)*t.pixelDensityRatio,(e.position.y+40)*t.pixelDensityRatio),s.fillText("Order: "+r+" of "+n,(e.position.x+10)*t.pixelDensityRatio,(e.position.y+50)*t.pixelDensityRatio),s.fillText("Size: "+e.size.toString(),(e.position.x+10)*t.pixelDensityRatio,(e.position.y+60)*t.pixelDensityRatio),s.fillText("Position: "+e.position.toString(),(e.position.x+10)*t.pixelDensityRatio,(e.position.y+70)*t.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),i.getRotation(!0)%360!=0&&this._restoreRotationChanges(),s.restore()}},debugRect:function(e){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*t.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(e.x*t.pixelDensityRatio,e.y*t.pixelDensityRatio,e.width*t.pixelDensityRatio,e.height*t.pixelDensityRatio),n.restore()}},getCanvasSize:function(e){var n=this._getContext(e).canvas;return new t.Point(n.width,n.height)},getCanvasCenter:function(){return new t.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(e){var n=e.point?e.point.times(t.pixelDensityRatio):this.getCanvasCenter(),r=this._getContext(e.useSketch);r.save(),r.translate(n.x,n.y),r.rotate(Math.PI/180*e.degrees),r.translate(-n.x,-n.y)},_restoreRotationChanges:function(t){this._getContext(t).restore()},_calculateCanvasSize:function(){var e=t.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:n.x*e,y:n.y*e}},_calculateSketchCanvasSize:function(){var t=this._calculateCanvasSize();if(0===this.viewport.getRotation())return t;var e=Math.ceil(Math.sqrt(t.x*t.x+t.y*t.y));return{x:e,y:e}}}}(OpenSeadragon),function(t){t.Viewport=function(e){var n=arguments;n.length&&n[0]instanceof t.Point&&(e={containerSize:n[0],contentSize:n[1],config:n[2]}),e.config&&(t.extend(!0,e,e.config),delete e.config),this._margins=t.extend({left:0,top:0,right:0,bottom:0},e.margins||{}),delete e.margins,t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel,degrees:t.DEFAULT_SETTINGS.degrees,homeFillsViewer:t.DEFAULT_SETTINGS.homeFillsViewer},e),this._updateContainerInnerSize(),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new t.Rect(0,0,1,1),1),this.goHome(!0),this.update()},t.Viewport.prototype={resetContentSize:function(e){return t.console.assert(e,"[Viewport.resetContentSize] contentSize is required"),t.console.assert(e instanceof t.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),t.console.assert(e.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),t.console.assert(e.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new t.Rect(0,0,1,e.y/e.x),e.x),this},setHomeBounds:function(e,n){t.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(e,n)},_setContentBounds:function(e,n){t.console.assert(e,"[Viewport._setContentBounds] bounds is required"),t.console.assert(e instanceof t.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),t.console.assert(e.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),t.console.assert(e.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=e.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=e.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var t=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?t>=1?t:1:t>=1?1:t)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var e=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),r=n/this.getAspectRatio();return new t.Rect(e.x-n/2,e.y-r/2,n,r)},goHome:function(t){return this.viewer&&this.viewer.raiseEvent("home",{immediately:t}),this.fitBounds(this.getHomeBounds(),t)},getMinZoom:function(){var t=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*t},getMaxZoom:function(){var t=this.maxZoomLevel;return t||(t=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,t/=this._contentBounds.width),Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return t.extend({},this._margins)},setMargins:function(e){t.console.assert("object"===t.type(e),"[Viewport.setMargins] margins must be an object"),this._margins=t.extend({left:0,top:0,right:0,bottom:0},e),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(t){return this.getBoundsNoRotate(t).rotate(-this.getRotation())},getBoundsNoRotate:function(e){var n=this.getCenter(e),r=1/this.getZoom(e),i=r/this.getAspectRatio();return new t.Rect(n.x-r/2,n.y-i/2,r,i)},getBoundsWithMargins:function(t){return this.getBoundsNoRotateWithMargins(t).rotate(-this.getRotation(),this.getCenter(t))},getBoundsNoRotateWithMargins:function(t){var e=this.getBoundsNoRotate(t),n=this._containerInnerSize.x*this.getZoom(t);return e.x-=this._margins.left/n,e.y-=this._margins.top/n,e.width+=(this._margins.left+this._margins.right)/n,e.height+=(this._margins.top+this._margins.bottom)/n,e},getCenter:function(e){var n,r,i,o,s,a,u,l,c=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?c:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),r=this.getZoom(),i=1/r,o=i/this.getAspectRatio(),s=new t.Rect(c.x-i/2,c.y-o/2,i,o),a=this._pixelFromPoint(this.zoomPoint,s),u=a.minus(n),l=u.divide(this._containerInnerSize.x*r),h.plus(l)):h},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(t){return Math.max(Math.min(t,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(e){var n=new t.Rect(e.x,e.y,e.width,e.height);if(this.wrapHorizontal);else{var r=this.visibilityRatio*n.width,i=n.x+n.width,o=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,s=this._contentBoundsNoRotate.x-i+r,a=o-n.x-r;r>this._contentBoundsNoRotate.width?n.x+=(s+a)/2:a<0?n.x+=a:s>0&&(n.x+=s)}if(this.wrapVertical);else{var u=this.visibilityRatio*n.height,l=n.y+n.height,c=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,h=this._contentBoundsNoRotate.y-l+u,p=c-n.y-u;u>this._contentBoundsNoRotate.height?n.y+=(h+p)/2:p<0?n.y+=p:h>0&&(n.y+=h)}return n},_raiseConstraintsEvent:function(t){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:t})},applyConstraints:function(t){var e=this.getZoom(),n=this._applyZoomConstraints(e);e!==n&&this.zoomTo(n,this.zoomPoint,t);var r=this.getBoundsNoRotate(),i=this._applyBoundaryConstraints(r);return this._raiseConstraintsEvent(t),(r.x!==i.x||r.y!==i.y||t)&&this.fitBounds(i.rotate(-this.getRotation()),t),this},ensureVisible:function(t){return this.applyConstraints(t)},_fitBounds:function(e,n){n=n||{};var r=n.immediately||!1,i=n.constraints||!1,o=this.getAspectRatio(),s=e.getCenter(),a=new t.Rect(e.x,e.y,e.width,e.height,e.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=o?a.height=a.width/o:a.width=a.height*o,a.x=s.x-a.width/2,a.y=s.y-a.height/2;var u=1/a.width;if(i){var l=a.getAspectRatio(),c=this._applyZoomConstraints(u);u!==c&&(u=c,a.width=1/u,a.x=s.x-a.width/2,a.height=a.width/l,a.y=s.y-a.height/2),a=this._applyBoundaryConstraints(a),s=a.getCenter(),this._raiseConstraintsEvent(r)}if(r)return this.panTo(s,!0),this.zoomTo(u,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var h=this.getBounds(),p=this.getZoom();if(0===p||Math.abs(u/p-1)<1e-8)return this.zoomTo(u,!0),this.panTo(s,r);a=a.rotate(-this.getRotation());var f=a.getTopLeft().times(u).minus(h.getTopLeft().times(p)).divide(u-p);return this.zoomTo(u,f,r)},fitBounds:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!1})},fitBoundsWithConstraints:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!0})},fitVertically:function(e){var n=new t.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,e)},fitHorizontally:function(e){var n=new t.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,e)},getConstrainedBounds:function(t){var e;return e=this.getBounds(t),this._applyBoundaryConstraints(e)},panBy:function(e,n){var r=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(r.plus(e),n)},panTo:function(t,e){return e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:t,immediately:e}),this},zoomBy:function(t,e,n){return this.zoomTo(this.zoomSpring.target.value*t,e,n)},zoomTo:function(e,n,r){var i=this;return this.zoomPoint=n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,r?this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.resetTo(e)}):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:n,immediately:r}),this},setRotation:function(e){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=t.positiveModulo(e,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:e}),this):this},getRotation:function(){return this.degrees},resize:function(t,e){var n,r=this.getBoundsNoRotate(),i=r;return this.containerSize.x=t.x,this.containerSize.y=t.y,this._updateContainerInnerSize(),e&&(n=t.x/this.containerSize.x,i.width=r.width*n,i.height=i.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:t,maintain:e}),this.fitBounds(i,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new t.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var t=this;this._adjustCenterSpringsForZoomPoint(function(){t.zoomSpring.update()}),this.centerSpringX.update(),this.centerSpringY.update();var e=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,e},_adjustCenterSpringsForZoomPoint:function(t){if(this.zoomPoint){var e=this.pixelFromPoint(this.zoomPoint,!0);t();var n=this.pixelFromPoint(this.zoomPoint,!0),r=n.minus(e),i=this.deltaPointsFromPixels(r,!0);this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else t()},deltaPixelsFromPointsNoRotate:function(t,e){return t.times(this._containerInnerSize.x*this.getZoom(e))},deltaPixelsFromPoints:function(t,e){return this.deltaPixelsFromPointsNoRotate(t.rotate(this.getRotation()),e)},deltaPointsFromPixelsNoRotate:function(t,e){return t.divide(this._containerInnerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return this.deltaPointsFromPixelsNoRotate(t,e).rotate(-this.getRotation())},pixelFromPointNoRotate:function(t,e){return this._pixelFromPointNoRotate(t,this.getBoundsNoRotate(e))},pixelFromPoint:function(t,e){return this._pixelFromPoint(t,this.getBoundsNoRotate(e))},_pixelFromPointNoRotate:function(e,n){return e.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new t.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(t,e){return this._pixelFromPointNoRotate(t.rotate(this.getRotation(),this.getCenter(!0)),e)},pointFromPixelNoRotate:function(e,n){var r=this.getBoundsNoRotate(n);return e.minus(new t.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/r.width).plus(r.getTopLeft())},pointFromPixel:function(t,e){return this.pointFromPixelNoRotate(t,e).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(e,n){var r=this._contentBoundsNoRotate.width;return new t.Point(e*this._contentSizeNoRotate.x/r,n*this._contentSizeNoRotate.x/r)},viewportToImageCoordinates:function(e,n){if(e instanceof t.Point)return this.viewportToImageCoordinates(e.x,e.y);if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)t.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===r){var i=this.viewer.world.getItemAt(0);return i.viewportToImageCoordinates(e,n,!0)}}return this._viewportToImageDelta(e-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(e,n){var r=this._contentBoundsNoRotate.width;return new t.Point(e/this._contentSizeNoRotate.x*r,n/this._contentSizeNoRotate.x*r)},imageToViewportCoordinates:function(e,n){if(e instanceof t.Point)return this.imageToViewportCoordinates(e.x,e.y);if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)t.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===r){var i=this.viewer.world.getItemAt(0);return i.imageToViewportCoordinates(e,n,!0)}}var o=this._imageToViewportDelta(e,n);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(e,n,r,i){var o=e;if(o instanceof t.Rect||(o=new t.Rect(e,n,r,i)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)t.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===s){var a=this.viewer.world.getItemAt(0);return a.imageToViewportRectangle(e,n,r,i,!0)}}var u=this.imageToViewportCoordinates(o.x,o.y),l=this._imageToViewportDelta(o.width,o.height);return new t.Rect(u.x,u.y,l.x,l.y,o.degrees)},viewportToImageRectangle:function(e,n,r,i){var o=e;if(o instanceof t.Rect||(o=new t.Rect(e,n,r,i)),this.viewer){var s=this.viewer.world.getItemCount();if(s>1)t.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===s){var a=this.viewer.world.getItemAt(0);return a.viewportToImageRectangle(e,n,r,i,!0)}}var u=this.viewportToImageCoordinates(o.x,o.y),l=this._viewportToImageDelta(o.width,o.height);return new t.Rect(u.x,u.y,l.x,l.y,o.degrees)},viewerElementToImageCoordinates:function(t){var e=this.pointFromPixel(t,!0);return this.viewportToImageCoordinates(e)},imageToViewerElementCoordinates:function(t){var e=this.imageToViewportCoordinates(t);return this.pixelFromPoint(e,!0)},windowToImageCoordinates:function(e){t.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=e.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(e){return t.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(e).plus(t.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(t){return this.pointFromPixel(t,!0)},viewportToViewerElementCoordinates:function(t){return this.pixelFromPoint(t,!0)},viewerElementToViewportRectangle:function(e){return t.Rect.fromSummits(this.pointFromPixel(e.getTopLeft(),!0),this.pointFromPixel(e.getTopRight(),!0),this.pointFromPixel(e.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(e){return t.Rect.fromSummits(this.pixelFromPoint(e.getTopLeft(),!0),this.pixelFromPoint(e.getTopRight(),!0),this.pixelFromPoint(e.getBottomLeft(),!0))},windowToViewportCoordinates:function(e){t.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=e.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(e){return t.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(e).plus(t.getElementPosition(this.viewer.element))},viewportToImageZoom:function(e){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)t.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n){var r=this.viewer.world.getItemAt(0);return r.viewportToImageZoom(e)}}var i=this._contentSizeNoRotate.x;return e*(this._containerInnerSize.x/i*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(e){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)t.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n){var r=this.viewer.world.getItemAt(0);return r.imageToViewportZoom(e)}}return e*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)}}}(OpenSeadragon),function(t){function e(t,e,r,i,o,s,a,u,l){var c=a.getBoundingBox().getTopLeft(),h=a.getBoundingBox().getBottomRight();t.viewer&&t.viewer.raiseEvent("update-level",{tiledImage:t,havedrawn:e,level:i,opacity:o,visibility:s,drawArea:a,topleft:c,bottomright:h,currenttime:u,best:l}),p(t.coverage,i),p(t.loadingCoverage,i);for(var f=t._getCornerTiles(i,c,h),d=f.topLeft,g=f.bottomRight,m=t.source.getNumTiles(i),v=t.viewport.pixelFromPoint(t.viewport.getCenter()),y=d.x;y<=g.x;y++)for(var w=d.y;w<=g.y;w++){if(!t.wrapHorizontal&&!t.wrapVertical){var x=t.source.getTileBounds(i,y,w);if(null===a.intersection(x))continue}l=n(t,r,e,y,w,i,o,s,v,m,u,l)}return l}function n(t,e,n,i,o,l,p,d,g,m,v,y){var w=r(i,o,l,t,t.source,t.tilesMatrix,v,m,t._worldWidthCurrent,t._worldHeightCurrent),x=n;t.viewer&&t.viewer.raiseEvent("update-tile",{tiledImage:t,tile:w}),h(t.coverage,l,i,o,!1);var b=w.loaded||w.loading||c(t.loadingCoverage,l,i,o);if(h(t.loadingCoverage,l,i,o,b),!w.exists)return y;if(e&&!x&&(c(t.coverage,l,i,o)?h(t.coverage,l,i,o,!0):x=!0),!x)return y;if(a(w,t.source.tileOverlap,t.viewport,g,d,t),!w.loaded)if(w.context2D)s(t,w);else{var E=t._tileCache.getImageRecord(w.cacheKey);if(E){var _=E.getImage();s(t,w,_)}}if(w.loaded){u(t,w,i,o,l,p,v)&&(t._needsDraw=!0)}else w.loading?t._tilesLoading++:b||(y=f(y,w));return y}function r(e,n,r,i,o,s,a,u,l,c){var h,p,f,d,g,m,v,y;return s[r]||(s[r]={}),s[r][e]||(s[r][e]={}),s[r][e][n]||(h=(u.x+e%u.x)%u.x,p=(u.y+n%u.y)%u.y,f=o.getTileBounds(r,h,p),d=o.tileExists(r,h,p),g=o.getTileUrl(r,h,p),i.loadTilesWithAjax?(m=o.getTileAjaxHeaders(r,h,p),t.isPlainObject(i.ajaxHeaders)&&(m=t.extend({},i.ajaxHeaders,m))):m=null,v=o.getContext2D?o.getContext2D(r,h,p):void 0,f.x+=(e-h)/u.x,f.y+=c/l*((n-p)/u.y),y=new t.Tile(r,e,n,f,d,g,v,i.loadTilesWithAjax,m),h===u.x-1&&(y.isRightMost=!0),p===u.y-1&&(y.isBottomMost=!0),s[r][e][n]=y),y=s[r][e][n],y.lastTouchTime=a,y}function i(t,e,n){e.loading=!0,t._imageLoader.addJob({src:e.url,loadWithAjax:e.loadWithAjax,ajaxHeaders:e.ajaxHeaders,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:function(r,i,s){o(t,e,n,r,i,s)},abort:function(){e.loading=!1}})}function o(e,n,r,i,o,a){if(!i)return t.console.log("Tile %s failed to load: %s - error: %s",n,n.url,o),e.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:e,time:r,message:o,tileRequest:a}),n.loading=!1,void(n.exists=!1);if(r<e.lastResetTime)return t.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);var u=function(){var t=e.source.getClosestLevel();s(e,n,i,t,a)};e._midDraw?window.setTimeout(u,1):u()}function s(t,e,n,r,i){function o(){return a++,s}function s(){0===--a&&(e.loading=!1,e.loaded=!0,e.context2D||t._tileCache.cacheTile({image:n,tile:e,cutoff:r,tiledImage:t}),t._needsDraw=!0)}var a=0;t.viewer.raiseEvent("tile-loaded",{tile:e,tiledImage:t,tileRequest:i,image:n,getCompletionCallback:o}),o()()}function a(e,n,r,i,o,s){var a=e.bounds.getTopLeft();a.x*=s._scaleSpring.current.value,a.y*=s._scaleSpring.current.value,a.x+=s._xSpring.current.value,a.y+=s._ySpring.current.value;var u=e.bounds.getSize();u.x*=s._scaleSpring.current.value,u.y*=s._scaleSpring.current.value;var l=r.pixelFromPointNoRotate(a,!0),c=r.pixelFromPointNoRotate(a,!1),h=r.deltaPixelsFromPointsNoRotate(u,!0),p=r.deltaPixelsFromPointsNoRotate(u,!1),f=c.plus(p.divide(2)),d=i.squaredDistanceTo(f);n||(h=h.plus(new t.Point(1,1))),e.isRightMost&&s.wrapHorizontal&&(h.x+=.75),e.isBottomMost&&s.wrapVertical&&(h.y+=.75),e.position=l,e.size=h,e.squaredDistance=d,e.visibility=o}function u(t,e,n,r,i,o,s){var a,u,l=1e3*t.blendTime;if(e.blendStart||(e.blendStart=s),a=s-e.blendStart,u=l?Math.min(1,a/l):1,t.alwaysBlend&&(u*=o),e.opacity=u,t.lastDrawn.push(e),1==u)h(t.coverage,i,n,r,!0),t._hasOpaqueTile=!0;else if(a<l)return!0;return!1}function l(t,e,n,r){var i,o,s,a;if(!t[e])return!1;if(void 0===n||void 0===r){i=t[e];for(s in i)if(i.hasOwnProperty(s)){o=i[s];for(a in o)if(o.hasOwnProperty(a)&&!o[a])return!1}return!0}return void 0===t[e][n]||void 0===t[e][n][r]||!0===t[e][n][r]}function c(t,e,n,r){return void 0===n||void 0===r?l(t,e+1):l(t,e+1,2*n,2*r)&&l(t,e+1,2*n,2*r+1)&&l(t,e+1,2*n+1,2*r)&&l(t,e+1,2*n+1,2*r+1)}function h(e,n,r,i,o){if(!e[n])return void t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n);e[n][r]||(e[n][r]={}),e[n][r][i]=o}function p(t,e){t[e]={}}function f(t,e){return t?e.visibility>t.visibility?e:e.visibility==t.visibility&&e.squaredDistance<t.squaredDistance?e:t:e}function d(e,n){if(0!==e.opacity&&(0!==n.length||e.placeholderFillStyle)){var r,i=n[0];i&&(r=e.opacity<1||e.compositeOperation&&"source-over"!==e.compositeOperation||!e._isBottomItem()&&i._hasTransparencyChannel());var o,s,a=e.viewport.getZoom(!0),u=e.viewportToImageZoom(a);n.length>1&&u>e.smoothTileEdgesMinZoom&&!e.iOSDevice&&e.getRotation(!0)%360==0&&t.supportsCanvas&&(r=!0,o=i.getScaleForEdgeSmoothing(),s=i.getTranslationForEdgeSmoothing(o,e._drawer.getCanvasSize(!1),e._drawer.getCanvasSize(!0)));var l;r&&(o||(l=e.viewport.viewportToViewerElementRectangle(e.getClippedBounds(!0)).getIntegerBoundingBox().times(t.pixelDensityRatio)),e._drawer._clear(!0,l)),o||(0!==e.viewport.degrees&&e._drawer._offsetForRotation({degrees:e.viewport.degrees,useSketch:r}),e.getRotation(!0)%360!=0&&e._drawer._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:r}));var c=!1;if(e._clip){e._drawer.saveContext(r);var h=e.imageToViewportRectangle(e._clip,!0);h=h.rotate(-e.getRotation(!0),e._getRotationPoint(!0));var p=e._drawer.viewportToDrawerRectangle(h);o&&(p=p.times(o)),s&&(p=p.translate(s)),e._drawer.setClip(p,r),c=!0}if(e.placeholderFillStyle&&!1===e._hasOpaqueTile){var f=e._drawer.viewportToDrawerRectangle(e.getBounds(!0));o&&(f=f.times(o)),s&&(f=f.translate(s));var d=null;d="function"==typeof e.placeholderFillStyle?e.placeholderFillStyle(e,e._drawer.context):e.placeholderFillStyle,e._drawer.drawRectangle(f,d,r)}for(var m=n.length-1;m>=0;m--)i=n[m],e._drawer.drawTile(i,e._drawingHandler,r,o,s),i.beingDrawn=!0,e.viewer&&e.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:i});c&&e._drawer.restoreContext(r),o||(e.getRotation(!0)%360!=0&&e._drawer._restoreRotationChanges(r),0!==e.viewport.degrees&&e._drawer._restoreRotationChanges(r)),r&&(o&&(0!==e.viewport.degrees&&e._drawer._offsetForRotation({degrees:e.viewport.degrees,useSketch:!1}),e.getRotation(!0)%360!=0&&e._drawer._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:!1})),e._drawer.blendSketch({opacity:e.opacity,scale:o,translate:s,compositeOperation:e.compositeOperation,bounds:l}),o&&(e.getRotation(!0)%360!=0&&e._drawer._restoreRotationChanges(!1),0!==e.viewport.degrees&&e._drawer._restoreRotationChanges(!1))),g(e,n)}}function g(e,n){if(e.debugMode)for(var r=n.length-1;r>=0;r--){var i=n[r];try{e._drawer.drawDebugInfo(i,n.length,r,e)}catch(e){t.console.error(e)}}}t.TiledImage=function(e){var n=this;t.console.assert(e.tileCache,"[TiledImage] options.tileCache is required"),t.console.assert(e.drawer,"[TiledImage] options.drawer is required"),t.console.assert(e.viewer,"[TiledImage] options.viewer is required"),t.console.assert(e.imageLoader,"[TiledImage] options.imageLoader is required"),t.console.assert(e.source,"[TiledImage] options.source is required"),t.console.assert(!e.clip||e.clip instanceof t.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),t.EventSource.call(this),this._tileCache=e.tileCache,delete e.tileCache,this._drawer=e.drawer,delete e.drawer,this._imageLoader=e.imageLoader,delete e.imageLoader,e.clip instanceof t.Rect&&(this._clip=e.clip.clone()),delete e.clip;var r=e.x||0;delete e.x;var i=e.y||0;delete e.y,this.normHeight=e.source.dimensions.y/e.source.dimensions.x,this.contentAspectX=e.source.dimensions.x/e.source.dimensions.y;var o=1;e.width?(o=e.width,delete e.width,e.height&&(t.console.error("specifying both width and height to a tiledImage is not supported"),delete e.height)):e.height&&(o=e.height/this.normHeight,delete e.height);var s=e.fitBounds;delete e.fitBounds;var a=e.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete e.fitBoundsPlacement;var u=e.degrees||0;delete e.degrees,t.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:t.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:t.DEFAULT_SETTINGS.iOSDevice,debugMode:t.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:t.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:t.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:t.DEFAULT_SETTINGS.placeholderFillStyle,opacity:t.DEFAULT_SETTINGS.opacity,preload:t.DEFAULT_SETTINGS.preload,compositeOperation:t.DEFAULT_SETTINGS.compositeOperation},e),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new t.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new t.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new t.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new t.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),s&&this.fitBounds(s,a,!0),this._drawingHandler=function(e){n.viewer.raiseEvent("tile-drawing",t.extend({tiledImage:n},e))}},t.extend(t.TiledImage.prototype,t.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(t){t!==this._fullyLoaded&&(this._fullyLoaded=t,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=t.now(),this._needsDraw=!0},update:function(){var t=this._xSpring.update(),e=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update();return!!(t||e||n||r)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){(0!==this.opacity||this._preload)&&(this._midDraw=!0,this._updateViewport(),this._midDraw=!1)},destroy:function(){this.reset()},getBounds:function(t){return this.getBoundsNoRotate(t).rotate(this.getRotation(t),this._getRotationPoint(t))},getBoundsNoRotate:function(e){return e?new t.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new t.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return t.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(e){var n=this.getBoundsNoRotate(e);if(this._clip){var r=e?this._worldWidthCurrent:this._worldWidthTarget,i=r/this.source.dimensions.x,o=this._clip.times(i);n=new t.Rect(n.x+o.x,n.y+o.y,o.width,o.height)}return n.rotate(this.getRotation(e),this._getRotationPoint(e))},getContentSize:function(){return new t.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(e,n,r){var i=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(e*(this.source.dimensions.x/i),n*(this.source.dimensions.y*this.contentAspectX/i))},viewportToImageCoordinates:function(e,n,r){var i;return e instanceof t.Point?(r=n,i=e):i=new t.Point(e,n),i=i.rotate(-this.getRotation(r),this._getRotationPoint(r)),r?this._viewportToImageDelta(i.x-this._xSpring.current.value,i.y-this._ySpring.current.value):this._viewportToImageDelta(i.x-this._xSpring.target.value,i.y-this._ySpring.target.value)},_imageToViewportDelta:function(e,n,r){var i=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(e/this.source.dimensions.x*i,n/this.source.dimensions.y/this.contentAspectX*i)},imageToViewportCoordinates:function(e,n,r){e instanceof t.Point&&(r=n,n=e.y,e=e.x);var i=this._imageToViewportDelta(e,n);return r?(i.x+=this._xSpring.current.value,i.y+=this._ySpring.current.value):(i.x+=this._xSpring.target.value,i.y+=this._ySpring.target.value),i.rotate(this.getRotation(r),this._getRotationPoint(r))},imageToViewportRectangle:function(e,n,r,i,o){var s=e;s instanceof t.Rect?o=n:s=new t.Rect(e,n,r,i);var a=this.imageToViewportCoordinates(s.getTopLeft(),o),u=this._imageToViewportDelta(s.width,s.height,o);return new t.Rect(a.x,a.y,u.x,u.y,s.degrees+this.getRotation(o))},viewportToImageRectangle:function(e,n,r,i,o){var s=e;e instanceof t.Rect?o=n:s=new t.Rect(e,n,r,i);var a=this.viewportToImageCoordinates(s.getTopLeft(),o),u=this._viewportToImageDelta(s.width,s.height,o);return new t.Rect(a.x,a.y,u.x,u.y,s.degrees-this.getRotation(o))},viewerElementToImageCoordinates:function(t){var e=this.viewport.pointFromPixel(t,!0);return this.viewportToImageCoordinates(e)},imageToViewerElementCoordinates:function(t){var e=this.imageToViewportCoordinates(t);return this.viewport.pixelFromPoint(e,!0)},windowToImageCoordinates:function(t){var e=t.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(e)},imageToWindowCoordinates:function(t){return this.imageToViewerElementCoordinates(t).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(e){var n=this._scaleSpring.current.value;return e=e.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new t.Rect((e.x-this._xSpring.current.value)/n,(e.y-this._ySpring.current.value)/n,e.width/n,e.height/n,e.degrees)},viewportToImageZoom:function(t){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*t},imageToViewportZoom:function(t){return t/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(t,e){var n=this._xSpring.target.value===t.x&&this._ySpring.target.value===t.y;if(e){if(n&&this._xSpring.current.value===t.x&&this._ySpring.current.value===t.y)return;this._xSpring.resetTo(t.x),this._ySpring.resetTo(t.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(t.x),this._ySpring.springTo(t.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(t,e){this._setScale(t,e)},setHeight:function(t,e){this._setScale(t/this.normHeight,e)},fitBounds:function(e,n,r){n=n||t.Placement.CENTER;var i=t.Placement.properties[n],o=this.contentAspectX,s=0,a=0,u=1,l=1;if(this._clip&&(o=this._clip.getAspectRatio(),u=this._clip.width/this.source.dimensions.x,l=this._clip.height/this.source.dimensions.y,e.getAspectRatio()>o?(s=this._clip.x/this._clip.height*e.height,a=this._clip.y/this._clip.height*e.height):(s=this._clip.x/this._clip.width*e.width,a=this._clip.y/this._clip.width*e.width)),e.getAspectRatio()>o){var c=e.height/l,h=0;i.isHorizontallyCentered?h=(e.width-e.height*o)/2:i.isRight&&(h=e.width-e.height*o),this.setPosition(new t.Point(e.x-s+h,e.y-a),r),this.setHeight(c,r)}else{var p=e.width/u,f=0;i.isVerticallyCentered?f=(e.height-e.width/o)/2:i.isBottom&&(f=e.height-e.width/o),this.setPosition(new t.Point(e.x-s,e.y-a+f),r),this.setWidth(p,r)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(e){t.console.assert(!e||e instanceof t.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),e instanceof t.Rect?this._clip=e.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(t){t!==this.opacity&&(this.opacity=t,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(t){this._preload=!!t,this._needsDraw=!0},getRotation:function(t){return t?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(t,e){this._degreesSpring.target.value===t&&this._degreesSpring.isAtTargetValue()||(e?this._degreesSpring.resetTo(t):this._degreesSpring.springTo(t),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(t){return this.getBoundsNoRotate(t).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(t){t!==this.compositeOperation&&(this.compositeOperation=t,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(t,e){var n=this._scaleSpring.target.value===t;if(e){if(n&&this._scaleSpring.current.value===t)return;this._scaleSpring.resetTo(t),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(t),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var t=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),e=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(e/this.minPixelRatio)/Math.log(2))));return t=Math.min(t,n),{lowestLevel:t,highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){this.lastDrawn.pop().beingDrawn=!1}var n=this.viewport,r=this._viewportToTiledImageRectangle(n.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var o=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(r=r.intersection(o)))return}for(var s=this._getLevelsInterval(),a=s.lowestLevel,u=s.highestLevel,c=null,h=!1,p=t.now(),f=u;f>=a;f--){var g=!1,m=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(f),!0).x*this._scaleSpring.current.value;if(f===a||!h&&m>=this.minPixelRatio)g=!0,h=!0;else if(!h)continue;var v=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(f),!1).x*this._scaleSpring.current.value,y=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,w=this.immediateRender?1:y;if(c=e(this,h,g,f,Math.min(1,(m-.5)/.5),w/Math.abs(w-v),r,p,c),l(this.coverage,f))break}d(this,this.lastDrawn),c&&!c.context2D?(i(this,c,p),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(e,n,r){var i,o;this.wrapHorizontal?(i=t.positiveModulo(n.x,1),o=t.positiveModulo(r.x,1)):(i=Math.max(0,n.x),o=Math.min(1,r.x));var s,a,u=1/this.source.aspectRatio;this.wrapVertical?(s=t.positiveModulo(n.y,u),a=t.positiveModulo(r.y,u)):(s=Math.max(0,n.y),a=Math.min(u,r.y));var l=this.source.getTileAtPoint(e,new t.Point(i,s)),c=this.source.getTileAtPoint(e,new t.Point(o,a)),h=this.source.getNumTiles(e);return this.wrapHorizontal&&(l.x+=h.x*Math.floor(n.x),c.x+=h.x*Math.floor(r.x)),this.wrapVertical&&(l.y+=h.y*Math.floor(n.y/u),c.y+=h.y*Math.floor(r.y/u)),{topLeft:l,bottomRight:c}}})}(OpenSeadragon),function(t){var e=function(e){t.console.assert(e,"[TileCache.cacheTile] options is required"),t.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=e.tile,this.tiledImage=e.tiledImage},n=function(e){t.console.assert(e,"[ImageRecord] options is required"),t.console.assert(e.image,"[ImageRecord] options.image is required"),this._image=e.image,this._tiles=[]};n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var t=document.createElement("canvas");t.width=this._image.width,t.height=this._image.height,this._renderedContext=t.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(e){t.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=e},addTile:function(e){t.console.assert(e,"[ImageRecord.addTile] tile is required"),this._tiles.push(e)},removeTile:function(e){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===e)return void this._tiles.splice(n,1);t.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",e)},getTileCount:function(){return this._tiles.length}},t.TileCache=function(e){e=e||{},this._maxImageCacheCount=e.maxImageCacheCount||t.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},t.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(r){t.console.assert(r,"[TileCache.cacheTile] options is required"),t.console.assert(r.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(r.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),t.console.assert(r.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var i=r.cutoff||0,o=this._tilesLoaded.length,s=this._imagesLoaded[r.tile.cacheKey];if(s||(t.console.assert(r.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),s=this._imagesLoaded[r.tile.cacheKey]=new n({image:r.image}),this._imagesLoadedCount++),s.addTile(r.tile),r.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,u,l,c,h,p,f=null,d=-1,g=null,m=this._tilesLoaded.length-1;m>=0;m--)p=this._tilesLoaded[m],a=p.tile,a.level<=i||a.beingDrawn||(f?(c=a.lastTouchTime,u=f.lastTouchTime,h=a.level,l=f.level,(c<u||c==u&&h>l)&&(f=a,d=m,g=p)):(f=a,d=m,g=p));f&&d>=0&&(this._unloadTile(g),o=d)}this._tilesLoaded[o]=new e({tile:r.tile,tiledImage:r.tiledImage})},clearTilesFor:function(e){t.console.assert(e,"[TileCache.clearTilesFor] tiledImage is required");for(var n,r=0;r<this._tilesLoaded.length;++r)n=this._tilesLoaded[r],n.tiledImage===e&&(this._unloadTile(n),this._tilesLoaded.splice(r,1),r--)},getImageRecord:function(e){return t.console.assert(e,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[e]},_unloadTile:function(e){t.console.assert(e,"[TileCache._unloadTile] tileRecord is required");var n=e.tile,r=e.tiledImage;n.unload(),n.cacheImageRecord=null;var i=this._imagesLoaded[n.cacheKey];i.removeTile(n),i.getTileCount()||(i.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),r.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:r})}}}(OpenSeadragon),function(t){t.World=function(e){var n=this;t.console.assert(e.viewer,"[World] options.viewer is required"),t.EventSource.call(this),this.viewer=e.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(t){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},t.extend(t.World.prototype,t.EventSource.prototype,{addItem:function(e,n){if(t.console.assert(e,"[World.addItem] item is required"),t.console.assert(e instanceof t.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},void 0!==n.index){var r=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(r,0,e)}else this._items.push(e);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,e.addHandler("bounds-change",this._delegatedFigureSizes),e.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:e})},getItemAt:function(e){return t.console.assert(void 0!==e,"[World.getItemAt] index is required"),this._items[e]},getIndexOfItem:function(e){return t.console.assert(e,"[World.getIndexOfItem] item is required"),t.indexOf(this._items,e)},getItemCount:function(){return this._items.length},setItemIndex:function(e,n){t.console.assert(e,"[World.setItemIndex] item is required"),t.console.assert(void 0!==n,"[World.setItemIndex] index is required");var r=this.getIndexOfItem(e);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n!==r&&-1!==r&&(this._items.splice(r,1),this._items.splice(n,0,e),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:e,previousIndex:r,newIndex:n}))},removeItem:function(e){t.console.assert(e,"[World.removeItem] item is required");var n=t.indexOf(this._items,e);-1!==n&&(e.removeHandler("bounds-change",this._delegatedFigureSizes),e.removeHandler("clip-change",this._delegatedFigureSizes),e.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(e))},removeAll:function(){this.viewer._cancelPendingImages();var t,e;for(e=0;e<this._items.length;e++)t=this._items[e],t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,e=0;e<n.length;e++)t=n[e],this._raiseRemoveItem(t)},resetItems:function(){for(var t=0;t<this._items.length;t++)this._items[t].reset()},update:function(){for(var t=!1,e=0;e<this._items.length;e++)t=this._items[e].update()||t;return t},draw:function(){for(var t=0;t<this._items.length;t++)this._items[t].draw();this._needsDraw=!1},needsDraw:function(){for(var t=0;t<this._items.length;t++)if(this._items[t].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(t){this._autoRefigureSizes=t,t&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(e){e=e||{};var n,r=e.immediately||!1,i=e.layout||t.DEFAULT_SETTINGS.collectionLayout,o=e.rows||t.DEFAULT_SETTINGS.collectionRows,s=e.columns||t.DEFAULT_SETTINGS.collectionColumns,a=e.tileSize||t.DEFAULT_SETTINGS.collectionTileSize,u=e.tileMargin||t.DEFAULT_SETTINGS.collectionTileMargin,l=a+u;n=!e.rows&&s?s:Math.ceil(this._items.length/o);var c,h,p,f,d,g=0,m=0;this.setAutoRefigureSizes(!1);for(var v=0;v<this._items.length;v++)v&&v%n==0&&("horizontal"===i?(m+=l,g=0):(g+=l,m=0)),c=this._items[v],h=c.getBounds(),p=h.width>h.height?a:a*(h.width/h.height),f=p*(h.height/h.width),d=new t.Point(g+(a-p)/2,m+(a-f)/2),c.setPosition(d,r),c.setWidth(p,r),"horizontal"===i?g+=l:m+=l;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var e=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,r=this._contentFactor||0;if(this._items.length){var i=this._items[0],o=i.getBounds();this._contentFactor=i.getContentSize().x/o.width;for(var s=i.getClippedBounds().getBoundingBox(),a=s.x,u=s.y,l=s.x+s.width,c=s.y+s.height,h=1;h<this._items.length;h++)i=this._items[h],o=i.getBounds(),this._contentFactor=Math.max(this._contentFactor,i.getContentSize().x/o.width),s=i.getClippedBounds().getBoundingBox(),a=Math.min(a,s.x),u=Math.min(u,s.y),l=Math.max(l,s.x+s.width),c=Math.max(c,s.y+s.height);this._homeBounds=new t.Rect(a,u,l-a,c-u),this._contentSize=new t.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new t.Rect(0,0,1,1),this._contentSize=new t.Point(1,1),this._contentFactor=1;this._contentFactor===r&&this._homeBounds.equals(e)&&this._contentSize.equals(n)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(t){this.raiseEvent("remove-item",{item:t})}})}(OpenSeadragon)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.MetadataItem=function(t){var e=t.label,n=t.value;return r.createElement("li",{className:"list-group-item"},e,":",r.createElement("br",null),n)}},function(t,e,n){function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(314)),r(n(315)),r(n(126))},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(8),a=n(21),u=n(20),l=n(126),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.defineAccessor=function(){return new u.DocumentViewAccessor("view",this.props.viewerComponents)},e.prototype.render=function(){var t=this.accessor.getSelectedOption(),e=i({},this.props,{itemComponent:t.itemComponent,listComponent:t.listComponent,mod:"sk-hits-"+t.key});return o.createElement(l.Annotations,i({},e))},e.propTypes=a({viewerComponents:s.arrayOf(s.shape({key:s.string.isRequired,title:s.string.isRequired,itemComponent:u.RenderComponentPropType,listComponent:u.RenderComponentPropType,defaultOption:s.bool}))},l.Annotations.propTypes),e}(u.ViewerComponent);e.DocumentViewSwitcher=c},function(t,e,n){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(20),o=n(0),s=n(316),a=n(87),u=n(63),l=n(333),c=n(40),h=function(t){function e(e){var n=t.call(this,e)||this;return n.state={menuOpen:!1},n.toggleMenu=n.toggleMenu.bind(n),n}return r(e,t),e.prototype.handleStateChange=function(t){this.setState({menuOpen:t.menuOpen})},e.prototype.closeMenu=function(){this.setState({menuOpen:!1})},e.prototype.toggleMenu=function(){this.setState(function(t){return{menuOpen:!t.menuOpen}})},e.prototype.componentWillMount=function(){t.prototype.componentWillMount.call(this),this.annotationsAccessor=new i.AnnotationsAccessor,this.viewer.addAccessor(this.annotationsAccessor)},e.prototype.buildMetadata=function(t){var e=t.getMetadata(),n=[];e.forEach(function(t){n.push(t.resource)});return n},e.prototype.render=function(){var t=this,e=this.getDocument();if(e){var n=c.create(e),r=c.TranslationCollection.getValue(n.getLabel()),i=this.buildMetadata(n);return o.createElement("div",{className:"manifest-info"},o.createElement(s.slide,{noOverlay:!0,right:!0,customBurgerIcon:!1,isOpen:this.state.menuOpen,onStateChange:function(e){return t.handleStateChange(e)}},o.createElement("ul",{className:"list-group"}," ",i.map(function(t){var e=t.data,n=t.label,r=t.value;return o.createElement(a.MetadataItem,{key:l(),data:e,label:n,value:r})}))),o.createElement("div",{className:"btn-group"},o.createElement(u.Controls,null),o.createElement("button",{type:"button",className:"btn btn-primary-outline btn-xs",onClick:this.toggleMenu},o.createElement("i",{className:"glyphicon glyphicon-info-sign"}))),o.createElement("div",{className:"window-manifest-title"},o.createElement("h2",{className:"window-manifest-title"},r)))}return null},e}(i.ViewerComponent);e.Metadata=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={slide:n(317),stack:n(322),elastic:n(323),bubble:n(326),push:n(327),pushRotate:n(328),scaleDown:n(329),scaleRotate:n(330),fallDown:n(331),reveal:n(332)},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={};e.default=(0,i.default)(o),t.exports=e.default},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_318__},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={overlay:function(t){return{position:"fixed",zIndex:1e3,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.3)",opacity:t?1:0,MozTransform:t?"":"translate3d(100%, 0, 0)",MsTransform:t?"":"translate3d(100%, 0, 0)",OTransform:t?"":"translate3d(100%, 0, 0)",WebkitTransform:t?"":"translate3d(100%, 0, 0)",transform:t?"":"translate3d(100%, 0, 0)",transition:t?"opacity 0.3s":"opacity 0.3s, transform 0s 0.3s"}},menuWrap:function(t,e,n){return{position:"fixed",right:n?0:"inherit",zIndex:1100,width:e,height:"100%",MozTransform:t?"":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",MsTransform:t?"":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",OTransform:t?"":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",WebkitTransform:t?"":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transform:t?"":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transition:"all 0.5s"}},menu:function(){return{height:"100%",boxSizing:"border-box",overflow:"auto"}},itemList:function(){return{height:"100%"}},item:function(){return{display:"block",outline:"none"}}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=o,n=s,r=!0,a=l=void 0}},l=n(0),c=r(l),h=n(8),p=r(h),f=function(t){function e(t){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={hover:!1}}return o(e,t),a(e,[{key:"getLineStyle",value:function(t){return{position:"absolute",height:"20%",left:0,right:0,top:2*t*20+"%",opacity:this.state.hover?.6:1}}},{key:"render",value:function(){var t=this,e=void 0,n={position:"absolute",left:0,top:0,width:"100%",height:"100%",margin:0,padding:0,border:"none",opacity:0,fontSize:8,cursor:"pointer"};if(this.props.customIcon){var r={className:"bm-icon",style:s({width:"100%",height:"100%"},this.props.styles.bmIcon)};e=c.default.cloneElement(this.props.customIcon,r)}else e=c.default.createElement("span",null,[0,1,2].map(function(e){return c.default.createElement("span",{key:e,className:("bm-burger-bars "+t.props.barClassName).trim(),style:s({},t.getLineStyle(e),t.props.styles.bmBurgerBars)})}));return c.default.createElement("div",{className:("bm-burger-button "+this.props.className).trim(),style:s({zIndex:1e3},this.props.styles.bmBurgerButton)},e,c.default.createElement("button",{onClick:this.props.onClick,onMouseOver:function(){return t.setState({hover:!0})},onMouseOut:function(){return t.setState({hover:!1})},style:n},"Open Menu"))}}]),e}(l.Component);e.default=f,f.propTypes={barClassName:p.default.string,customIcon:p.default.element,styles:p.default.object},f.defaultProps={barClassName:"",className:"",styles:{}},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=o,n=s,r=!0,a=l=void 0}},l=n(0),c=r(l),h=n(8),p=r(h),f=function(t){function e(){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),a(e,[{key:"getCrossStyle",value:function(t){return{position:"absolute",width:3,height:14,transform:"before"===t?"rotate(45deg)":"rotate(-45deg)"}}},{key:"render",value:function(){var t,e=this,n={position:"absolute",width:24,height:24,right:8,top:8},r={position:"absolute",left:0,top:0,width:"100%",height:"100%",margin:0,padding:0,border:"none",textIndent:-9999,background:"transparent",outline:"none",cursor:"pointer"};if(this.props.customIcon){var i={className:"bm-cross",style:s({width:"100%",height:"100%"},this.props.styles.bmCross)};t=c.default.cloneElement(this.props.customIcon,i)}else t=c.default.createElement("span",{style:{position:"absolute",top:"6px",right:"14px"}},["before","after"].map(function(t,n){return c.default.createElement("span",{key:n,className:("bm-cross "+e.props.crossClassName).trim(),style:s({},e.getCrossStyle(t),e.props.styles.bmCross)})}));return c.default.createElement("div",{className:("bm-cross-button "+this.props.className).trim(),style:s({},n,this.props.styles.bmCrossButton)},t,c.default.createElement("button",{onClick:this.props.onClick,style:r},"Close Menu"))}}]),e}(l.Component);e.default=f,f.propTypes={crossClassName:p.default.string,customIcon:p.default.element,styles:p.default.object},f.defaultProps={crossClassName:"",className:"",styles:{}},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={menuWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",MsTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",OTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",WebkitTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transition:t?"transform 0.8s cubic-bezier(0.7, 0, 0.3, 1)":"transform 0.4s cubic-bezier(0.7, 0, 0.3, 1)"}},item:function(t,e,n,r){return{MozTransform:t?"":"translate3d(0, "+500*r+"px, 0)",MsTransform:t?"":"translate3d(0, "+500*r+"px, 0)",OTransform:t?"":"translate3d(0, "+500*r+"px, 0)",WebkitTransform:t?"":"translate3d(0, "+500*r+"px, 0)",transform:t?"":"translate3d(0, "+500*r+"px, 0)",transition:t?"transform 0.8s cubic-bezier(0.7, 0, 0.3, 1)":"transform 0s 0.2s cubic-bezier(0.7, 0, 0.3, 1)"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(127),o=r(i),s=n(5),a=r(s),u={svg:{lib:o.default,pathInitial:"M-1,0h101c0,0-97.833,153.603-97.833,396.167C2.167,627.579,100,800,100,800H-1V0z",pathOpen:"M-1,0h101c0,0,0-1,0,395c0,404,0,405,0,405H-1V0z",animate:function(t){t.animate({path:this.pathOpen},400,window.mina.easeinout)}},morphShape:function(t,e,n){return{position:"absolute",width:120,height:"100%",right:n?"inherit":0,left:n?0:"inherit",MozTransform:n?"rotateY(180deg)":"",MsTransform:n?"rotateY(180deg)":"",OTransform:n?"rotateY(180deg)":"",WebkitTransform:n?"rotateY(180deg)":"",transform:n?"rotateY(180deg)":""}},menuWrap:function(t,e,n){return{MozTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",MsTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",OTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",WebkitTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transition:"all 0.3s"}},menu:function(t,e,n){return{position:"fixed",right:n?0:"inherit",width:180,whiteSpace:"nowrap",boxSizing:"border-box",overflow:"visible"}},itemList:function(t,e,n){if(n)return{position:"relative",left:"-110px",width:"170%",overflow:"auto"}},pageWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",MsTransform:t?"":n?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",OTransform:t?"":n?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",WebkitTransform:t?"":n?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",transform:t?"":n?"translate3d(-100px, 0, 0)":"translate3d(100px, 0, 0)",transition:t?"all 0.3s":"all 0.3s 0.1s"}},outerContainer:function(t){return{overflow:t?"":"hidden"}}};e.default=(0,a.default)(u),t.exports=e.default},function(t,e,n){window.eve=n(325);var r=function(t){var e,n={},r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16,(new Date).getTime()),!0},i=Array.isArray||function(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)},o=0,s="M"+(+new Date).toString(36),a=function(){return s+(o++).toString(36)},u=Date.now||function(){return+new Date},l=function(t){var e=this;if(null==t)return e.s;var n=e.s-t;e.b+=e.dur*n,e.B+=e.dur*n,e.s=t},c=function(t){var e=this;if(null==t)return e.spd;e.spd=t},h=function(t){var e=this;if(null==t)return e.dur;e.s=e.s*t/e.dur,e.dur=t},p=function(){var e=this;delete n[e.id],e.update(),t("mina.stop."+e.id,e)},f=function(){var t=this;t.pdif||(delete n[t.id],t.update(),t.pdif=t.get()-t.b)},d=function(){var t=this;t.pdif&&(t.b=t.get()-t.pdif,delete t.pdif,n[t.id]=t,m())},g=function(){var t,e=this;if(i(e.start)){t=[];for(var n=0,r=e.start.length;n<r;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},m=function(i){if(!i)return void(e||(e=r(m)));var o=0;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s],u=a.get();o++,a.s=(u-a.b)/(a.dur/a.spd),a.s>=1&&(delete n[s],a.s=1,o--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(a)),a.update()}e=!!o&&r(m)},v=function(t,e,r,i,o,s,u){var y={id:a(),start:t,end:e,b:r,s:0,dur:i-r,spd:1,get:o,set:s,easing:u||v.linear,status:l,speed:c,duration:h,stop:p,pause:f,resume:d,update:g};n[y.id]=y;var w,x=0;for(w in n)if(n.hasOwnProperty(w)&&2==++x)break;return 1==x&&m(),y};return v.time=u,v.getById=function(t){return n[t]||null},v.linear=function(t){return t},v.easeout=function(t){return Math.pow(t,1.7)},v.easein=function(t){return Math.pow(t,.48)},v.easeinout=function(t){if(1==t)return 1;if(0==t)return 0;var e=.48-t/1.04,n=Math.sqrt(.1734+e*e),r=n-e,i=Math.pow(Math.abs(r),1/3)*(r<0?-1:1),o=-n-e,s=Math.pow(Math.abs(o),1/3)*(o<0?-1:1),a=i+s+.5;return 3*(1-a)*a*a+a*a*a},v.backin=function(t){if(1==t)return 1;var e=1.70158;return t*t*((e+1)*t-e)},v.backout=function(t){if(0==t)return 0;t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},v.elastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},v.bounce=function(t){var e,n=7.5625,r=2.75;return t<1/r?e=n*t*t:t<2/r?(t-=1.5/r,e=n*t*t+.75):t<2.5/r?(t-=2.25/r,e=n*t*t+.9375):(t-=2.625/r,e=n*t*t+.984375),e},window.mina=v,v}("undefined"==typeof eve?function(){}:eve),i=function(t){function e(t,n){if(t){if(t.nodeType)return b(t);if(r(t,"array")&&e.set)return e.set.apply(e,t);if(t instanceof v)return t;if(null==n)try{return t=_.doc.querySelector(String(t)),b(t)}catch(t){return null}}return t=null==t?"100%":t,n=null==n?"100%":n,new x(t,n)}function n(t,e){if(e){if("#text"==t&&(t=_.doc.createTextNode(e.text||e["#text"]||"")),"#comment"==t&&(t=_.doc.createComment(e.text||e["#text"]||"")),"string"==typeof t&&(t=n(t)),"string"==typeof e)return 1==t.nodeType?"xlink:"==e.substring(0,6)?t.getAttributeNS(G,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(W,e.substring(4)):t.getAttribute(e):"text"==e?t.nodeValue:null;if(1==t.nodeType){for(var r in e)if(e[T](r)){var i=S(e[r]);i?"xlink:"==r.substring(0,6)?t.setAttributeNS(G,r.substring(6),i):"xml:"==r.substring(0,4)?t.setAttributeNS(W,r.substring(4),i):t.setAttribute(r,i):t.removeAttribute(r)}}else"text"in e&&(t.nodeValue=e.text)}else t=_.doc.createElementNS(W,t);return t}function r(t,e){return e=S.prototype.toLowerCase.call(e),"finite"==e?isFinite(t):!("array"!=e||!(t instanceof Array||Array.isArray&&Array.isArray(t)))||("null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||F.call(t).slice(8,-1).toLowerCase()==e)}function i(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[T](n)&&(e[n]=i(t[n]));return e}function o(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function s(t,e,n){function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join(""),a=r.cache=r.cache||{},u=r.count=r.count||[];return a[T](s)?(o(u,s),n?n(a[s]):a[s]):(u.length>=1e3&&delete a[u.shift()],u.push(s),a[s]=t.apply(e,i),n?n(a[s]):a[s])}return r}function a(t,e,n,r,i,o){if(null==i){var s=t-n,u=e-r;return s||u?(180+180*P.atan2(-u,-s)/M+360)%360:0}return a(t,e,i,o)-a(n,r,i,o)}function u(t){return t%360*M/180}function l(t){return 180*t/M%360}function c(t){var e=[];return t=t.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(t,n,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==n&&1==r.length&&r.push(0,0),"scale"==n&&(r.length>2?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==n?e.push(["m",1,0,P.tan(u(r[0])),1,0,0]):"skewY"==n?e.push(["m",1,P.tan(u(r[0])),0,1,0,0]):e.push([n.charAt(0)].concat(r)),t}),e}function h(t,n){var r=J(t),i=new e.Matrix;if(r)for(var o=0,s=r.length;o<s;o++){var a,u,l,c,h,p=r[o],f=p.length,d=S(p[0]).toLowerCase(),g=p[0]!=d,m=g?i.invert():0;"t"==d&&2==f?i.translate(p[1],0):"t"==d&&3==f?g?(a=m.x(0,0),u=m.y(0,0),l=m.x(p[1],p[2]),c=m.y(p[1],p[2]),i.translate(l-a,c-u)):i.translate(p[1],p[2]):"r"==d?2==f?(h=h||n,i.rotate(p[1],h.x+h.width/2,h.y+h.height/2)):4==f&&(g?(l=m.x(p[2],p[3]),c=m.y(p[2],p[3]),i.rotate(p[1],l,c)):i.rotate(p[1],p[2],p[3])):"s"==d?2==f||3==f?(h=h||n,i.scale(p[1],p[f-1],h.x+h.width/2,h.y+h.height/2)):4==f?g?(l=m.x(p[2],p[3]),c=m.y(p[2],p[3]),i.scale(p[1],p[1],l,c)):i.scale(p[1],p[1],p[2],p[3]):5==f&&(g?(l=m.x(p[3],p[4]),c=m.y(p[3],p[4]),i.scale(p[1],p[2],l,c)):i.scale(p[1],p[2],p[3],p[4])):"m"==d&&7==f&&i.add(p[1],p[2],p[3],p[4],p[5],p[6])}return i}function p(t){var n=t.node.ownerSVGElement&&b(t.node.ownerSVGElement)||t.node.parentNode&&b(t.node.parentNode)||e.select("svg")||e(0,0),r=n.select("defs"),i=null!=r&&r.node;return i||(i=w("defs",n.node).node),i}function f(t){return t.node.ownerSVGElement&&b(t.node.ownerSVGElement)||e.select("svg")}function d(t,e,r){function i(t){if(null==t)return N;if(t==+t)return t;n(l,{width:t});try{return l.getBBox().width}catch(t){return 0}}function o(t){if(null==t)return N;if(t==+t)return t;n(l,{height:t});try{return l.getBBox().height}catch(t){return 0}}function s(n,i){null==e?u[n]=i(t.attr(n)||0):n==e&&(u=i(null==r?t.attr(n)||0:r))}var a=f(t).node,u={},l=a.querySelector(".svg---mgr");switch(l||(l=n("rect"),n(l,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),a.appendChild(l)),t.type){case"rect":s("rx",i),s("ry",o);case"image":s("width",i),s("height",o);case"text":s("x",i),s("y",o);break;case"circle":s("cx",i),s("cy",o),s("r",i);break;case"ellipse":s("cx",i),s("cy",o),s("rx",i),s("ry",o);break;case"line":s("x1",i),s("x2",i),s("y1",o),s("y2",o);break;case"marker":s("refX",i),s("markerWidth",i),s("refY",o),s("markerHeight",o);break;case"radialGradient":s("fx",i),s("fy",o);break;case"tspan":s("dx",i),s("dy",o);break;default:s(e,i)}return a.removeChild(l),u}function m(t){r(t,"array")||(t=Array.prototype.slice.call(arguments,0));for(var e=0,n=0,i=this.node;this[e];)delete this[e++];for(e=0;e<t.length;e++)"set"==t[e].type?t[e].forEach(function(t){i.appendChild(t.node)}):i.appendChild(t[e].node);var o=i.childNodes;for(e=0;e<o.length;e++)this[n++]=b(o[e]);return this}function v(t){if(t.snap in q)return q[t.snap];var e;try{e=t.ownerSVGElement}catch(t){}this.node=t,e&&(this.paper=new x(e)),this.type=t.tagName||t.nodeName;var n=this.id=V(this);if(this.anims={},this._={transform:[]},t.snap=n,q[n]=this,"g"==this.type&&(this.add=m),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var r in x.prototype)x.prototype[T](r)&&(this[r]=x.prototype[r])}function y(t){this.node=t}function w(t,e){var r=n(t);return e.appendChild(r),b(r)}function x(t,e){var r,i,o,s=x.prototype;if(t&&t.tagName&&"svg"==t.tagName.toLowerCase()){if(t.snap in q)return q[t.snap];var a=t.ownerDocument;r=new v(t),i=t.getElementsByTagName("desc")[0],o=t.getElementsByTagName("defs")[0],i||(i=n("desc"),i.appendChild(a.createTextNode("Created with Snap")),r.node.appendChild(i)),o||(o=n("defs"),r.node.appendChild(o)),r.defs=o;for(var u in s)s[T](u)&&(r[u]=s[u]);r.paper=r.root=r}else r=w("svg",_.doc.body),n(r.node,{height:e,version:1.1,width:t,xmlns:W});return r}function b(t){return t?t instanceof v||t instanceof y?t:t.tagName&&"svg"==t.tagName.toLowerCase()?new x(t):t.tagName&&"object"==t.tagName.toLowerCase()&&"image/svg+xml"==t.type?new x(t.contentDocument.getElementsByTagName("svg")[0]):new v(t):t}function E(t,e){for(var n=0,r=t.length;n<r;n++){var i={type:t[n].type,attr:t[n].attr()},o=t[n].children();e.push(i),o.length&&E(o,i.childNodes=[])}}e.version="0.5.1",e.toString=function(){return"Snap v"+this.version},e._={};var _={win:t.window,doc:t.window.document};e._.glob=_;var T="hasOwnProperty",S=String,C=parseFloat,O=parseInt,P=Math,I=P.max,R=P.min,A=P.abs,M=(P.pow,P.PI),N=(P.round,""),F=Object.prototype.toString,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,k=(e._.separator=/[,\s]+/,/[\s]*,[\s]*/),D={hs:1,rg:1},B=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,j=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,H=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,z=0,U="S"+(+new Date).toString(36),V=function(t){return(t&&t.type?t.type:N)+U+(z++).toString(36)},G="http://www.w3.org/1999/xlink",W="http://www.w3.org/2000/svg",q={};e.url=function(t){return"url('#"+t+"')"};e._.$=n,e._.id=V,e.format=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,r){var i=r;return n.replace(e,function(t,e,n,r,o){e=e||r,i&&(e in i&&(i=i[e]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==r?t:i)+""};return function(e,r){return S(e).replace(t,function(t,e){return n(t,e,r)})}}(),e._.clone=i,e._.cacher=s,e.rad=u,e.deg=l,e.sin=function(t){return P.sin(e.rad(t))},e.tan=function(t){return P.tan(e.rad(t))},e.cos=function(t){return P.cos(e.rad(t))},e.asin=function(t){return e.deg(P.asin(t))},e.acos=function(t){return e.deg(P.acos(t))},e.atan=function(t){return e.deg(P.atan(t))},e.atan2=function(t){return e.deg(P.atan2(t))},e.angle=a,e.len=function(t,n,r,i){return Math.sqrt(e.len2(t,n,r,i))},e.len2=function(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)},e.closestPoint=function(t,e,n){function r(t){var r=t.x-e,i=t.y-n;return r*r+i*i}for(var i,o,s,a,u=t.node,l=u.getTotalLength(),c=l/u.pathSegList.numberOfItems*.125,h=1/0,p=0;p<=l;p+=c)(a=r(s=u.getPointAtLength(p)))<h&&(i=s,o=p,h=a);for(c*=.5;c>.5;){var f,d,g,m,v,y;(g=o-c)>=0&&(v=r(f=u.getPointAtLength(g)))<h?(i=f,o=g,h=v):(m=o+c)<=l&&(y=r(d=u.getPointAtLength(m)))<h?(i=d,o=m,h=y):c*=.5}return i={x:i.x,y:i.y,length:o,distance:Math.sqrt(h)}},e.is=r,e.snapTo=function(t,e,n){if(n=r(n,"finite")?n:10,r(t,"array")){for(var i=t.length;i--;)if(A(t[i]-e)<=n)return t[i]}else{t=+t;var o=e%t;if(o<n)return e-o;if(o>t-n)return e-o+t}return e},e.getRGB=s(function(t){if(!t||(t=S(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:Z};if(!(D[T](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=$(t)),!t)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z};var n,i,o,s,a,u,l=t.match(L);return l?(l[2]&&(o=O(l[2].substring(5),16),i=O(l[2].substring(3,5),16),n=O(l[2].substring(1,3),16)),l[3]&&(o=O((a=l[3].charAt(3))+a,16),i=O((a=l[3].charAt(2))+a,16),n=O((a=l[3].charAt(1))+a,16)),l[4]&&(u=l[4].split(k),n=C(u[0]),"%"==u[0].slice(-1)&&(n*=2.55),i=C(u[1]),"%"==u[1].slice(-1)&&(i*=2.55),o=C(u[2]),"%"==u[2].slice(-1)&&(o*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(s=C(u[3])),u[3]&&"%"==u[3].slice(-1)&&(s/=100)),l[5]?(u=l[5].split(k),n=C(u[0]),"%"==u[0].slice(-1)&&(n/=100),i=C(u[1]),"%"==u[1].slice(-1)&&(i/=100),o=C(u[2]),"%"==u[2].slice(-1)&&(o/=100),("deg"==u[0].slice(-3)||""==u[0].slice(-1))&&(n/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(s=C(u[3])),u[3]&&"%"==u[3].slice(-1)&&(s/=100),e.hsb2rgb(n,i,o,s)):l[6]?(u=l[6].split(k),n=C(u[0]),"%"==u[0].slice(-1)&&(n/=100),i=C(u[1]),"%"==u[1].slice(-1)&&(i/=100),o=C(u[2]),"%"==u[2].slice(-1)&&(o/=100),("deg"==u[0].slice(-3)||""==u[0].slice(-1))&&(n/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(s=C(u[3])),u[3]&&"%"==u[3].slice(-1)&&(s/=100),e.hsl2rgb(n,i,o,s)):(n=R(P.round(n),255),i=R(P.round(i),255),o=R(P.round(o),255),s=R(I(s,0),1),l={r:n,g:i,b:o,toString:Z},l.hex="#"+(16777216|o|i<<8|n<<16).toString(16).slice(1),l.opacity=r(s,"finite")?s:1,l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Z}},e),e.hsb=s(function(t,n,r){return e.hsb2rgb(t,n,r).hex}),e.hsl=s(function(t,n,r){return e.hsl2rgb(t,n,r).hex}),e.rgb=s(function(t,e,n,i){if(r(i,"finite")){var o=P.round;return"rgba("+[o(t),o(e),o(n),+i.toFixed(2)]+")"}return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)});var $=function(t){var e=_.doc.getElementsByTagName("head")[0]||_.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return($=s(function(t){if("red"==t.toLowerCase())return n;e.style.color=n,e.style.color=t;var r=_.doc.defaultView.getComputedStyle(e,N).getPropertyValue("color");return r==n?null:r}))(t)},Y=function(){return"hsb("+[this.h,this.s,this.b]+")"},X=function(){return"hsl("+[this.h,this.s,this.l]+")"},Z=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},K=function(t,n,i){if(null==n&&r(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,n=t.g,t=t.r),null==n&&r(t,string)){var o=e.getRGB(t);t=o.r,n=o.g,i=o.b}return(t>1||n>1||i>1)&&(t/=255,n/=255,i/=255),[t,n,i]},Q=function(t,n,i,o){t=P.round(255*t),n=P.round(255*n),i=P.round(255*i);var s={r:t,g:n,b:i,opacity:r(o,"finite")?o:1,hex:e.rgb(t,n,i),toString:Z};return r(o,"finite")&&(s.opacity=o),s};e.color=function(t){var n;return r(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.opacity=1,t.hex=n.hex):r(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.opacity=1,t.hex=n.hex):(r(t,"string")&&(t=e.getRGB(t)),r(t,"object")&&"r"in t&&"g"in t&&"b"in t&&!("error"in t)?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1,t.error=1)),t.toString=Z,t},e.hsb2rgb=function(t,e,n,i){r(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,i=t.o,t=t.h),t*=360;var o,s,a,u,l;return t=t%360/60,l=n*e,u=l*(1-A(t%2-1)),o=s=a=n-l,t=~~t,o+=[l,u,0,0,u,l][t],s+=[u,l,l,u,0,0][t],a+=[0,0,u,l,l,u][t],Q(o,s,a,i)},e.hsl2rgb=function(t,e,n,i){r(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var o,s,a,u,l;return t=t%360/60,l=2*e*(n<.5?n:1-n),u=l*(1-A(t%2-1)),o=s=a=n-l/2,t=~~t,o+=[l,u,0,0,u,l][t],s+=[u,l,l,u,0,0][t],a+=[0,0,u,l,l,u][t],Q(o,s,a,i)},e.rgb2hsb=function(t,e,n){n=K(t,e,n),t=n[0],e=n[1],n=n[2];var r,i,o,s;return o=I(t,e,n),s=o-R(t,e,n),r=0==s?null:o==t?(e-n)/s:o==e?(n-t)/s+2:(t-e)/s+4,r=(r+360)%6*60/360,i=0==s?0:s/o,{h:r,s:i,b:o,toString:Y}},e.rgb2hsl=function(t,e,n){n=K(t,e,n),t=n[0],e=n[1],n=n[2];var r,i,o,s,a,u;return s=I(t,e,n),a=R(t,e,n),u=s-a,r=0==u?null:s==t?(e-n)/u:s==e?(n-t)/u+2:(t-e)/u+4,r=(r+360)%6*60/360,o=(s+a)/2,i=0==u?0:o<.5?u/(2*o):u/(2-2*o),{h:r,s:i,l:o,toString:X}},e.parsePathString=function(t){if(!t)return null;var n=e.path(t);if(n.arr)return e.path.clone(n.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return r(t,"array")&&r(t[0],"array")&&(o=e.path.clone(t)),o.length||S(t).replace(B,function(t,e,n){var r=[],s=e.toLowerCase();if(n.replace(H,function(t,e){e&&r.push(+e)}),"m"==s&&r.length>2&&(o.push([e].concat(r.splice(0,2))),s="l",e="m"==e?"l":"L"),"o"==s&&1==r.length&&o.push([e,r[0]]),"r"==s)o.push([e].concat(r));else for(;r.length>=i[s]&&(o.push([e].concat(r.splice(0,i[s]))),i[s]););}),o.toString=e.path.toString,n.arr=e.path.clone(o),o};var J=e.parseTransformString=function(t){if(!t)return null;var n=[];return r(t,"array")&&r(t[0],"array")&&(n=e.path.clone(t)),n.length||S(t).replace(j,function(t,e,r){var i=[];e.toLowerCase();r.replace(H,function(t,e){e&&i.push(+e)}),n.push([e].concat(i))}),n.toString=e.path.toString,n};e._.svgTransform2string=c,e._.rgTransform=/^[a-z][\s]*-?\.?\d/i,e._.transform2matrix=h,e._unit2px=d;_.doc.contains||_.doc.compareDocumentPosition;e._.getSomeDefs=p,e._.getSomeSVG=f,e.select=function(t){return t=S(t).replace(/([^\\]):/g,"$1\\:"),b(_.doc.querySelector(t))},e.selectAll=function(t){for(var n=_.doc.querySelectorAll(t),r=(e.set||Array)(),i=0;i<n.length;i++)r.push(b(n[i]));return r},setInterval(function(){for(var t in q)if(q[T](t)){var e=q[t],n=e.node;("svg"!=e.type&&!n.ownerSVGElement||"svg"==e.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete q[t]}},1e4),v.prototype.attr=function(t,e){var n=this,i=n.node;if(!t){if(1!=i.nodeType)return{text:i.nodeValue};for(var o=i.attributes,s={},a=0,u=o.length;a<u;a++)s[o[a].nodeName]=o[a].nodeValue;return s}if(r(t,"string")){if(!(arguments.length>1))return eve("snap.util.getattr."+t,n).firstDefined();var l={};l[t]=e,t=l}for(var c in t)t[T](c)&&eve("snap.util.attr."+c,n,t[c]);return n},e.parse=function(t){var e=_.doc.createDocumentFragment(),n=!0,r=_.doc.createElement("div");if(t=S(t),t.match(/^\s*<\s*svg(?:\s|>)/)||(t="<svg>"+t+"</svg>",n=!1),r.innerHTML=t,t=r.getElementsByTagName("svg")[0])if(n)e=t;else for(;t.firstChild;)e.appendChild(t.firstChild);return new y(e)},e.fragment=function(){for(var t=Array.prototype.slice.call(arguments,0),n=_.doc.createDocumentFragment(),r=0,i=t.length;r<i;r++){var o=t[r];o.node&&o.node.nodeType&&n.appendChild(o.node),o.nodeType&&n.appendChild(o),"string"==typeof o&&n.appendChild(e.parse(o).node)}return new y(n)},e._.make=w,e._.wrap=b,x.prototype.el=function(t,e){var n=w(t,this.node);return e&&n.attr(e),n},v.prototype.children=function(){for(var t=[],n=this.node.childNodes,r=0,i=n.length;r<i;r++)t[r]=e(n[r]);return t},v.prototype.toJSON=function(){var t=[];return E([this],t),t[0]},eve.on("snap.util.getattr",function(){var t=eve.nt();t=t.substring(t.lastIndexOf(".")+1);var e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});return tt[T](e)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(e):n(this.node,t)});var tt={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};eve.on("snap.util.attr",function(t){var e=eve.nt(),r={};e=e.substring(e.lastIndexOf(".")+1),r[e]=t;var i=e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()}),o=e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});tt[T](o)?this.node.style[i]=null==t?N:t:n(this.node,r)}),x.prototype,e.ajax=function(t,e,n,i){var o=new XMLHttpRequest,s=V();if(o){if(r(e,"function"))i=n,n=e,e=null;else if(r(e,"object")){var a=[];for(var u in e)e.hasOwnProperty(u)&&a.push(encodeURIComponent(u)+"="+encodeURIComponent(e[u]));e=a.join("&")}return o.open(e?"POST":"GET",t,!0),(e&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),n&&(eve.once("snap.ajax."+s+".0",n),eve.once("snap.ajax."+s+".200",n),eve.once("snap.ajax."+s+".304",n)),o.onreadystatechange=function(){4==o.readyState&&eve("snap.ajax."+s+"."+o.status,i,o)},4==o.readyState)?o:(o.send(e),o)}},e.load=function(t,n,r){e.ajax(t,function(t){var i=e.parse(t.responseText);r?n.call(r,i):n(i)})};var et=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,r=n.body,i=n.documentElement,o=i.clientTop||r.clientTop||0,s=i.clientLeft||r.clientLeft||0;return{y:e.top+(g.win.pageYOffset||i.scrollTop||r.scrollTop)-o,x:e.left+(g.win.pageXOffset||i.scrollLeft||r.scrollLeft)-s}};return e.getElementByPoint=function(t,e){var n=this,r=(n.canvas,_.doc.elementFromPoint(t,e));if(_.win.opera&&"svg"==r.tagName){var i=et(r),o=r.createSVGRect();o.x=t-i.x,o.y=e-i.y,o.width=o.height=1;var s=r.getIntersectionList(o,null);s.length&&(r=s[s.length-1])}return r?b(r):null},e.plugin=function(t){t(e,v,x,_,y)},_.win.Snap=e,e}(window||this);i.plugin(function(t,e,n,r,i){function o(e,n){if(null==n){var r=!0;if(!(n="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new t.Matrix;n=t._.svgTransform2string(n)}else n=t._.rgTransform.test(n)?c(n).replace(/\.{3}|\u2026/g,e._.transform||""):t._.svgTransform2string(n),l(n,"array")&&(n=t.path?t.path.toString.call(n):c(n)),e._.transform=n;var i=t._.transform2matrix(n,e.getBBox(1));if(r)return i;e.matrix=i}function s(e){function n(e,n){var r=p(e.node,n);r=r&&r.match(o),(r=r&&r[2])&&"#"==r.charAt()&&(r=r.substring(1))&&(a[r]=(a[r]||[]).concat(function(r){var i={};i[n]=t.url(r),p(e.node,i)}))}for(var r,i=e.selectAll("*"),o=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],a={},u=0,l=i.length;u<l;u++){r=i[u],n(r,"fill"),n(r,"stroke"),n(r,"filter"),n(r,"mask"),n(r,"clip-path"),function(t){var e=p(t.node,"xlink:href");e&&"#"==e.charAt()&&(e=e.substring(1))&&(a[e]=(a[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)}))}(r);var c=p(r.node,"id");c&&(p(r.node,{id:r.id}),s.push({old:c,id:r.id}))}for(u=0,l=s.length;u<l;u++){var h=a[s[u].old];if(h)for(var f=0,d=h.length;f<d;f++)h[f](s[u].id)}}function a(t){return function(){var e=t?"<"+this.type:"",n=this.node.attributes,r=this.node.childNodes;if(t)for(var i=0,o=n.length;i<o;i++)e+=" "+n[i].name+'="'+n[i].value.replace(/"/g,'\\"')+'"';if(r.length){for(t&&(e+=">"),i=0,o=r.length;i<o;i++)3==r[i].nodeType?e+=r[i].nodeValue:1==r[i].nodeType&&(e+=g(r[i]).toString());t&&(e+="</"+this.type+">")}else t&&(e+="/>");return e}}var u=e.prototype,l=t.is,c=String,h=t._unit2px,p=t._.$,f=t._.make,d=t._.getSomeDefs,g=t._.wrap;u.getBBox=function(e){if("tspan"==this.type)return t._.box(this.node.getClientRects().item(0));if(!t.Matrix||!t.path)return this.node.getBBox();var n=this,r=new t.Matrix;if(n.removed)return t._.box();for(;"use"==n.type;)if(e||(r=r.add(n.transform().localMatrix.translate(n.attr("x")||0,n.attr("y")||0))),n.original)n=n.original;else{var i=n.attr("xlink:href");n=n.original=n.node.ownerDocument.getElementById(i.substring(i.indexOf("#")+1))}var o=n._,s=t.path.get[n.type]||t.path.get.deflt;try{return e?(o.bboxwt=s?t.path.getBBox(n.realPath=s(n)):t._.box(n.node.getBBox()),t._.box(o.bboxwt)):(n.realPath=s(n),n.matrix=n.transform().localMatrix,o.bbox=t.path.getBBox(t.path.map(n.realPath,r.add(n.matrix))),t._.box(o.bbox))}catch(e){return t._.box()}};var m=function(){return this.string};u.transform=function(e){var n=this._;if(null==e){for(var r,i=this,s=new t.Matrix(this.node.getCTM()),a=o(this),u=[a],l=new t.Matrix,h=a.toTransformString(),f=c(a)==c(this.matrix)?c(n.transform):h;"svg"!=i.type&&(i=i.parent());)u.push(o(i));for(r=u.length;r--;)l.add(u[r]);return{string:f,globalMatrix:s,totalMatrix:l,localMatrix:a,diffMatrix:s.clone().add(a.invert()),global:s.toTransformString(),total:l.toTransformString(),local:h,toString:m}}return e instanceof t.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):o(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?p(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?p(this.node,{patternTransform:this.matrix}):p(this.node,{transform:this.matrix})),this},u.parent=function(){return g(this.node.parentNode)},u.append=u.add=function(t){if(t){if("set"==t.type){var e=this;return t.forEach(function(t){e.add(t)}),this}t=g(t),this.node.appendChild(t.node),t.paper=this.paper}return this},u.appendTo=function(t){return t&&(t=g(t),t.append(this)),this},u.prepend=function(t){if(t){if("set"==t.type){var e,n=this;return t.forEach(function(t){e?e.after(t):n.prepend(t),e=t}),this}t=g(t);var r=t.parent();this.node.insertBefore(t.node,this.node.firstChild),this.add&&this.add(),t.paper=this.paper,this.parent()&&this.parent().add(),r&&r.add()}return this},u.prependTo=function(t){return t=g(t),t.prepend(this),this},u.before=function(t){if("set"==t.type){var e=this;return t.forEach(function(t){var n=t.parent();e.node.parentNode.insertBefore(t.node,e.node),n&&n.add()}),this.parent().add(),this}t=g(t);var n=t.parent();return this.node.parentNode.insertBefore(t.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),t.paper=this.paper,this},u.after=function(t){t=g(t);var e=t.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(t.node,this.node.nextSibling):this.node.parentNode.appendChild(t.node),this.parent()&&this.parent().add(),e&&e.add(),t.paper=this.paper,this},u.insertBefore=function(t){t=g(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},u.insertAfter=function(t){t=g(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node.nextSibling),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},u.remove=function(){var t=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,t&&t.add(),this},u.select=function(t){return g(this.node.querySelector(t))},u.selectAll=function(e){for(var n=this.node.querySelectorAll(e),r=(t.set||Array)(),i=0;i<n.length;i++)r.push(g(n[i]));return r},u.asPX=function(t,e){return null==e&&(e=this.attr(t)),+h(this,t,e)},u.use=function(){var t,e=this.node.id;return e||(e=this.id,p(this.node,{id:e})),t="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?f(this.type,this.node.parentNode):f("use",this.node.parentNode),p(t.node,{"xlink:href":"#"+e}),t.original=this,t},u.clone=function(){var t=g(this.node.cloneNode(!0));return p(t.node,"id")&&p(t.node,{id:t.id}),s(t),t.insertAfter(this),t},u.toDefs=function(){return d(this).appendChild(this.node),this},u.pattern=u.toPattern=function(t,e,n,r){var i=f("pattern",d(this));return null==t&&(t=this.getBBox()),l(t,"object")&&"x"in t&&(e=t.y,n=t.width,r=t.height,t=t.x),p(i.node,{x:t,y:e,width:n,height:r,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[t,e,n,r].join(" ")}),i.node.appendChild(this.node),i},u.marker=function(t,e,n,r,i,o){var s=f("marker",d(this));return null==t&&(t=this.getBBox()),l(t,"object")&&"x"in t&&(e=t.y,n=t.width,r=t.height,i=t.refX||t.cx,o=t.refY||t.cy,t=t.x),p(s.node,{viewBox:[t,e,n,r].join(" "),markerWidth:n,markerHeight:r,orient:"auto",refX:i||0,refY:o||0,id:s.id}),s.node.appendChild(this.node),s};var v={};u.data=function(e,n){var r=v[this.id]=v[this.id]||{};if(0==arguments.length)return eve("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(t.is(e,"object")){for(var i in e)e.hasOwnProperty(i)&&this.data(i,e[i]);return this}return eve("snap.data.get."+this.id,this,r[e],e),r[e]}return r[e]=n,eve("snap.data.set."+this.id,this,n,e),this},u.removeData=function(t){return null==t?v[this.id]={}:v[this.id]&&delete v[this.id][t],this},u.outerSVG=u.toString=a(1),u.innerSVG=a(),u.toDataURL=function(){if(window&&window.btoa){var e=this.getBBox(),n=t.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))}},i.prototype.select=u.select,i.prototype.selectAll=u.selectAll}),i.plugin(function(t,e,n,r,i){function o(t,e,n,r,i,o){if(null==e&&"[object SVGMatrix]"==s.call(t))return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,void(this.f=t.f);null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}var s=Object.prototype.toString,a=String,u=Math;!function(e){function n(t){return t[0]*t[0]+t[1]*t[1]}function r(t){var e=u.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}e.add=function(t,e,n,r,i,s){if(t&&t instanceof o)return this.add(t.a,t.b,t.c,t.d,t.e,t.f);var a=t*this.a+e*this.c,u=t*this.b+e*this.d;return this.e+=i*this.a+s*this.c,this.f+=i*this.b+s*this.d,this.c=n*this.a+r*this.c,this.d=n*this.b+r*this.d,this.a=a,this.b=u,this},o.prototype.multLeft=function(t,e,n,r,i,s){if(t&&t instanceof o)return this.multLeft(t.a,t.b,t.c,t.d,t.e,t.f);var a=t*this.a+n*this.b,u=t*this.c+n*this.d,l=t*this.e+n*this.f+i;return this.b=e*this.a+r*this.b,this.d=e*this.c+r*this.d,this.f=e*this.e+r*this.f+s,this.a=a,this.c=u,this.e=l,this},e.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new o(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},e.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(t,e){return this.e+=t*this.a+e*this.c,this.f+=t*this.b+e*this.d,this},e.scale=function(t,e,n,r){return null==e&&(e=t),(n||r)&&this.translate(n,r),this.a*=t,this.b*=t,this.c*=e,this.d*=e,(n||r)&&this.translate(-n,-r),this},e.rotate=function(e,n,r){e=t.rad(e),n=n||0,r=r||0;var i=+u.cos(e).toFixed(9),o=+u.sin(e).toFixed(9);return this.add(i,o,-o,i,n,r),this.add(1,0,0,1,-n,-r)},e.skewX=function(t){return this.skew(t,0)},e.skewY=function(t){return this.skew(0,t)},e.skew=function(e,n){e=e||0,n=n||0,e=t.rad(e),n=t.rad(n);var r=u.tan(e).toFixed(9),i=u.tan(n).toFixed(9);return this.add(1,i,r,1,0,0)},e.x=function(t,e){return t*this.a+e*this.c+this.e},e.y=function(t,e){return t*this.b+e*this.d+this.f},e.get=function(t){return+this[a.fromCharCode(97+t)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.determinant=function(){return this.a*this.d-this.b*this.c},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.b],[this.c,this.d]];e.scalex=u.sqrt(n(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=u.sqrt(n(i[1])),r(i[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var o=i[0][1],s=i[1][1];return s<0?(e.rotate=t.deg(u.acos(s)),o<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(u.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(t){var e=t||this.split();return+e.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[+e.dx.toFixed(4),+e.dy.toFixed(4)]:"")+(e.rotate?"r"+[+e.rotate.toFixed(4),0,0]:"")+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:""))}}(o.prototype),t.Matrix=o,t.matrix=function(t,e,n,r,i,s){return new o(t,e,n,r,i,s)}}),i.plugin(function(t,e,n,r,i){function o(n){return function(r){if(eve.stop(),r instanceof i&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,p(this).appendChild(r),r=c(r)),r instanceof e)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||d(r.node,{id:r.id});var o=g(r.node.id)}else o=r.attr(n);else if(o=t.color(r),o.error){var s=t(p(this).ownerSVGElement).gradient(r);s?(s.node.id||d(s.node,{id:s.id}),o=g(s.node.id)):o=r}else o=m(o);var a={};a[n]=o,d(this.node,a),this.node.style[n]=y}}function s(t){eve.stop(),t==+t&&(t+="px"),this.node.style.fontSize=t}function a(t){for(var e=[],n=t.childNodes,r=0,i=n.length;r<i;r++){var o=n[r];3==o.nodeType&&e.push(o.nodeValue),"tspan"==o.tagName&&(1==o.childNodes.length&&3==o.firstChild.nodeType?e.push(o.firstChild.nodeValue):e.push(a(o)))}return e}function u(){return eve.stop(),this.node.style.fontSize}var l=t._.make,c=t._.wrap,h=t.is,p=t._.getSomeDefs,f=/^url\((['"]?)([^)]+)\1\)$/,d=t._.$,g=t.url,m=String,v=t._.separator,y="";t.deurl=function(t){var e=String(t).match(f);return e?e[2]:t},eve.on("snap.util.attr.mask",function(t){if(t instanceof e||t instanceof i){if(eve.stop(),t instanceof i&&1==t.node.childNodes.length&&(t=t.node.firstChild,p(this).appendChild(t),t=c(t)),"mask"==t.type)var n=t;else n=l("mask",p(this)),n.node.appendChild(t.node);!n.node.id&&d(n.node,{id:n.id}),d(this.node,{mask:g(n.id)})}}),function(t){eve.on("snap.util.attr.clip",t),eve.on("snap.util.attr.clip-path",t),eve.on("snap.util.attr.clipPath",t)}(function(t){if(t instanceof e||t instanceof i){eve.stop();for(var n,r=t.node;r;){if("clipPath"===r.nodeName){n=new e(r);break}if("svg"===r.nodeName){n=void 0;break}r=r.parentNode}n||(n=l("clipPath",p(this)),n.node.appendChild(t.node),!n.node.id&&d(n.node,{id:n.id})),d(this.node,{"clip-path":g(n.node.id||n.id)})}}),eve.on("snap.util.attr.fill",o("fill")),eve.on("snap.util.attr.stroke",o("stroke"));var w=/^([lr])(?:\(([^)]*)\))?(.*)$/i;eve.on("snap.util.grad.parse",function(t){function e(t,e){for(var n=(e-a)/(t-u),r=u;r<t;r++)o[r].offset=+(+a+n*(r-u)).toFixed(2);u=t,a=e}t=m(t);var n=t.match(w);if(!n)return null;var r=n[1],i=n[2],o=n[3];i=i.split(/\s*,\s*/).map(function(t){return+t==t?+t:t}),1==i.length&&0==i[0]&&(i=[]),o=o.split("-"),o=o.map(function(t){t=t.split(":");var e={color:t[0]};return t[1]&&(e.offset=parseFloat(t[1])),e});var s=o.length,a=0,u=0;s--;for(var l=0;l<s;l++)"offset"in o[l]&&e(l,o[l].offset);return o[s].offset=o[s].offset||100,e(s,o[s].offset),{type:r,params:i,stops:o}}),eve.on("snap.util.attr.d",function(e){eve.stop(),h(e,"array")&&h(e[0],"array")&&(e=t.path.toString.call(e)),e=m(e),e.match(/[ruo]/i)&&(e=t.path.toAbsolute(e)),d(this.node,{d:e})})(-1),eve.on("snap.util.attr.#text",function(t){eve.stop(),t=m(t);for(var e=r.doc.createTextNode(t);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(e)})(-1),eve.on("snap.util.attr.path",function(t){eve.stop(),this.attr({d:t})})(-1),eve.on("snap.util.attr.class",function(t){eve.stop(),this.node.className.baseVal=t})(-1),eve.on("snap.util.attr.viewBox",function(t){var e;e=h(t,"object")&&"x"in t?[t.x,t.y,t.width,t.height].join(" "):h(t,"array")?t.join(" "):t,d(this.node,{viewBox:e}),eve.stop()})(-1),eve.on("snap.util.attr.transform",function(t){this.transform(t),eve.stop()})(-1),eve.on("snap.util.attr.r",function(t){"rect"==this.type&&(eve.stop(),d(this.node,{rx:t,ry:t}))})(-1),eve.on("snap.util.attr.textpath",function(t){if(eve.stop(),"text"==this.type){var n,r,i;if(!t&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(h(t,"string")){var o=p(this),s=c(o.parentNode).path(t);o.appendChild(s.node),n=s.id,s.attr({id:n})}else(t=c(t))instanceof e&&((n=t.attr("id"))||(n=t.id,t.attr({id:n})));if(n)if(r=this.textPath,i=this.node,r)r.attr({"xlink:href":"#"+n});else{for(r=d("textPath",{"xlink:href":"#"+n});i.firstChild;)r.appendChild(i.firstChild);i.appendChild(r),this.textPath=c(r)}}})(-1),eve.on("snap.util.attr.text",function(t){if("text"==this.type){for(var e=this.node,n=function(t){var e=d("tspan");if(h(t,"array"))for(var i=0;i<t.length;i++)e.appendChild(n(t[i]));else e.appendChild(r.doc.createTextNode(t));return e.normalize&&e.normalize(),e};e.firstChild;)e.removeChild(e.firstChild);for(var i=n(t);i.firstChild;)e.appendChild(i.firstChild)}eve.stop()})(-1),eve.on("snap.util.attr.fontSize",s)(-1),eve.on("snap.util.attr.font-size",s)(-1),eve.on("snap.util.getattr.transform",function(){return eve.stop(),this.transform()})(-1),eve.on("snap.util.getattr.textpath",function(){return eve.stop(),this.textPath})(-1),function(){function e(e){return function(){eve.stop();var n=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==n?n:t(r.doc.getElementById(n.match(f)[1]))}}function n(t){return function(e){eve.stop();var n="marker"+t.charAt(0).toUpperCase()+t.substring(1);if(""==e||!e)return void(this.node.style[n]="none");if("marker"==e.type){var r=e.node.id;return r||d(e.node,{id:e.id}),void(this.node.style[n]=g(r))}}}eve.on("snap.util.getattr.marker-end",e("end"))(-1),eve.on("snap.util.getattr.markerEnd",e("end"))(-1),eve.on("snap.util.getattr.marker-start",e("start"))(-1),eve.on("snap.util.getattr.markerStart",e("start"))(-1),eve.on("snap.util.getattr.marker-mid",e("mid"))(-1),eve.on("snap.util.getattr.markerMid",e("mid"))(-1),eve.on("snap.util.attr.marker-end",n("end"))(-1),eve.on("snap.util.attr.markerEnd",n("end"))(-1),eve.on("snap.util.attr.marker-start",n("start"))(-1),eve.on("snap.util.attr.markerStart",n("start"))(-1),eve.on("snap.util.attr.marker-mid",n("mid"))(-1),eve.on("snap.util.attr.markerMid",n("mid"))(-1)}(),eve.on("snap.util.getattr.r",function(){if("rect"==this.type&&d(this.node,"rx")==d(this.node,"ry"))return eve.stop(),d(this.node,"rx")})(-1),eve.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){eve.stop();var t=a(this.node);return 1==t.length?t[0]:t}})(-1),eve.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),eve.on("snap.util.getattr.fill",function(e){if(!e){eve.stop();var n=eve("snap.util.getattr.fill",this,!0).firstDefined();return t(t.deurl(n))||n}})(-1),eve.on("snap.util.getattr.stroke",function(e){if(!e){eve.stop();var n=eve("snap.util.getattr.stroke",this,!0).firstDefined();return t(t.deurl(n))||n}})(-1),eve.on("snap.util.getattr.viewBox",function(){eve.stop();var e=d(this.node,"viewBox");return e?(e=e.split(v),t._.box(+e[0],+e[1],+e[2],+e[3])):void 0})(-1),eve.on("snap.util.getattr.points",function(){var t=d(this.node,"points");return eve.stop(),t?t.split(v):void 0})(-1),eve.on("snap.util.getattr.path",function(){var t=d(this.node,"d");return eve.stop(),t})(-1),eve.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),eve.on("snap.util.getattr.fontSize",u)(-1),eve.on("snap.util.getattr.font-size",u)(-1)}),i.plugin(function(t,e,n,r,i){var o=/\S+/g,s=String,a=e.prototype;a.addClass=function(t){var e,n,r,i=s(t||"").match(o)||[],a=this.node,u=a.className.baseVal,l=u.match(o)||[];if(i.length){for(e=0;n=i[e++];)~l.indexOf(n)||l.push(n);r=l.join(" "),u!=r&&(a.className.baseVal=r)}return this},a.removeClass=function(t){var e,n,r,i,a=s(t||"").match(o)||[],u=this.node,l=u.className.baseVal,c=l.match(o)||[];if(c.length){for(e=0;r=a[e++];)~(n=c.indexOf(r))&&c.splice(n,1);i=c.join(" "),l!=i&&(u.className.baseVal=i)}return this},a.hasClass=function(t){return!!~(this.node.className.baseVal.match(o)||[]).indexOf(t)},a.toggleClass=function(t,e){if(null!=e)return e?this.addClass(t):this.removeClass(t);var n,r,i,s,a=(t||"").match(o)||[],u=this.node,l=u.className.baseVal,c=l.match(o)||[];for(n=0;i=a[n++];)r=c.indexOf(i),~r?c.splice(r,1):c.push(i);return s=c.join(" "),l!=s&&(u.className.baseVal=s),this}}),i.plugin(function(t,e,n,r,i){function o(t){return t}function s(t){return function(e){return+e.toFixed(3)+t}}var a={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"*":function(t,e){return t*e}},u=String,l=/[a-z]+$/i,c=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;eve.on("snap.util.attr",function(t){var e=u(t).match(c);if(e){var n=eve.nt(),r=n.substring(n.lastIndexOf(".")+1),i=this.attr(r),o={};eve.stop();var s=e[3]||"",h=i.match(l),p=a[e[1]];if(h&&h==s?t=p(parseFloat(i),+e[2]):(i=this.asPX(r),t=p(this.asPX(r),this.asPX(r,e[2]+s))),isNaN(i)||isNaN(t))return;o[r]=t,this.attr(o)}})(-10),eve.on("snap.util.equal",function(t,e){var n=u(this.attr(t)||""),r=u(e).match(c);if(r){eve.stop();var i=r[3]||"",h=n.match(l),p=a[r[1]];return h&&h==i?{from:parseFloat(n),to:p(parseFloat(n),+r[2]),f:s(h)}:(n=this.asPX(t),{from:n,to:p(n,this.asPX(t,r[2]+i)),f:o})}})(-10)}),i.plugin(function(t,e,n,r,i){var o=n.prototype,s=t.is;o.rect=function(t,e,n,r,i,o){var a;return null==o&&(o=i),s(t,"object")&&"[object Object]"==t?a=t:null!=t&&(a={x:t,y:e,width:n,height:r},null!=i&&(a.rx=i,a.ry=o)),this.el("rect",a)},o.circle=function(t,e,n){var r;return s(t,"object")&&"[object Object]"==t?r=t:null!=t&&(r={cx:t,cy:e,r:n}),this.el("circle",r)};var a=function(){function t(){this.parentNode.removeChild(this)}return function(e,n){var i=r.doc.createElement("img"),o=r.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){n.call(i),i.onload=i.onerror=null,o.removeChild(i)},i.onerror=t,o.appendChild(i),i.src=e}}();o.image=function(e,n,r,i,o){var u=this.el("image");if(s(e,"object")&&"src"in e)u.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=n&&null!=r&&(l.x=n,l.y=r),null!=i&&null!=o?(l.width=i,l.height=o):a(e,function(){t._.$(u.node,{width:this.offsetWidth,height:this.offsetHeight})}),t._.$(u.node,l)}return u},o.ellipse=function(t,e,n,r){var i;return s(t,"object")&&"[object Object]"==t?i=t:null!=t&&(i={cx:t,cy:e,rx:n,ry:r}),this.el("ellipse",i)},o.path=function(t){var e;return s(t,"object")&&!s(t,"array")?e=t:t&&(e={d:t}),this.el("path",e)},o.group=o.g=function(t){var e=this.el("g");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},o.svg=function(t,e,n,r,i,o,a,u){var l={};return s(t,"object")&&null==e?l=t:(null!=t&&(l.x=t),null!=e&&(l.y=e),null!=n&&(l.width=n),null!=r&&(l.height=r),null!=i&&null!=o&&null!=a&&null!=u&&(l.viewBox=[i,o,a,u])),this.el("svg",l)},o.mask=function(t){var e=this.el("mask");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},o.ptrn=function(t,e,n,r,i,o,a,u){if(s(t,"object"))var l=t;else l={patternUnits:"userSpaceOnUse"},t&&(l.x=t),e&&(l.y=e),null!=n&&(l.width=n),null!=r&&(l.height=r),l.viewBox=null!=i&&null!=o&&null!=a&&null!=u?[i,o,a,u]:[t||0,e||0,n||0,r||0];return this.el("pattern",l)},o.use=function(n){return null!=n?(n instanceof e&&(n.attr("id")||n.attr({id:t._.id(n)}),n=n.attr("id")),"#"==String(n).charAt()&&(n=n.substring(1)),this.el("use",{"xlink:href":"#"+n})):e.prototype.use.call(this)},o.symbol=function(t,e,n,r){var i={};return null!=t&&null!=e&&null!=n&&null!=r&&(i.viewBox=[t,e,n,r]),this.el("symbol",i)},o.text=function(t,e,n){var r={};return s(t,"object")?r=t:null!=t&&(r={x:t,y:e,text:n||""}),this.el("text",r)},o.line=function(t,e,n,r){var i={};return s(t,"object")?i=t:null!=t&&(i={x1:t,x2:n,y1:e,y2:r}),this.el("line",i)},o.polyline=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return s(t,"object")&&!s(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polyline",e)},o.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return s(t,"object")&&!s(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polygon",e)},function(){function e(){return this.selectAll("stop")}function n(e,n){var r=l("stop"),i={offset:+n+"%"};e=t.color(e),i["stop-color"]=e.hex,e.opacity<1&&(i["stop-opacity"]=e.opacity),l(r,i);for(var o,s=this.stops(),a=0;a<s.length;a++){if(parseFloat(s[a].attr("offset"))>n){this.node.insertBefore(r,s[a].node),o=!0;break}}return o||this.node.appendChild(r),this}function r(){if("linearGradient"==this.type){var e=l(this.node,"x1")||0,n=l(this.node,"x2")||1,r=l(this.node,"y1")||0,i=l(this.node,"y2")||0;return t._.box(e,r,math.abs(n-e),math.abs(i-r))}var o=this.node.cx||.5,s=this.node.cy||.5,a=this.node.r||0;return t._.box(o-a,s-a,2*a,2*a)}function i(e){var n=e,r=this.stops();if("string"==typeof e&&(n=eve("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops),t.is(n,"array")){for(var i=0;i<r.length;i++)if(n[i]){var o=t.color(n[i].color),s={offset:n[i].offset+"%"};s["stop-color"]=o.hex,o.opacity<1&&(s["stop-opacity"]=o.opacity),r[i].attr(s)}else r[i].remove();for(i=r.length;i<n.length;i++)this.addStop(n[i].color,n[i].offset);return this}}function s(t,e){var n,r=eve("snap.util.grad.parse",null,e).firstDefined();if(!r)return null;r.params.unshift(t),n="l"==r.type.toLowerCase()?a.apply(0,r.params):u.apply(0,r.params),r.type!=r.type.toLowerCase()&&l(n.node,{gradientUnits:"userSpaceOnUse"});for(var i=r.stops,o=i.length,s=0;s<o;s++){var c=i[s];n.addStop(c.color,c.offset)}return n}function a(o,s,a,u,c){var h=t._.make("linearGradient",o);return h.stops=e,h.addStop=n,h.getBBox=r,h.setStops=i,null!=s&&l(h.node,{x1:s,y1:a,x2:u,y2:c}),h}function u(i,o,s,a,u,c){var h=t._.make("radialGradient",i);return h.stops=e,h.addStop=n,h.getBBox=r,null!=o&&l(h.node,{cx:o,cy:s,r:a}),null!=u&&null!=c&&l(h.node,{fx:u,fy:c}),h}var l=t._.$;o.gradient=function(t){return s(this.defs,t)},o.gradientLinear=function(t,e,n,r){return a(this.defs,t,e,n,r)},o.gradientRadial=function(t,e,n,r,i){return u(this.defs,t,e,n,r,i)},o.toString=function(){var e,n=this.node.ownerDocument,r=n.createDocumentFragment(),i=n.createElement("div"),o=this.node.cloneNode(!0);return r.appendChild(i),i.appendChild(o),t._.$(o,{xmlns:"http://www.w3.org/2000/svg"}),e=i.innerHTML,r.removeChild(r.firstChild),e},o.toDataURL=function(){if(window&&window.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))},o.clear=function(){for(var t,e=this.node.firstChild;e;)t=e.nextSibling,"defs"!=e.tagName?e.parentNode.removeChild(e):o.clear.call({node:e}),e=t}}()}),i.plugin(function(t,e,n,r){function i(t){var e=i.ps=i.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[B](n)&&n!=t&&!--e[n].sleep&&delete e[n]}),e[t]}function o(t,e,n,r){return null==t&&(t=e=n=r=0),null==e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:z.min(n,r)/2,r2:z.max(n,r)/2,r0:z.sqrt(n*n+r*r)/2,path:T(t,e,n,r),vb:[t,e,n,r].join(" ")}}function s(){return this.join(",").replace(j,"$1")}function a(t){var e=D(t);return e.toString=s,e}function u(t,e,n,r,i,o,s,a,u){return null==u?g(t,e,n,r,i,o,s,a):c(t,e,n,r,i,o,s,a,m(t,e,n,r,i,o,s,a,u))}function l(n,r){function i(t){return+(+t).toFixed(3)}return t._.cacher(function(t,o,s){t instanceof e&&(t=t.attr("d")),t=M(t);for(var a,l,h,p,f,d="",g={},m=0,v=0,y=t.length;v<y;v++){if(h=t[v],"M"==h[0])a=+h[1],l=+h[2];else{if(p=u(a,l,h[1],h[2],h[3],h[4],h[5],h[6]),m+p>o){if(r&&!g.start){if(f=u(a,l,h[1],h[2],h[3],h[4],h[5],h[6],o-m),d+=["C"+i(f.start.x),i(f.start.y),i(f.m.x),i(f.m.y),i(f.x),i(f.y)],s)return d;g.start=d,d=["M"+i(f.x),i(f.y)+"C"+i(f.n.x),i(f.n.y),i(f.end.x),i(f.end.y),i(h[5]),i(h[6])].join(),m+=p,a=+h[5],l=+h[6];continue}if(!n&&!r)return f=u(a,l,h[1],h[2],h[3],h[4],h[5],h[6],o-m)}m+=p,a=+h[5],l=+h[6]}d+=h.shift()+h}return g.end=d,f=n?m:r?g:c(a,l,h[0],h[1],h[2],h[3],h[4],h[5],1)},null,t._.clone)}function c(t,e,n,r,i,o,s,a,u){var l=1-u,c=W(l,3),h=W(l,2),p=u*u,f=p*u,d=c*t+3*h*u*n+3*l*u*u*i+f*s,g=c*e+3*h*u*r+3*l*u*u*o+f*a,m=t+2*u*(n-t)+p*(i-2*n+t),v=e+2*u*(r-e)+p*(o-2*r+e),y=n+2*u*(i-n)+p*(s-2*i+n),w=r+2*u*(o-r)+p*(a-2*o+r);return{x:d,y:g,m:{x:m,y:v},n:{x:y,y:w},start:{x:l*t+u*n,y:l*e+u*r},end:{x:l*i+u*s,y:l*o+u*a},alpha:90-180*z.atan2(m-y,v-w)/U}}function h(e,n,r,i,s,a,u,l){t.is(e,"array")||(e=[e,n,r,i,s,a,u,l]);var c=A.apply(null,e);return o(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function p(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function f(t,e){return t=o(t),e=o(e),p(e,t.x,t.y)||p(e,t.x2,t.y)||p(e,t.x,t.y2)||p(e,t.x2,t.y2)||p(t,e.x,e.y)||p(t,e.x2,e.y)||p(t,e.x,e.y2)||p(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function d(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n}function g(t,e,n,r,i,o,s,a,u){null==u&&(u=1),u=u>1?1:u<0?0:u;for(var l=u/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,f=0;f<12;f++){var g=l*c[f]+l,m=d(g,t,n,i,s),v=d(g,e,r,o,a),y=m*m+v*v;p+=h[f]*z.sqrt(y)}return l*p}function m(t,e,n,r,i,o,s,a,u){if(!(u<0||g(t,e,n,r,i,o,s,a)<u)){var l,c=.5,h=1-c;for(l=g(t,e,n,r,i,o,s,a,h);q(l-u)>.01;)c/=2,h+=(l<u?1:-1)*c,l=g(t,e,n,r,i,o,s,a,h);return h}}function v(t,e,n,r,i,o,s,a){if(!(G(t,n)<V(i,s)||V(t,n)>G(i,s)||G(e,r)<V(o,a)||V(e,r)>G(o,a))){var u=(t*r-e*n)*(i-s)-(t-n)*(i*a-o*s),l=(t*r-e*n)*(o-a)-(e-r)*(i*a-o*s),c=(t-n)*(o-a)-(e-r)*(i-s);if(c){var h=u/c,p=l/c,f=+h.toFixed(2),d=+p.toFixed(2);if(!(f<+V(t,n).toFixed(2)||f>+G(t,n).toFixed(2)||f<+V(i,s).toFixed(2)||f>+G(i,s).toFixed(2)||d<+V(e,r).toFixed(2)||d>+G(e,r).toFixed(2)||d<+V(o,a).toFixed(2)||d>+G(o,a).toFixed(2)))return{x:h,y:p}}}}function y(t,e,n){if(!f(h(t),h(e)))return n?0:[];for(var r=g.apply(0,t),i=g.apply(0,e),o=~~(r/8),s=~~(i/8),a=[],u=[],l={},p=n?0:[],d=0;d<o+1;d++){var m=c.apply(0,t.concat(d/o));a.push({x:m.x,y:m.y,t:d/o})}for(d=0;d<s+1;d++)m=c.apply(0,e.concat(d/s)),u.push({x:m.x,y:m.y,t:d/s});for(d=0;d<o;d++)for(var y=0;y<s;y++){var w=a[d],x=a[d+1],b=u[y],E=u[y+1],_=q(x.x-w.x)<.001?"y":"x",T=q(E.x-b.x)<.001?"y":"x",S=v(w.x,w.y,x.x,x.y,b.x,b.y,E.x,E.y);if(S){if(l[S.x.toFixed(4)]==S.y.toFixed(4))continue;l[S.x.toFixed(4)]=S.y.toFixed(4);var C=w.t+q((S[_]-w[_])/(x[_]-w[_]))*(x.t-w.t),O=b.t+q((S[T]-b[T])/(E[T]-b[T]))*(E.t-b.t);C>=0&&C<=1&&O>=0&&O<=1&&(n?p++:p.push({x:S.x,y:S.y,t1:C,t2:O}))}}return p}function w(t,e){return b(t,e)}function x(t,e){return b(t,e,1)}function b(t,e,n){t=M(t),e=M(e);for(var r,i,o,s,a,u,l,c,h,p,f=n?0:[],d=0,g=t.length;d<g;d++){var m=t[d];if("M"==m[0])r=a=m[1],i=u=m[2];else{"C"==m[0]?(h=[r,i].concat(m.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,a,u,a,u],r=a,i=u);for(var v=0,w=e.length;v<w;v++){var x=e[v];if("M"==x[0])o=l=x[1],s=c=x[2];else{"C"==x[0]?(p=[o,s].concat(x.slice(1)),o=p[6],s=p[7]):(p=[o,s,o,s,l,c,l,c],o=l,s=c);var b=y(h,p,n);if(n)f+=b;else{for(var E=0,_=b.length;E<_;E++)b[E].segment1=d,b[E].segment2=v,b[E].bez1=h,b[E].bez2=p;f=f.concat(b)}}}}}return f}function E(t,e,n){var r=_(t);return p(r,e,n)&&b(t,[["M",e,n],["H",r.x2+10]],1)%2==1}function _(t){var e=i(t);if(e.bbox)return D(e.bbox);if(!t)return o();t=M(t);for(var n,r=0,s=0,a=[],u=[],l=0,c=t.length;l<c;l++)if(n=t[l],"M"==n[0])r=n[1],s=n[2],a.push(r),u.push(s);else{var h=A(r,s,n[1],n[2],n[3],n[4],n[5],n[6]);a=a.concat(h.min.x,h.max.x),u=u.concat(h.min.y,h.max.y),r=n[5],s=n[6]}var p=V.apply(0,a),f=V.apply(0,u),d=G.apply(0,a),g=G.apply(0,u),m=o(p,f,d-p,g-f);return e.bbox=D(m),m}function T(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.toString=s,o}function S(t,e,n,r,i){if(null==i&&null==r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!=i)var o=Math.PI/180,a=t+n*Math.cos(-r*o),u=t+n*Math.cos(-i*o),l=e+n*Math.sin(-r*o),c=e+n*Math.sin(-i*o),h=[["M",a,l],["A",n,n,0,+(i-r>180),0,u,c]];else h=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return h.toString=s,h}function C(e){var n=i(e),r=String.prototype.toLowerCase;if(n.rel)return a(n.rel);t.is(e,"array")&&t.is(e&&e[0],"array")||(e=t.parsePathString(e));var o=[],u=0,l=0,c=0,h=0,p=0;"M"==e[0][0]&&(u=e[0][1],l=e[0][2],c=u,h=l,p++,o.push(["M",u,l]));for(var f=p,d=e.length;f<d;f++){var g=o[f]=[],m=e[f];if(m[0]!=r.call(m[0]))switch(g[0]=r.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-u).toFixed(3),g[7]=+(m[7]-l).toFixed(3);break;case"v":g[1]=+(m[1]-l).toFixed(3);break;case"m":c=m[1],h=m[2];default:for(var v=1,y=m.length;v<y;v++)g[v]=+(m[v]-(v%2?u:l)).toFixed(3)}else{g=o[f]=[],"m"==m[0]&&(c=m[1]+u,h=m[2]+l);for(var w=0,x=m.length;w<x;w++)o[f][w]=m[w]}var b=o[f].length;switch(o[f][0]){case"z":u=c,l=h;break;case"h":u+=+o[f][b-1];break;case"v":l+=+o[f][b-1];break;default:u+=+o[f][b-2],l+=+o[f][b-1]}}return o.toString=s,n.rel=a(o),o}function O(e){var n=i(e);if(n.abs)return a(n.abs);if(k(e,"array")&&k(e&&e[0],"array")||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r,o=[],u=0,l=0,c=0,h=0,p=0;"M"==e[0][0]&&(u=+e[0][1],l=+e[0][2],c=u,h=l,p++,o[0]=["M",u,l]);for(var f,d,g=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),m=p,v=e.length;m<v;m++){if(o.push(f=[]),d=e[m],(r=d[0])!=r.toUpperCase())switch(f[0]=r.toUpperCase(),f[0]){case"A":f[1]=d[1],f[2]=d[2],f[3]=d[3],f[4]=d[4],f[5]=d[5],f[6]=+d[6]+u,f[7]=+d[7]+l;break;case"V":f[1]=+d[1]+l;break;case"H":f[1]=+d[1]+u;break;case"R":for(var y=[u,l].concat(d.slice(1)),w=2,x=y.length;w<x;w++)y[w]=+y[w]+u,y[++w]=+y[w]+l;o.pop(),o=o.concat(F(y,g));break;case"O":o.pop(),y=S(u,l,d[1],d[2]),y.push(y[0]),o=o.concat(y);break;case"U":o.pop(),o=o.concat(S(u,l,d[1],d[2],d[3])),f=["U"].concat(o[o.length-1].slice(-2));break;case"M":c=+d[1]+u,h=+d[2]+l;default:for(w=1,x=d.length;w<x;w++)f[w]=+d[w]+(w%2?u:l)}else if("R"==r)y=[u,l].concat(d.slice(1)),o.pop(),o=o.concat(F(y,g)),f=["R"].concat(d.slice(-2));else if("O"==r)o.pop(),y=S(u,l,d[1],d[2]),y.push(y[0]),o=o.concat(y);else if("U"==r)o.pop(),o=o.concat(S(u,l,d[1],d[2],d[3])),f=["U"].concat(o[o.length-1].slice(-2));else for(var b=0,E=d.length;b<E;b++)f[b]=d[b];if("O"!=(r=r.toUpperCase()))switch(f[0]){case"Z":u=+c,l=+h;break;case"H":u=f[1];break;case"V":l=f[1];break;case"M":c=f[f.length-2],h=f[f.length-1];default:u=f[f.length-2],l=f[f.length-1]}}return o.toString=s,n.abs=a(o),o}function P(t,e,n,r){return[t,e,n,r,n,r]}function I(t,e,n,r,i,o){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]}function R(e,n,r,i,o,s,a,u,l,c){var h,p=120*U/180,f=U/180*(+o||0),d=[],g=t._.cacher(function(t,e,n){return{x:t*z.cos(n)-e*z.sin(n),y:t*z.sin(n)+e*z.cos(n)}});if(!r||!i)return[e,n,u,l,u,l];if(c)T=c[0],S=c[1],E=c[2],_=c[3];else{h=g(e,n,-f),e=h.x,n=h.y,h=g(u,l,-f),u=h.x,l=h.y;var m=(z.cos(U/180*o),z.sin(U/180*o),(e-u)/2),v=(n-l)/2,y=m*m/(r*r)+v*v/(i*i);y>1&&(y=z.sqrt(y),r*=y,i*=y);var w=r*r,x=i*i,b=(s==a?-1:1)*z.sqrt(q((w*x-w*v*v-x*m*m)/(w*v*v+x*m*m))),E=b*r*v/i+(e+u)/2,_=b*-i*m/r+(n+l)/2,T=z.asin(((n-_)/i).toFixed(9)),S=z.asin(((l-_)/i).toFixed(9));T=e<E?U-T:T,S=u<E?U-S:S,T<0&&(T=2*U+T),S<0&&(S=2*U+S),a&&T>S&&(T-=2*U),!a&&S>T&&(S-=2*U)}var C=S-T;if(q(C)>p){var O=S,P=u,I=l;S=T+p*(a&&S>T?1:-1),u=E+r*z.cos(S),l=_+i*z.sin(S),d=R(u,l,r,i,o,0,a,P,I,[S,O,E,_])}C=S-T;var A=z.cos(T),M=z.sin(T),N=z.cos(S),F=z.sin(S),L=z.tan(C/4),k=4/3*r*L,D=4/3*i*L,B=[e,n],j=[e+k*M,n-D*A],H=[u+k*F,l-D*N],V=[u,l];if(j[0]=2*B[0]-j[0],j[1]=2*B[1]-j[1],c)return[j,H,V].concat(d);d=[j,H,V].concat(d).join().split(",");for(var G=[],W=0,$=d.length;W<$;W++)G[W]=W%2?g(d[W-1],d[W],f).y:g(d[W],d[W+1],f).x;return G}function A(t,e,n,r,i,o,s,a){for(var u,l,c,h,p,f,d,g,m=[],v=[[],[]],y=0;y<2;++y)if(0==y?(l=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*s,c=3*n-3*t):(l=6*e-12*r+6*o,u=-3*e+9*r-9*o+3*a,c=3*r-3*e),q(u)<1e-12){if(q(l)<1e-12)continue;0<(h=-c/l)&&h<1&&m.push(h)}else d=l*l-4*c*u,g=z.sqrt(d),d<0||(p=(-l+g)/(2*u),0<p&&p<1&&m.push(p),0<(f=(-l-g)/(2*u))&&f<1&&m.push(f));for(var w,x=m.length,b=x;x--;)h=m[x],w=1-h,v[0][x]=w*w*w*t+3*w*w*h*n+3*w*h*h*i+h*h*h*s,v[1][x]=w*w*w*e+3*w*w*h*r+3*w*h*h*o+h*h*h*a;return v[0][b]=t,v[1][b]=e,v[0][b+1]=s,v[1][b+1]=a,v[0].length=v[1].length=b+2,{min:{x:V.apply(0,v[0]),y:V.apply(0,v[1])},max:{x:G.apply(0,v[0]),y:G.apply(0,v[1])}}}function M(t,e){var n=!e&&i(t);if(!e&&n.curve)return a(n.curve);for(var r=O(t),o=e&&O(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=(function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(R.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(I(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(I(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(P(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(P(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(P(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(P(e.x,e.y,e.X,e.Y))}return t}),c=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)p[e]="A",o&&(f[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),v=G(r.length,o&&o.length||0)}},h=function(t,e,n,i,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],v=G(r.length,o&&o.length||0))},p=[],f=[],d="",g="",m=0,v=G(r.length,o&&o.length||0);m<v;m++){r[m]&&(d=r[m][0]),"C"!=d&&(p[m]=d,m&&(g=p[m-1])),r[m]=l(r[m],s,g),"A"!=p[m]&&"C"==d&&(p[m]="C"),c(r,m),o&&(o[m]&&(d=o[m][0]),"C"!=d&&(f[m]=d,m&&(g=f[m-1])),o[m]=l(o[m],u,g),"A"!=f[m]&&"C"==d&&(f[m]="C"),c(o,m)),h(r,o,s,u,m),h(o,r,u,s,m);var y=r[m],w=o&&o[m],x=y.length,b=o&&w.length;s.x=y[x-2],s.y=y[x-1],s.bx=H(y[x-4])||s.x,s.by=H(y[x-3])||s.y,u.bx=o&&(H(w[b-4])||u.x),u.by=o&&(H(w[b-3])||u.y),u.x=o&&w[b-2],u.y=o&&w[b-1]}return o||(n.curve=a(r)),o?[r,o]:r}function N(t,e){if(!e)return t;var n,r,i,o,s,a,u;for(t=M(t),i=0,s=t.length;i<s;i++)for(u=t[i],o=1,a=u.length;o<a;o+=2)n=e.x(u[o],u[o+1]),r=e.y(u[o],u[o+1]),u[o]=n,u[o+1]=r;return t}function F(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4==r?o[3]={x:+t[0],y:+t[1]}:i-2==r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}var L=e.prototype,k=t.is,D=t._.clone,B="hasOwnProperty",j=/,?([a-z]),?/gi,H=parseFloat,z=Math,U=z.PI,V=z.min,G=z.max,W=z.pow,q=z.abs,$=l(1),Y=l(),X=l(0,1),Z=t._unit2px,K={path:function(t){return t.attr("path")},circle:function(t){var e=Z(t);return S(e.cx,e.cy,e.r)},ellipse:function(t){var e=Z(t);return S(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=Z(t);return T(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=Z(t);return T(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return T(e.x,e.y,e.width,e.height)}};t.path=i,t.path.getTotalLength=$,t.path.getPointAtLength=Y,t.path.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return X(t,e).end;var r=X(t,n,1);return e?X(r,e).end:r},L.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()},L.getPointAtLength=function(t){return Y(this.attr("d"),t)},L.getSubpath=function(e,n){return t.path.getSubpath(this.attr("d"),e,n)},t._.box=o,t.path.findDotsAtSegment=c,t.path.bezierBBox=h,t.path.isPointInsideBBox=p,t.closest=function(e,n,r,i){for(var s=100,a=o(e-s/2,n-s/2,s,s),u=[],l=r[0].hasOwnProperty("x")?function(t){return{x:r[t].x,y:r[t].y}}:function(t){return{x:r[t],y:i[t]}},c=0;s<=1e6&&!c;){for(var h=0,f=r.length;h<f;h++){var d=l(h);if(p(a,d.x,d.y)){c++,u.push(d);break}}c||(s*=2,a=o(e-s/2,n-s/2,s,s))}if(1e6!=s){var g,m=1/0;for(h=0,f=u.length;h<f;h++){var v=t.len(e,n,u[h].x,u[h].y);m>v&&(m=v,u[h].len=v,g=u[h])}return g}},t.path.isBBoxIntersect=f,t.path.intersection=w,t.path.intersectionNumber=x,t.path.isPointInside=E,t.path.getBBox=_,t.path.get=K,t.path.toRelative=C,t.path.toAbsolute=O,t.path.toCubic=M,t.path.map=N,t.path.toString=s,t.path.clone=a}),i.plugin(function(t,e,n,i){var o=Math.max,s=Math.min,a=function(t){if(this.items=[],this.bindings={},this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)t[e]&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},u=a.prototype;u.push=function(){for(var t,e,n=0,r=arguments.length;n<r;n++)(t=arguments[n])&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},u.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},u.forEach=function(t,e){for(var n=0,r=this.items.length;n<r;n++)if(!1===t.call(e,this.items[n],n))return this;return this},u.animate=function(e,n,i,o){"function"!=typeof i||i.length||(o=i,i=r.linear),e instanceof t._.Animation&&(o=e.callback,i=e.easing,n=i.dur,e=e.attr);var s=arguments;if(t.is(e,"array")&&t.is(s[s.length-1],"array"))var a=!0;var u,l=function(){u?this.b=u:u=this.b},c=0,h=this,p=o&&function(){++c==h.length&&o.call(this)};return this.forEach(function(t,r){eve.once("snap.animcreated."+t.id,l),a?s[r]&&t.animate.apply(t,s[r]):t.animate(e,n,i,p)})},u.remove=function(){for(;this.length;)this.pop().remove();return this},u.bind=function(t,e,n){var r={};if("function"==typeof e)this.bindings[t]=e;else{var i=n||t;this.bindings[t]=function(t){r[i]=t,e.attr(r)}}return this},u.attr=function(t){var e={};for(var n in t)this.bindings[n]?this.bindings[n](t[n]):e[n]=t[n];for(var r=0,i=this.items.length;r<i;r++)this.items[r].attr(e);return this},u.clear=function(){for(;this.length;)this.pop()},u.splice=function(t,e,n){t=t<0?o(this.length+t,0):t,e=o(0,s(this.length-t,e));var r,i=[],u=[],l=[];for(r=2;r<arguments.length;r++)l.push(arguments[r]);for(r=0;r<e;r++)u.push(this[t+r]);for(;r<this.length-t;r++)i.push(this[t+r]);var c=l.length;for(r=0;r<c+i.length;r++)this.items[t+r]=this[t+r]=r<c?l[r]:i[r-c];for(r=this.items.length=this.length-=e-c;this[r];)delete this[r++];return new a(u)},u.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0;return!1},u.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},u.getBBox=function(){for(var t=[],e=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var a=this.items[i].getBBox();t.push(a.x),e.push(a.y),n.push(a.x+a.width),r.push(a.y+a.height)}return t=s.apply(0,t),e=s.apply(0,e),n=o.apply(0,n),r=o.apply(0,r),{x:t,y:e,x2:n,y2:r,width:n-t,height:r-e,cx:t+(n-t)/2,cy:e+(r-e)/2}},u.clone=function(t){t=new a;for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},u.toString=function(){return"Snaps set"},u.type="set",t.Set=a,t.set=function(){var t=new a;return arguments.length&&t.push.apply(t,Array.prototype.slice.call(arguments,0)),t}}),i.plugin(function(t,e,n,r){function i(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}function o(e,n,r){e=e||new t.Matrix,n=n||new t.Matrix,e=t.parseTransformString(e.toTransformString())||[],n=t.parseTransformString(n.toTransformString())||[];for(var o,s,a,u,l=Math.max(e.length,n.length),p=[],f=[],d=0;d<l;d++){if(a=e[d]||i(n[d]),u=n[d]||i(a),a[0]!=u[0]||"r"==a[0].toLowerCase()&&(a[2]!=u[2]||a[3]!=u[3])||"s"==a[0].toLowerCase()&&(a[3]!=u[3]||a[4]!=u[4])){e=t._.transform2matrix(e,r()),n=t._.transform2matrix(n,r()),p=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],f=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(p[d]=[],f[d]=[],o=0,s=Math.max(a.length,u.length);o<s;o++)o in a&&(p[d][o]=a[o]),o in u&&(f[d][o]=u[o])}return{from:h(p),to:h(f),f:c(p)}}function s(t){return t}function a(t){return function(e){return+e.toFixed(3)+t}}function u(t){return t.join(" ")}function l(e){return t.rgb(e[0],e[1],e[2],e[3])}function c(t){var e,n,r,i,o,s,a=0,u=[];for(e=0,n=t.length;e<n;e++){for(o="[",s=['"'+t[e][0]+'"'],r=1,i=t[e].length;r<i;r++)s[r]="val["+a+++"]";o+=s+"]",u[e]=o}return Function("val","return Snap.path.toString.call(["+u+"])")}function h(t){for(var e=[],n=0,r=t.length;n<r;n++)for(var i=1,o=t[n].length;i<o;i++)e.push(t[n][i]);return e}function p(t){return isFinite(t)}function f(e,n){return!(!t.is(e,"array")||!t.is(n,"array"))&&e.toString()==n.toString()}var d={},g=/[%a-z]+$/i,m=String;d.stroke=d.fill="colour",e.prototype.equal=function(t,e){return eve("snap.util.equal",this,t,e).firstDefined()},eve.on("snap.util.equal",function(e,n){var r,i,v=m(this.attr(e)||""),y=this;if("colour"==d[e])return r=t.color(v),i=t.color(n),{from:[r.r,r.g,r.b,r.opacity],to:[i.r,i.g,i.b,i.opacity],f:l};if("viewBox"==e)return r=this.attr(e).vb.split(" ").map(Number),i=n.split(" ").map(Number),{from:r,to:i,f:u};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return"string"==typeof n&&(n=m(n).replace(/\.{3}|\u2026/g,v)),v=this.matrix,n=t._.rgTransform.test(n)?t._.transform2matrix(n,this.getBBox()):t._.transform2matrix(t._.svgTransform2string(n),this.getBBox()),o(v,n,function(){return y.getBBox(1)});if("d"==e||"path"==e)return r=t.path.toCubic(v,n),{from:h(r[0]),to:h(r[1]),f:c(r[0])};if("points"==e)return r=m(v).split(t._.separator),i=m(n).split(t._.separator),{from:r,to:i,f:function(t){return t}};if(p(v)&&p(n))return{from:parseFloat(v),to:parseFloat(n),f:s};var w=v.match(g),x=m(n).match(g);return w&&f(w,x)?{from:parseFloat(v),to:parseFloat(n),f:a(w)}:{from:this.asPX(e),to:this.asPX(e,n),f:s}})}),i.plugin(function(t,e,n,r){for(var i=e.prototype,o=("createTouch"in r.doc),s=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],a={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=(function(t,e){var n="y"==t?"scrollTop":"scrollLeft",i=e&&e.node?e.node.ownerDocument:r.doc;return i[n in i.documentElement?"documentElement":"body"][n]}),l=function(){return this.originalEvent.preventDefault()},c=function(){return this.originalEvent.stopPropagation()},h=function(t,e,n,r){var i=o&&a[e]?a[e]:e,s=function(i){var s=u("y",r),h=u("x",r);if(o&&a.hasOwnProperty(e))for(var p=0,f=i.targetTouches&&i.targetTouches.length;p<f;p++)if(i.targetTouches[p].target==t||t.contains(i.targetTouches[p].target)){var d=i;i=i.targetTouches[p],i.originalEvent=d,i.preventDefault=l,i.stopPropagation=c;break}var g=i.clientX+h,m=i.clientY+s;return n.call(r,i,g,m)};return e!==i&&t.addEventListener(e,s,!1),t.addEventListener(i,s,!1),function(){return e!==i&&t.removeEventListener(e,s,!1),t.removeEventListener(i,s,!1),!0}},p=[],f=function(t){for(var e,n=t.clientX,r=t.clientY,i=u("y"),s=u("x"),a=p.length;a--;){if(e=p[a],o){for(var l,c=t.touches&&t.touches.length;c--;)if(l=t.touches[c],l.identifier==e.el._drag.id||e.el.node.contains(l.target)){n=l.clientX,r=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h=e.el.node;h.nextSibling,h.parentNode,h.style.display;n+=s,r+=i,eve("snap.drag.move."+e.el.id,e.move_scope||e.el,n-e.el._drag.x,r-e.el._drag.y,n,r,t)}},d=function(e){t.unmousemove(f).unmouseup(d);for(var n,r=p.length;r--;)n=p[r],n.el._drag={},eve("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,e),eve.off("snap.drag.*."+n.el.id);p=[]},g=s.length;g--;)!function(e){t[e]=i[e]=function(n,r){if(t.is(n,"function"))this.events=this.events||[],this.events.push({name:e,f:n,unbind:h(this.node||document,e,n,r||this)});else for(var i=0,o=this.events.length;i<o;i++)if(this.events[i].name==e)try{this.events[i].f.call(this)}catch(t){}return this},t["un"+e]=i["un"+e]=function(t){for(var n=this.events||[],r=n.length;r--;)if(n[r].name==e&&(n[r].f==t||!t))return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(s[g]);i.hover=function(t,e,n,r){return this.mouseover(t,n).mouseout(e,r||n)},i.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var m=[];i.drag=function(e,n,r,i,o,s){function a(a,u,c){(a.originalEvent||a).preventDefault(),l._drag.x=u,l._drag.y=c,l._drag.id=a.identifier,!p.length&&t.mousemove(f).mouseup(d),p.push({el:l,move_scope:i,start_scope:o,end_scope:s}),n&&eve.on("snap.drag.start."+l.id,n),e&&eve.on("snap.drag.move."+l.id,e),r&&eve.on("snap.drag.end."+l.id,r),eve("snap.drag.start."+l.id,o||i||l,u,c,a)}function u(t,e,n){eve("snap.draginit."+l.id,l,t,e,n)}var l=this;if(!arguments.length){var c;return l.drag(function(t,e){this.attr({transform:c+(c?"T":"t")+[t,e]})},function(){c=this.transform().local})}return eve.on("snap.draginit."+l.id,a),l._drag={},m.push({el:l,start:a,init:u}),l.mousedown(u),l},i.undrag=function(){for(var e=m.length;e--;)m[e].el==this&&(this.unmousedown(m[e].init),m.splice(e,1),eve.unbind("snap.drag.*."+this.id),eve.unbind("snap.draginit."+this.id));return!m.length&&t.unmousemove(f).unmouseup(d),this}}),i.plugin(function(t,e,n,r){var i=(e.prototype,n.prototype),o=/^\s*url\((.+)\)/,s=String,a=t._.$;t.filter={},i.filter=function(n){var r=this;"svg"!=r.type&&(r=r.paper);var i=t.parse(s(n)),o=t._.id(),u=(r.node.offsetWidth,r.node.offsetHeight,a("filter"));return a(u,{id:o,filterUnits:"userSpaceOnUse"}),u.appendChild(i.node),r.defs.appendChild(u),new e(u)},eve.on("snap.util.getattr.filter",function(){eve.stop();var e=a(this.node,"filter");if(e){var n=s(e).match(o);return n&&t.select(n[1])}}),eve.on("snap.util.attr.filter",function(n){if(n instanceof e&&"filter"==n.type){eve.stop();var r=n.node.id;r||(a(n.node,{id:n.id}),r=n.id),a(this.node,{filter:t.url(r)})}n&&"none"!=n||(eve.stop(),this.node.removeAttribute("filter"))}),t.filter.blur=function(e,n){null==e&&(e=2);var r=null==n?e:[e,n];return t.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},t.filter.blur.toString=function(){return this()},t.filter.shadow=function(e,n,r,i,o){return null==o&&(null==i?(o=r,r=4,i="#000"):(o=i,i=r,r=4)),null==r&&(r=4),null==o&&(o=1),null==e&&(e=0,n=2),null==n&&(n=e),i=t.color(i),t.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:i,dx:e,dy:n,blur:r,opacity:o})},t.filter.shadow.toString=function(){return this()},t.filter.grayscale=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},t.filter.grayscale.toString=function(){return this()},t.filter.sepia=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},t.filter.sepia.toString=function(){return this()},t.filter.saturate=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},t.filter.saturate.toString=function(){return this()},t.filter.hueRotate=function(e){return e=e||0,t.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},t.filter.hueRotate.toString=function(){return this()},t.filter.invert=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},t.filter.invert.toString=function(){return this()},t.filter.brightness=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},t.filter.brightness.toString=function(){return this()},t.filter.contrast=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},t.filter.contrast.toString=function(){return this()}}),i.plugin(function(t,e,n,r,i){var o=t._.box,s=t.is,a=/^[^a-z]*([tbmlrc])/i,u=function(){return"T"+this.dx+","+this.dy};e.prototype.getAlign=function(t,e){null==e&&s(t,"string")&&(e=t,t=null),t=t||this.paper;var n=t.getBBox?t.getBBox():o(t),r=this.getBBox(),i={};switch(e=e&&e.match(a),e=e?e[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=n.y-r.y;break;case"b":i.dx=0,i.dy=n.y2-r.y2;break;case"m":i.dx=0,i.dy=n.cy-r.cy;break;case"l":i.dx=n.x-r.x,i.dy=0;break;case"r":i.dx=n.x2-r.x2,i.dy=0;break;default:i.dx=n.cx-r.cx,i.dy=0}return i.toString=u,i},e.prototype.align=function(t,e){return this.transform("..."+this.getAlign(t,e))}}),i.plugin(function(t,e,n,i,o){function s(t,e,n){return function(r){var i=r.slice(t,e);return 1==i.length&&(i=i[0]),n?n(i):i}}var a=e.prototype,u=t.is,l=String,c="hasOwnProperty",h=function(t,e,n,i){"function"!=typeof n||n.length||(i=n,n=r.linear),this.attr=t,this.dur=e,n&&(this.easing=n),i&&(this.callback=i)};t._.Animation=h,t.animation=function(t,e,n,r){return new h(t,e,n,r)},a.inAnim=function(){var t=this,e=[];for(var n in t.anims)t.anims[c](n)&&function(t){e.push({anim:new h(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(t.anims[n]);return e},t.animate=function(t,e,n,i,o,s){"function"!=typeof o||o.length||(s=o,o=r.linear);var a=r.time(),u=r(t,e,a,a+i,r.time,n,o);return s&&eve.once("mina.finish."+u.id,s),u},a.stop=function(){for(var t=this.inAnim(),e=0,n=t.length;e<n;e++)t[e].stop();return this},a.animate=function(t,e,n,i){"function"!=typeof n||n.length||(i=n,n=r.linear),t instanceof h&&(i=t.callback,n=t.easing,e=t.dur,t=t.attr);var o,a,p,f,d=[],g=[],m={},v=this;for(var y in t)if(t[c](y)){v.equal?(f=v.equal(y,l(t[y])),o=f.from,a=f.to,p=f.f):(o=+v.attr(y),a=+t[y]);var w=u(o,"array")?o.length:1;m[y]=s(d.length,d.length+w,p),d=d.concat(o),g=g.concat(a)}var x=r.time(),b=r(d,g,x,x+e,r.time,function(t){var e={};for(var n in m)m[c](n)&&(e[n]=m[n](t));v.attr(e)},n);return v.anims[b.id]=b,b._attrs=t,b._callback=i,eve("snap.animcreated."+v.id,b),eve.once("mina.finish."+b.id,function(){eve.off("mina.*."+b.id),delete v.anims[b.id],i&&i.call(v)}),eve.once("mina.stop."+b.id,function(){eve.off("mina.*."+b.id),delete v.anims[b.id]}),v}}),i.plugin(function(t,e,n,r){function i(t){t=t.split(/(?=#)/);var e=new String(t[5]);return e[50]=t[0],e[100]=t[1],e[200]=t[2],e[300]=t[3],e[400]=t[4],e[500]=t[5],e[600]=t[6],e[700]=t[7],e[800]=t[8],e[900]=t[9],t[10]&&(e.A100=t[10],e.A200=t[11],e.A400=t[12],e.A700=t[13]),e}t.mui={},t.flat={},t.mui.red=i("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),t.mui.pink=i("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),t.mui.purple=i("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),t.mui.deeppurple=i("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),t.mui.indigo=i("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),t.mui.blue=i("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),t.mui.lightblue=i("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),t.mui.cyan=i("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),t.mui.teal=i("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),t.mui.green=i("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),t.mui.lightgreen=i("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),t.mui.lime=i("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),t.mui.yellow=i("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),t.mui.amber=i("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),t.mui.orange=i("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),t.mui.deeporange=i("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),t.mui.brown=i("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),t.mui.grey=i("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),t.mui.bluegrey=i("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),t.flat.turquoise="#1abc9c",t.flat.greensea="#16a085",t.flat.sunflower="#f1c40f",t.flat.orange="#f39c12",t.flat.emerland="#2ecc71",t.flat.nephritis="#27ae60",t.flat.carrot="#e67e22",t.flat.pumpkin="#d35400",t.flat.peterriver="#3498db",t.flat.belizehole="#2980b9",t.flat.alizarin="#e74c3c",t.flat.pomegranate="#c0392b",t.flat.amethyst="#9b59b6",t.flat.wisteria="#8e44ad",t.flat.clouds="#ecf0f1",t.flat.silver="#bdc3c7",t.flat.wetasphalt="#34495e",t.flat.midnightblue="#2c3e50",t.flat.concrete="#95a5a6",t.flat.asbestos="#7f8c8d",t.importMUIColors=function(){for(var e in t.mui)t.mui.hasOwnProperty(e)&&(window[e]=t.mui[e])}}),t.exports=i},function(t,e,n){var r,i;!function(n){var o,s,a="hasOwnProperty",u=/[\.\/]/,l=/\s*,\s*/,c=function(t,e){return t-e},h={n:{}},p=function(){for(var t=0,e=this.length;t<e;t++)if(void 0!==this[t])return this[t]},f=function(){for(var t=this.length;--t;)if(void 0!==this[t])return this[t]},d=Object.prototype.toString,g=String,m=Array.isArray||function(t){return t instanceof Array||"[object Array]"==d.call(t)},v=function(t,e){var n,r=s,i=Array.prototype.slice.call(arguments,2),a=v.listeners(t),u=0,l=[],h={},d=[],g=o;d.firstDefined=p,d.lastDefined=f,o=t,s=0;for(var m=0,y=a.length;m<y;m++)"zIndex"in a[m]&&(l.push(a[m].zIndex),a[m].zIndex<0&&(h[a[m].zIndex]=a[m]));for(l.sort(c);l[u]<0;)if(n=h[l[u++]],d.push(n.apply(e,i)),s)return s=r,d;for(m=0;m<y;m++)if("zIndex"in(n=a[m]))if(n.zIndex==l[u]){if(d.push(n.apply(e,i)),s)break;do{if(u++,n=h[l[u]],n&&d.push(n.apply(e,i)),s)break}while(n)}else h[n.zIndex]=n;else if(d.push(n.apply(e,i)),s)break;return s=r,o=g,d};v._events=h,v.listeners=function(t){var e,n,r,i,o,s,a,l,c=m(t)?t:t.split(u),p=h,f=[p],d=[];for(i=0,o=c.length;i<o;i++){for(l=[],s=0,a=f.length;s<a;s++)for(p=f[s].n,n=[p[c[i]],p["*"]],r=2;r--;)(e=n[r])&&(l.push(e),d=d.concat(e.f||[]));f=l}return d},v.separator=function(t){t?(t=g(t).replace(/(?=[\.\^\]\[\-])/g,"\\"),t="["+t+"]",u=new RegExp(t)):u=/[\.\/]/},v.on=function(t,e){if("function"!=typeof e)return function(){};for(var n=m(t)?m(t[0])?t:[t]:g(t).split(l),r=0,i=n.length;r<i;r++)!function(t){for(var n,r=m(t)?t:g(t).split(u),i=h,o=0,s=r.length;o<s;o++)i=i.n,i=i.hasOwnProperty(r[o])&&i[r[o]]||(i[r[o]]={n:{}});for(i.f=i.f||[],o=0,s=i.f.length;o<s;o++)if(i.f[o]==e){n=!0;break}!n&&i.f.push(e)}(n[r]);return function(t){+t==+t&&(e.zIndex=+t)}},v.f=function(t){var e=[].slice.call(arguments,1);return function(){v.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},v.stop=function(){s=1},v.nt=function(t){var e=m(o)?o.join("."):o;return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},v.nts=function(){return m(o)?o:o.split(u)},v.off=v.unbind=function(t,e){if(!t)return void(v._events=h={n:{}});var n=m(t)?m(t[0])?t:[t]:g(t).split(l);if(n.length>1)for(var r=0,i=n.length;r<i;r++)v.off(n[r],e);else{n=m(t)?t:g(t).split(u);var o,s,c,r,i,p,f,d=[h],y=[];for(r=0,i=n.length;r<i;r++)for(p=0;p<d.length;p+=c.length-2){if(c=[p,1],o=d[p].n,"*"!=n[r])o[n[r]]&&(c.push(o[n[r]]),y.unshift({n:o,name:n[r]}));else for(s in o)o[a](s)&&(c.push(o[s]),y.unshift({n:o,name:s}));d.splice.apply(d,c)}for(r=0,i=d.length;r<i;r++)for(o=d[r];o.n;){if(e){if(o.f){for(p=0,f=o.f.length;p<f;p++)if(o.f[p]==e){o.f.splice(p,1);break}!o.f.length&&delete o.f}for(s in o.n)if(o.n[a](s)&&o.n[s].f){var w=o.n[s].f;for(p=0,f=w.length;p<f;p++)if(w[p]==e){w.splice(p,1);break}!w.length&&delete o.n[s].f}}else{delete o.f;for(s in o.n)o.n[a](s)&&o.n[s].f&&delete o.n[s].f}o=o.n}t:for(r=0,i=y.length;r<i;r++){o=y[r];for(s in o.n[o.name].f)continue t;for(s in o.n[o.name].n)continue t;delete o.n[o.name]}}},v.once=function(t,e){var n=function(){return v.off(t,n),e.apply(this,arguments)};return v.on(t,n)},v.version="0.5.4",v.toString=function(){return"You are running Eve 0.5.4"},n.eve=v,void 0!==t&&t.exports?t.exports=v:(r=[],void 0!==(i=function(){return v}.apply(e,r))&&(t.exports=i))}("undefined"!=typeof window?window:this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(127),o=r(i),s=n(5),a=r(s),u={svg:{lib:o.default,pathInitial:"M-7.312,0H0c0,0,0,113.839,0,400c0,264.506,0,400,0,400h-7.312V0z",pathOpen:"M-7.312,0H15c0,0,66,113.339,66,399.5C81,664.006,15,800,15,800H-7.312V0z;M-7.312,0H100c0,0,0,113.839,0,400c0,264.506,0,400,0,400H-7.312V0z",animate:function(t){var e=0,n=this.pathOpen.split(";"),r=n.length,i=window.mina;!function o(){e>r-1||(t.animate({path:n[e]},0===e?400:500,0===e?i.easein:i.elastic,function(){o()}),e++)}()}},morphShape:function(t,e,n){return{position:"absolute",width:"100%",height:"100%",right:n?"inherit":0,left:n?0:"inherit",MozTransform:n?"rotateY(180deg)":"rotateY(0deg)",MsTransform:n?"rotateY(180deg)":"rotateY(0deg)",OTransform:n?"rotateY(180deg)":"rotateY(0deg)",WebkitTransform:n?"rotateY(180deg)":"rotateY(0deg)",transform:n?"rotateY(180deg)":"rotateY(0deg)"}},menuWrap:function(t,e,n){return{MozTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",MsTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",OTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",WebkitTransform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transform:t?"translate3d(0, 0, 0)":n?"translate3d(100%, 0, 0)":"translate3d(-100%, 0, 0)",transition:t?"transform 0.4s 0s":"transform 0.4s"}},menu:function(t,e,n){return e-=140,{position:"fixed",MozTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",MsTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",OTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",WebkitTransform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transform:t?"":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transition:t?"opacity 0.1s 0.4s cubic-bezier(.17, .67, .1, 1.27), transform 0.1s 0.4s cubic-bezier(.17, .67, .1, 1.27)":"opacity 0s 0.3s cubic-bezier(.17, .67, .1, 1.27), transform 0s 0.3s cubic-bezier(.17, .67, .1, 1.27)",opacity:t?1:0}},item:function(t,e,n,r){return e-=140,{MozTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",MsTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",OTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",WebkitTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transition:t?"opacity 0.3s 0.4s, transform 0.3s 0.4s":"opacity 0s 0.3s cubic-bezier(.17, .67, .1, 1.27), transform 0s 0.3s cubic-bezier(.17, .67, .1, 1.27)",opacity:t?1:0}},closeButton:function(t,e,n){return e-=140,{MozTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",MsTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",OTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",WebkitTransform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transform:t?"translate3d(0, 0, 0)":n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)",transition:t?"opacity 0.3s 0.4s cubic-bezier(.17, .67, .1, 1.27), transform 0.3s 0.4s cubic-bezier(.17, .67, .1, 1.27)":"opacity 0s 0.3s cubic-bezier(.17, .67, .1, 1.27), transform 0s 0.3s cubic-bezier(.17, .67, .1, 1.27)",opacity:t?1:0}}};e.default=(0,a.default)(u),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={pageWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",MsTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",OTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",WebkitTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",transform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",transition:"all 0.5s"}},outerContainer:function(t){return{overflow:t?"":"hidden"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={pageWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d(-"+e+", 0, 0) rotateY(15deg)":"translate3d("+e+", 0, 0) rotateY(-15deg)",MsTransform:t?"":n?"translate3d(-"+e+", 0, 0) rotateY(15deg)":"translate3d("+e+", 0, 0) rotateY(-15deg)",OTransform:t?"":n?"translate3d(-"+e+", 0, 0) rotateY(15deg)":"translate3d("+e+", 0, 0) rotateY(-15deg)",WebkitTransform:t?"":n?"translate3d(-"+e+", 0, 0) rotateY(15deg)":"translate3d("+e+", 0, 0) rotateY(-15deg)",transform:t?"":n?"translate3d(-"+e+", 0, 0) rotateY(15deg)":"translate3d("+e+", 0, 0) rotateY(-15deg)",transformOrigin:n?"100% 50%":"0% 50%",transformStyle:"preserve-3d",transition:"all 0.5s"}},outerContainer:function(t){return{perspective:"1500px",overflow:t?"":"hidden"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={pageWrap:function(t,e){return{MozTransform:t?"":"translate3d(0, 0, -"+e+")",MsTransform:t?"":"translate3d(0, 0, -"+e+")",OTransform:t?"":"translate3d(0, 0, -"+e+")",WebkitTransform:t?"":"translate3d(0, 0, -"+e+")",transform:t?"":"translate3d(0, 0, -"+e+")",transformOrigin:"100%",transformStyle:"preserve-3d",transition:"all 0.5s"}},outerContainer:function(){return{perspective:"1500px"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={pageWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",MsTransform:t?"":n?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",OTransform:t?"":n?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",WebkitTransform:t?"":n?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",transform:t?"":n?"translate3d(-100px, 0, -600px) rotateY(20deg)":"translate3d(100px, 0, -600px) rotateY(-20deg)",transformStyle:"preserve-3d",transition:"all 0.5s",overflow:t?"":"hidden"}},outerContainer:function(t){return{perspective:"1500px",overflow:t?"":"hidden"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={menuWrap:function(t){return{MozTransform:t?"":"translate3d(0, -100%, 0)",MsTransform:t?"":"translate3d(0, -100%, 0)",OTransform:t?"":"translate3d(0, -100%, 0)",WebkitTransform:t?"":"translate3d(0, -100%, 0)",transform:t?"":"translate3d(0, -100%, 0)",transition:"all 0.5s ease-in-out"}},pageWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",MsTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",OTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",WebkitTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",transform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",transition:"all 0.5s"}},outerContainer:function(t){return{perspective:"1500px",perspectiveOrigin:"0% 50%",overflow:t?"":"hidden"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={menuWrap:function(t,e,n){return{visibility:t?"visible":"hidden",MozTransform:"translate3d(0, 0, 0)",MsTransform:"translate3d(0, 0, 0)",OTransform:"translate3d(0, 0, 0)",WebkitTransform:"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)",zIndex:1e3}},overlay:function(t,e,n){return{zIndex:1400,MozTransform:t?n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)":"translate3d(0, 0, 0)",MsTransform:t?n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)":"translate3d(0, 0, 0)",OTransform:t?n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)":"translate3d(0, 0, 0)",WebkitTransform:t?n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)":"translate3d(0, 0, 0)",transform:t?n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)":"translate3d(0, 0, 0)",transition:"all 0.5s",visibility:t?"visible":"hidden"}},pageWrap:function(t,e,n){return{MozTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",MsTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",OTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",WebkitTransform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",transform:t?"":n?"translate3d(-"+e+", 0, 0)":"translate3d("+e+", 0, 0)",transition:"all 0.5s",zIndex:1200,position:"relative"}},burgerIcon:function(t,e,n){return{MozTransform:t?n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)":"translate3d(0, 0, 0)",MsTransform:t?n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)":"translate3d(0, 0, 0)",OTransform:t?n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)":"translate3d(0, 0, 0)",WebkitTransform:t?n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)":"translate3d(0, 0, 0)",transform:t?n?"translate3d("+e+", 0, 0)":"translate3d(-"+e+", 0, 0)":"translate3d(0, 0, 0)",transition:"all 0.1s",position:"relative",zIndex:1300}},outerContainer:function(t){return{overflow:t?"":"hidden"}}};e.default=(0,i.default)(o),t.exports=e.default},function(t,e,n){function r(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[r+a]=s[a];return e||o(s)}var i=n(334),o=n(335);t.exports=r},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){function n(t,e){var n=e||0,i=r;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);t.exports=n}])});